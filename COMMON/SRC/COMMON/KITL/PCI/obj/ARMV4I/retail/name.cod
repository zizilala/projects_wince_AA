; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\COMMON\KITL\name.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
	EXPORT	|OALKitlCreateName|
	EXPORT	|??_C@_0CG@IHIMJOIA@?9OALKitlCreateName?$CIpBuffer?5?$DN?5?8?$CFh@| [ DATA ] ; `string'
	EXPORT	|??_C@_0CM@BCMDHFLI@?$CLOALKitlCreateName?$CI?8?$CFhs?8?0?50x?$CF04x@| [ DATA ] ; `string'
	IMPORT	|KITLOutputDebugString|
	IMPORT	|dpCurSettings|
	IMPORT	|__rt_sdiv|
; File c:\wince600\platform\common\src\common\kitl\name.c

  00000			 AREA	 |.pdata|, PDATA
|$T43070| DCD	|$LN24@OALKitlCre|
	DCD	0x40004e01

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_0CG@IHIMJOIA@?9OALKitlCreateName?$CIpBuffer?5?$DN?5?8?$CFh@| DCB "-"
	DCB	"OALKitlCreateName(pBuffer = '%hs')", 0xd, 0xa, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_0CM@BCMDHFLI@?$CLOALKitlCreateName?$CI?8?$CFhs?8?0?50x?$CF04x@| DCB "+"
	DCB	"OALKitlCreateName('%hs', 0x%04x, 0x%08x)", 0xd, 0xa, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALKitlCreateName| PROC

; 28   : {

  00000		 |$LN24@OALKitlCre|
  00000	e92d41f0	 stmdb       sp!, {r4 - r8, lr}
  00004		 |$M43067|
  00004	e1a06002	 mov         r6, r2
  00008	e1a04001	 mov         r4, r1
  0000c	e1a05000	 mov         r5, r0

; 29   :     UINT32 count;
; 30   :     UINT16 base, code;
; 31   : 
; 32   :     KITL_RETAILMSG(ZONE_KITL_OAL, (
; 33   :         "+OALKitlCreateName('%hs', 0x%04x, 0x%08x)\r\n", pPrefix, mac, pBuffer
; 34   :     ));

  00010	e59f711c	 ldr         r7, [pc, #0x11C]
  00014	e5973440	 ldr         r3, [r7, #0x440]
  00018	e3130a01	 tst         r3, #1, 20
  0001c	159f010c	 ldrne       r0, [pc, #0x10C]
  00020	11a03006	 movne       r3, r6
  00024	11a02004	 movne       r2, r4
  00028	11a01005	 movne       r1, r5
  0002c	1b000000	 blne        KITLOutputDebugString

; 35   :     
; 36   :     count = 0;
; 37   :     code = (mac[2] >> 8) | ((mac[2] & 0x00ff) << 8);

  00030	e1d410b4	 ldrh        r1, [r4, #4]
  00034	e3a04000	 mov         r4, #0

; 38   :     while (count < OAL_KITL_ID_SIZE - 6 && pPrefix[count] != '\0') {

  00038	e0462005	 sub         r2, r6, r5
  0003c	e1a03401	 mov         r3, r1, lsl #8
  00040	e1a01421	 mov         r1, r1, lsr #8
  00044	e1a0e803	 mov         lr, r3, lsl #16
  00048	e1a03801	 mov         r3, r1, lsl #16
  0004c	e1a03823	 mov         r3, r3, lsr #16
  00050	e183182e	 orr         r1, r3, lr, lsr #16
  00054		 |$LL8@OALKitlCre|
  00054	e1d530d0	 ldrsb       r3, [r5]
  00058	e3530000	 cmp         r3, #0
  0005c	0a000004	 beq         |$LN7@OALKitlCre|

; 39   :         pBuffer[count] = pPrefix[count];
; 40   :         count++;

  00060	e2844001	 add         r4, r4, #1
  00064	e7c23005	 strb        r3, [r2, +r5]
  00068	e354000a	 cmp         r4, #0xA
  0006c	e2855001	 add         r5, r5, #1
  00070	3afffff7	 bcc         |$LL8@OALKitlCre|
  00074		 |$LN7@OALKitlCre|

; 41   :     }        
; 42   :     base = 10000;

  00074	e3a03c27	 mov         r3, #0x27, 24
  00078	e3835010	 orr         r5, r3, #0x10

; 43   :     while (base > code && base != 0) base /= 10;

  0007c	e59f80a8	 ldr         r8, [pc, #0xA8]
  00080	e1510005	 cmp         r1, r5
  00084	2a00000a	 bcs         |$LN21@OALKitlCre|
  00088	e1a03005	 mov         r3, r5
  0008c		 |$LL6@OALKitlCre|
  0008c	e3530000	 cmp         r3, #0
  00090	0a000007	 beq         |$LN21@OALKitlCre|
  00094	e0c32895	 smull       r2, r3, r5, r8
  00098	e1a03143	 mov         r3, r3, asr #2
  0009c	e0833fa3	 add         r3, r3, r3, lsr #31
  000a0	e1a05803	 mov         r5, r3, lsl #16
  000a4	e1a05825	 mov         r5, r5, lsr #16
  000a8	e1a03005	 mov         r3, r5
  000ac	e1550001	 cmp         r5, r1
  000b0	8afffff5	 bhi         |$LL6@OALKitlCre|
  000b4		 |$LN21@OALKitlCre|

; 44   :     if (base == 0) { 

  000b4	e1b03005	 movs        r3, r5

; 45   :         pBuffer[count++] = '0';

  000b8	03a03030	 moveq       r3, #0x30
  000bc	07c43006	 streqb      r3, [r4, +r6]
  000c0	02844001	 addeq       r4, r4, #1
  000c4	0a00000e	 beq         |$LN1@OALKitlCre|

; 46   :     } else {
; 47   :         while (base > 0) {

  000c8	e3530000	 cmp         r3, #0
  000cc	0a00000c	 beq         |$LN1@OALKitlCre|
  000d0		 |$LL2@OALKitlCre|

; 48   :             pBuffer[count++] = code/base + '0';

  000d0	e1a00005	 mov         r0, r5
  000d4	eb000000	 bl          __rt_sdiv

; 49   :             code %= base;
; 50   :             base /= 10;

  000d8	e0c3e895	 smull       lr, r3, r5, r8
  000dc	e2802030	 add         r2, r0, #0x30
  000e0	e1a03143	 mov         r3, r3, asr #2
  000e4	e0833fa3	 add         r3, r3, r3, lsr #31
  000e8	e1a05803	 mov         r5, r3, lsl #16
  000ec	e1a01801	 mov         r1, r1, lsl #16
  000f0	e7c42006	 strb        r2, [r4, +r6]
  000f4	e1b05825	 movs        r5, r5, lsr #16
  000f8	e2844001	 add         r4, r4, #1
  000fc	e1a01821	 mov         r1, r1, lsr #16
  00100	1afffff2	 bne         |$LL2@OALKitlCre|
  00104		 |$LN1@OALKitlCre|

; 51   :         }
; 52   :     }        
; 53   :     pBuffer[count] = '\0';

  00104	e3a03000	 mov         r3, #0
  00108	e7c43006	 strb        r3, [r4, +r6]

; 54   : 
; 55   :     KITL_RETAILMSG(ZONE_KITL_OAL, (
; 56   :         "-OALKitlCreateName(pBuffer = '%hs')\r\n", pBuffer
; 57   :     ));

  0010c	e5973440	 ldr         r3, [r7, #0x440]
  00110	e3130a01	 tst         r3, #1, 20
  00114	159f000c	 ldrne       r0, [pc, #0xC]
  00118	11a01006	 movne       r1, r6
  0011c	1b000000	 blne        KITLOutputDebugString

; 58   : }

  00120	e8bd41f0	 ldmia       sp!, {r4 - r8, lr}
  00124	e12fff1e	 bx          lr
  00128		 |$LN25@OALKitlCre|
  00128		 |$LN26@OALKitlCre|
  00128	00000000	 DCD         |??_C@_0CG@IHIMJOIA@?9OALKitlCreateName?$CIpBuffer?5?$DN?5?8?$CFh@|
  0012c		 |$LN27@OALKitlCre|
  0012c	66666667	 DCD         0x66666667
  00130		 |$LN28@OALKitlCre|
  00130	00000000	 DCD         |??_C@_0CM@BCMDHFLI@?$CLOALKitlCreateName?$CI?8?$CFhs?8?0?50x?$CF04x@|
  00134		 |$LN29@OALKitlCre|
  00134	00000000	 DCD         |dpCurSettings|
  00138		 |$M43068|

			 ENDP  ; |OALKitlCreateName|

	END
