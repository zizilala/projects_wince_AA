; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\COMMON\PCI\register.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
	EXPORT	|??_C@_1EC@BIMEMICO@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EE@PDFCDEEO@?$AAD?$AAr?$AAi?$AAv?$AAe?$AAr?$AAs?$AA?2?$AAB?$AAu?$AAi?$AAl?$AAt?$AAI?$AAn?$AA?2?$AAP?$AAC?$AAI?$AA?2?$AAI?$AAn?$AAs?$AAt?$AAa?$AAn?$AAc?$AAe?$AA?2?$AAK?$AAI?$AAT@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HM@NOBBFMIE@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?3?$AA?5?$AAD?$AAe?$AAv?$AAi@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EM@NJHFHOHC@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1@| [ DATA ] ; `string'
	EXPORT	|__$ArrayPad$| [ DATA ]
	EXPORT	|OALPCIRegisterAsUsed|
	IMPORT	|PCIReg|
	IMPORT	|PCIInitInfo|
	IMPORT	|OALPCICfgRead|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|dpCurSettings|
	IMPORT	|__security_cookie|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|__security_check_cookie|

  00000			 AREA	 |.pdata|, PDATA
|$T43122| DCD	|$LN12@OALPCIRegi|
	DCD	0xc0006505
; File c:\wince600\platform\common\src\common\pci\register.c

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EC@BIMEMICO@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "R", 0x0, "e", 0x0, "g", 0x0, "i", 0x0, "s", 0x0, "t"
	DCB	0x0, "e", 0x0, "r", 0x0, "A", 0x0, "s", 0x0, "U", 0x0, "s"
	DCB	0x0, "e", 0x0, "d", 0x0, "(", 0x0, "r", 0x0, "c", 0x0, " "
	DCB	0x0, "=", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@PDFCDEEO@?$AAD?$AAr?$AAi?$AAv?$AAe?$AAr?$AAs?$AA?2?$AAB?$AAu?$AAi?$AAl?$AAt?$AAI?$AAn?$AA?2?$AAP?$AAC?$AAI?$AA?2?$AAI?$AAn?$AAs?$AAt?$AAa?$AAn?$AAc?$AAe?$AA?2?$AAK?$AAI?$AAT@| DCB "D"
	DCB	0x0, "r", 0x0, "i", 0x0, "v", 0x0, "e", 0x0, "r", 0x0, "s"
	DCB	0x0, "\\", 0x0, "B", 0x0, "u", 0x0, "i", 0x0, "l", 0x0, "t"
	DCB	0x0, "I", 0x0, "n", 0x0, "\\", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "\\", 0x0, "I", 0x0, "n", 0x0, "s", 0x0, "t", 0x0, "a"
	DCB	0x0, "n", 0x0, "c", 0x0, "e", 0x0, "\\", 0x0, "K", 0x0, "I"
	DCB	0x0, "T", 0x0, "L", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HM@NOBBFMIE@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?3?$AA?5?$AAD?$AAe?$AAv?$AAi@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, "O"
	DCB	0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I", 0x0, "R"
	DCB	0x0, "e", 0x0, "g", 0x0, "i", 0x0, "s", 0x0, "t", 0x0, "e"
	DCB	0x0, "r", 0x0, "A", 0x0, "s", 0x0, "U", 0x0, "s", 0x0, "e"
	DCB	0x0, "d", 0x0, ":", 0x0, " ", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, " ", 0x0, "c", 0x0, "o"
	DCB	0x0, "n", 0x0, "f", 0x0, "i", 0x0, "g", 0x0, " ", 0x0, "s"
	DCB	0x0, "p", 0x0, "a", 0x0, "c", 0x0, "e", 0x0, " ", 0x0, "r"
	DCB	0x0, "e", 0x0, "a", 0x0, "d", 0x0, " ", 0x0, "f", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EM@NJHFHOHC@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "R", 0x0, "e", 0x0, "g", 0x0, "i", 0x0, "s", 0x0, "t"
	DCB	0x0, "e", 0x0, "r", 0x0, "A", 0x0, "s", 0x0, "U", 0x0, "s"
	DCB	0x0, "e", 0x0, "d", 0x0, "(", 0x0, "%", 0x0, "d", 0x0, ","
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, "/", 0x0, "%", 0x0, "d"
	DCB	0x0, "/", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.xdata|, DATA
|$T43118| DCD	0xffffffc4
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__GSHandlerCheck|
  00004	00000000	 DCD         |$T43118|

  00008		 |OALPCIRegisterAsUsed| PROC

; 27   : {

  00008		 |$LN12@OALPCIRegi|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d0003	 stmdb       sp!, {r0, r1}
  00010	e92d5000	 stmdb       sp!, {r12, lr}
  00014	e59fc17c	 ldr         r12, [pc, #0x17C]
  00018	e08dd00c	 add         sp, sp, r12
  0001c		 |$M43119|
  0001c	e59f3170	 ldr         r3, [pc, #0x170]
  00020	e5933000	 ldr         r3, [r3]
  00024	e58d3490	 str         r3, [sp, #0x490]

; 28   :     BOOL rc = FALSE;

  00028	e3a03000	 mov         r3, #0
  0002c	e58d338c	 str         r3, [sp, #0x38C]

; 29   :     PCI_COMMON_CONFIG pciCfg;
; 30   :     PCI_REG_INFO pciInfo;
; 31   : 
; 32   :     OALMSG(OAL_KITL&&OAL_FUNC, (
; 33   :         L"+OALPCIRegisterAsUsed(%d, %d/%d/%d)\r\n", busId, pciLoc.bus,
; 34   :         pciLoc.dev, pciLoc.fnc
; 35   :     ));

  00030	e59f314c	 ldr         r3, [pc, #0x14C]
  00034	e5933440	 ldr         r3, [r3, #0x440]
  00038	e3130a01	 tst         r3, #1, 20
  0003c	0a00000d	 beq         |$LN4@OALPCIRegi|
  00040	e59f313c	 ldr         r3, [pc, #0x13C]
  00044	e5933440	 ldr         r3, [r3, #0x440]
  00048	e3130004	 tst         r3, #4
  0004c	0a000009	 beq         |$LN4@OALPCIRegi|
  00050	e5dd34c8	 ldrb        r3, [sp, #0x4C8]
  00054	e58d3000	 str         r3, [sp]
  00058	e5dd34c9	 ldrb        r3, [sp, #0x4C9]
  0005c	e5dd24ca	 ldrb        r2, [sp, #0x4CA]
  00060	e59d14c4	 ldr         r1, [sp, #0x4C4]
  00064	e59f0124	 ldr         r0, [pc, #0x124]
  00068	eb000000	 bl          NKDbgPrintfW
  0006c	e3a03001	 mov         r3, #1
  00070	e58d34ac	 str         r3, [sp, #0x4AC]
  00074	ea000001	 b           |$LN5@OALPCIRegi|
  00078		 |$LN4@OALPCIRegi|
  00078	e3a03000	 mov         r3, #0
  0007c	e58d34ac	 str         r3, [sp, #0x4AC]
  00080		 |$LN5@OALPCIRegi|

; 36   : 
; 37   :     // First read all device configuration space
; 38   :     if (OALPCICfgRead(
; 39   :         busId, pciLoc, 0, sizeof(pciCfg), &pciCfg) != sizeof(pciCfg)
; 40   :     ) {

  00080	e28d3e39	 add         r3, sp, #0x39, 28
  00084	e58d3000	 str         r3, [sp]
  00088	e3a03c01	 mov         r3, #1, 24
  0008c	e3a02000	 mov         r2, #0
  00090	e59d14c8	 ldr         r1, [sp, #0x4C8]
  00094	e59d04c4	 ldr         r0, [sp, #0x4C4]
  00098	eb000000	 bl          OALPCICfgRead
  0009c	e58d04b0	 str         r0, [sp, #0x4B0]
  000a0	e59d34b0	 ldr         r3, [sp, #0x4B0]
  000a4	e3530c01	 cmp         r3, #1, 24
  000a8	0a00000b	 beq         |$LN1@OALPCIRegi|

; 41   :         OALMSG(OAL_ERROR, (
; 42   :             L"ERROR:OALPCIRegisterAsUsed: Device config space read failed\r\n"
; 43   :         ));            

  000ac	e59f30d0	 ldr         r3, [pc, #0xD0]
  000b0	e5933440	 ldr         r3, [r3, #0x440]
  000b4	e3130001	 tst         r3, #1
  000b8	0a000004	 beq         |$LN6@OALPCIRegi|
  000bc	e59f00c8	 ldr         r0, [pc, #0xC8]
  000c0	eb000000	 bl          NKDbgPrintfW
  000c4	e3a03001	 mov         r3, #1
  000c8	e58d34b4	 str         r3, [sp, #0x4B4]
  000cc	ea000001	 b           |$LN7@OALPCIRegi|
  000d0		 |$LN6@OALPCIRegi|
  000d0	e3a03000	 mov         r3, #0
  000d4	e58d34b4	 str         r3, [sp, #0x4B4]
  000d8		 |$LN7@OALPCIRegi|

; 44   :         goto cleanUp;

  000d8	ea00000e	 b           |$cleanUp$43085|
  000dc		 |$LN1@OALPCIRegi|

; 45   :     }  
; 46   : 
; 47   :     // Fill info structure
; 48   :     PCIInitInfo(
; 49   :        L"Drivers\\BuiltIn\\PCI\\Instance\\KITL", pciLoc.bus, pciLoc.dev, 
; 50   :        pciLoc.fnc, pciCfg.u.type0.InterruptLine, &pciCfg, &pciInfo
; 51   :     );

  000dc	e28d300c	 add         r3, sp, #0xC
  000e0	e58d3008	 str         r3, [sp, #8]
  000e4	e28d3e39	 add         r3, sp, #0x39, 28
  000e8	e58d3004	 str         r3, [sp, #4]
  000ec	e5dd33cc	 ldrb        r3, [sp, #0x3CC]
  000f0	e58d3000	 str         r3, [sp]
  000f4	e5dd34c8	 ldrb        r3, [sp, #0x4C8]
  000f8	e5dd24c9	 ldrb        r2, [sp, #0x4C9]
  000fc	e5dd14ca	 ldrb        r1, [sp, #0x4CA]
  00100	e59f0080	 ldr         r0, [pc, #0x80]
  00104	eb000000	 bl          PCIInitInfo

; 52   : 
; 53   :     // And write it to registry
; 54   :     PCIReg(&pciInfo);

  00108	e28d000c	 add         r0, sp, #0xC
  0010c	eb000000	 bl          PCIReg

; 55   : 
; 56   :     // We are done
; 57   :     rc = TRUE;

  00110	e3a03001	 mov         r3, #1
  00114	e58d338c	 str         r3, [sp, #0x38C]
  00118		 |$cleanUp$43085|

; 58   : 
; 59   : cleanUp:
; 60   :     OALMSG(OAL_KITL&&OAL_FUNC, (L"-OALPCIRegisterAsUsed(rc = %d)\r\n", rc));

  00118	e59f3064	 ldr         r3, [pc, #0x64]
  0011c	e5933440	 ldr         r3, [r3, #0x440]
  00120	e3130a01	 tst         r3, #1, 20
  00124	0a000009	 beq         |$LN8@OALPCIRegi|
  00128	e59f3054	 ldr         r3, [pc, #0x54]
  0012c	e5933440	 ldr         r3, [r3, #0x440]
  00130	e3130004	 tst         r3, #4
  00134	0a000005	 beq         |$LN8@OALPCIRegi|
  00138	e59d138c	 ldr         r1, [sp, #0x38C]
  0013c	e59f003c	 ldr         r0, [pc, #0x3C]
  00140	eb000000	 bl          NKDbgPrintfW
  00144	e3a03001	 mov         r3, #1
  00148	e58d34b8	 str         r3, [sp, #0x4B8]
  0014c	ea000001	 b           |$LN9@OALPCIRegi|
  00150		 |$LN8@OALPCIRegi|
  00150	e3a03000	 mov         r3, #0
  00154	e58d34b8	 str         r3, [sp, #0x4B8]
  00158		 |$LN9@OALPCIRegi|

; 61   :     return rc;

  00158	e59d0490	 ldr         r0, [sp, #0x490]
  0015c	eb000000	 bl          __security_check_cookie
  00160	e59d338c	 ldr         r3, [sp, #0x38C]
  00164	e58d34a8	 str         r3, [sp, #0x4A8]

; 62   : }

  00168	e59d04a8	 ldr         r0, [sp, #0x4A8]
  0016c	e3a0cb01	 mov         r12, #1, 22
  00170	e38cc0bc	 orr         r12, r12, #0xBC
  00174	e08dd00c	 add         sp, sp, r12
  00178	e89d6000	 ldmia       sp, {sp, lr}
  0017c	e12fff1e	 bx          lr
  00180		 |$LN13@OALPCIRegi|
  00180		 |$LN14@OALPCIRegi|
  00180	00000000	 DCD         |??_C@_1EC@BIMEMICO@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6@|
  00184		 |$LN15@OALPCIRegi|
  00184	00000000	 DCD         |dpCurSettings|
  00188		 |$LN16@OALPCIRegi|
  00188	00000000	 DCD         |??_C@_1EE@PDFCDEEO@?$AAD?$AAr?$AAi?$AAv?$AAe?$AAr?$AAs?$AA?2?$AAB?$AAu?$AAi?$AAl?$AAt?$AAI?$AAn?$AA?2?$AAP?$AAC?$AAI?$AA?2?$AAI?$AAn?$AAs?$AAt?$AAa?$AAn?$AAc?$AAe?$AA?2?$AAK?$AAI?$AAT@|
  0018c		 |$LN17@OALPCIRegi|
  0018c	00000000	 DCD         |??_C@_1HM@NOBBFMIE@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?3?$AA?5?$AAD?$AAe?$AAv?$AAi@|
  00190		 |$LN18@OALPCIRegi|
  00190	00000000	 DCD         |??_C@_1EM@NJHFHOHC@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAR?$AAe?$AAg?$AAi?$AAs?$AAt?$AAe?$AAr?$AAA?$AAs?$AAU?$AAs?$AAe?$AAd?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1@|
  00194		 |$LN19@OALPCIRegi|
  00194	00000000	 DCD         |__security_cookie|
  00198		 |$LN20@OALPCIRegi|
  00198	fffffb44	 DCD         0xfffffb44
  0019c		 |$M43120|

			 ENDP  ; |OALPCIRegisterAsUsed|

	END
