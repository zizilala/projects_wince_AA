; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\COMMON\PCI\id.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|OALPCIGetId|
	EXPORT	|??_C@_1EE@PJKFNFB@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAd?$AA?$CI?$AAi?$AAd?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EG@FOGMMDKF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAd?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?$CJ@| [ DATA ] ; `string'
	IMPORT	|OALPCICfgRead|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|dpCurSettings|
; File c:\wince600\platform\common\src\common\pci\id.c

  00000			 AREA	 |.pdata|, PDATA
|$T40375| DCD	|$LN9@OALPCIGetI|
	DCD	0x40002804

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@PJKFNFB@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAd?$AA?$CI?$AAi?$AAd?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "I", 0x0, "d", 0x0, "("
	DCB	0x0, "i", 0x0, "d", 0x0, " ", 0x0, "=", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EG@FOGMMDKF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAd?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?$CJ@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "I", 0x0, "d", 0x0, "("
	DCB	0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, "/", 0x0, "%", 0x0, "d", 0x0, "/", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALPCIGetId| PROC

; 27   : {

  00000		 |$LN9@OALPCIGetI|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5070	 stmdb       sp!, {r4 - r6, r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M40372|
  00010	e1a05001	 mov         r5, r1
  00014	e58d5020	 str         r5, [sp, #0x20]
  00018	e1a04000	 mov         r4, r0

; 28   :     UINT32 id = 0xFFFFFFFF, offset;
; 29   : 
; 30   :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 31   :         L"+OALPCIGetDeviceId(%d, %d/%d/%d)\r\n", busId, pciLoc.bus, pciLoc.dev,
; 32   :         pciLoc.fnc
; 33   :     ));

  0001c	e59f6078	 ldr         r6, [pc, #0x78]
  00020	e3e03000	 mvn         r3, #0
  00024	e58d3004	 str         r3, [sp, #4]
  00028	e5963440	 ldr         r3, [r6, #0x440]
  0002c	e3130c01	 tst         r3, #1, 24
  00030	13130004	 tstne       r3, #4
  00034	15dde020	 ldrneb      lr, [sp, #0x20]
  00038	15dd3021	 ldrneb      r3, [sp, #0x21]
  0003c	15dd2022	 ldrneb      r2, [sp, #0x22]
  00040	159f0050	 ldrne       r0, [pc, #0x50]
  00044	11a01004	 movne       r1, r4
  00048	158de000	 strne       lr, [sp]
  0004c	1b000000	 blne        NKDbgPrintfW

; 34   :     
; 35   :     offset = FIELD_OFFSET(PCI_COMMON_CONFIG, VendorID);
; 36   :     OALPCICfgRead(busId, pciLoc, offset, sizeof(id), &id);

  00050	e28d3004	 add         r3, sp, #4
  00054	e58d3000	 str         r3, [sp]
  00058	e3a03004	 mov         r3, #4
  0005c	e3a02000	 mov         r2, #0
  00060	e1a01005	 mov         r1, r5
  00064	e1a00004	 mov         r0, r4
  00068	eb000000	 bl          OALPCICfgRead

; 37   : 
; 38   :     OALMSG(OAL_PCI&&OAL_FUNC, (L"-OALPCIGetDeviceId(id = 0x%08x)\r\n", id));

  0006c	e5963440	 ldr         r3, [r6, #0x440]
  00070	e3130c01	 tst         r3, #1, 24
  00074	13130004	 tstne       r3, #4
  00078	159d1004	 ldrne       r1, [sp, #4]
  0007c	159f0010	 ldrne       r0, [pc, #0x10]
  00080	1b000000	 blne        NKDbgPrintfW

; 39   :     return id;

  00084	e59d0004	 ldr         r0, [sp, #4]

; 40   : }

  00088	e28dd008	 add         sp, sp, #8
  0008c	e89d6070	 ldmia       sp, {r4 - r6, sp, lr}
  00090	e12fff1e	 bx          lr
  00094		 |$LN10@OALPCIGetI|
  00094		 |$LN11@OALPCIGetI|
  00094	00000000	 DCD         |??_C@_1EE@PJKFNFB@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAd?$AA?$CI?$AAi?$AAd?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@|
  00098		 |$LN12@OALPCIGetI|
  00098	00000000	 DCD         |??_C@_1EG@FOGMMDKF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAd?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?$CJ@|
  0009c		 |$LN13@OALPCIGetI|
  0009c	00000000	 DCD         |dpCurSettings|
  000a0		 |$M40373|

			 ENDP  ; |OALPCIGetId|

	EXPORT	|OALPCIGetMBAR|
	EXPORT	|??_C@_1FC@DPGHJDLI@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAM?$AAB?$AAA?$AAR?$AA?$CI?$AAa?$AAd?$AAd?$AAr?$AAe?$AAs?$AAs?$AA?5?$AA?$DN?$AA?5?$AA0@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FC@NCOHMGLL@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAM?$AAB?$AAA?$AAR?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$T40395| DCD	|$LN9@OALPCIGetM|
	DCD	0x40002b04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@DPGHJDLI@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAM?$AAB?$AAA?$AAR?$AA?$CI?$AAa?$AAd?$AAd?$AAr?$AAe?$AAs?$AAs?$AA?5?$AA?$DN?$AA?5?$AA0@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "M", 0x0, "B", 0x0, "A"
	DCB	0x0, "R", 0x0, "(", 0x0, "a", 0x0, "d", 0x0, "d", 0x0, "r"
	DCB	0x0, "e", 0x0, "s", 0x0, "s", 0x0, " ", 0x0, "=", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@NCOHMGLL@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAM?$AAB?$AAA?$AAR?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "M", 0x0, "B", 0x0, "A"
	DCB	0x0, "R", 0x0, "(", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, "/", 0x0, "%", 0x0, "d", 0x0, "/"
	DCB	0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALPCIGetMBAR| PROC

; 46   : ) {

  00000		 |$LN9@OALPCIGetM|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d50f0	 stmdb       sp!, {r4 - r7, r12, lr}
  0000c	e24dd00c	 sub         sp, sp, #0xC
  00010		 |$M40392|
  00010	e1a06001	 mov         r6, r1
  00014	e58d6028	 str         r6, [sp, #0x28]
  00018	e1a04002	 mov         r4, r2
  0001c	e1a05000	 mov         r5, r0

; 47   :     UINT32 address = 0xFFFFFFFF, offset;
; 48   :     
; 49   :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 50   :         L"+OALPCIGetDeviceMBAR(%d, %d/%d/%d, %d)\r\n", busId, pciLoc.bus,
; 51   :         pciLoc.dev, pciLoc.fnc, index
; 52   :     ));

  00020	e59f7080	 ldr         r7, [pc, #0x80]
  00024	e3e03000	 mvn         r3, #0
  00028	e58d3008	 str         r3, [sp, #8]
  0002c	e5973440	 ldr         r3, [r7, #0x440]
  00030	e3130c01	 tst         r3, #1, 24
  00034	13130004	 tstne       r3, #4
  00038	15dde028	 ldrneb      lr, [sp, #0x28]
  0003c	15dd3029	 ldrneb      r3, [sp, #0x29]
  00040	15dd202a	 ldrneb      r2, [sp, #0x2A]
  00044	159f0058	 ldrne       r0, [pc, #0x58]
  00048	11a01005	 movne       r1, r5
  0004c	158de000	 strne       lr, [sp]
  00050	158d4004	 strne       r4, [sp, #4]
  00054	1b000000	 blne        NKDbgPrintfW

; 53   : 
; 54   :     // Read BAR register
; 55   :     offset = FIELD_OFFSET(PCI_COMMON_CONFIG, u.type0.BaseAddresses);
; 56   :     offset += index * sizeof(UINT32);
; 57   :     OALPCICfgRead(busId, pciLoc, offset, sizeof(address), &address);

  00058	e2843004	 add         r3, r4, #4
  0005c	e1a02103	 mov         r2, r3, lsl #2
  00060	e28de008	 add         lr, sp, #8
  00064	e3a03004	 mov         r3, #4
  00068	e1a01006	 mov         r1, r6
  0006c	e1a00005	 mov         r0, r5
  00070	e58de000	 str         lr, [sp]
  00074	eb000000	 bl          OALPCICfgRead

; 58   : 
; 59   :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 60   :         L"-OALPCIGetDeviceMBAR(address = 0x%08x)\r\n", address
; 61   :     ));

  00078	e5973440	 ldr         r3, [r7, #0x440]
  0007c	e3130c01	 tst         r3, #1, 24
  00080	13130004	 tstne       r3, #4
  00084	159d1008	 ldrne       r1, [sp, #8]
  00088	159f0010	 ldrne       r0, [pc, #0x10]
  0008c	1b000000	 blne        NKDbgPrintfW

; 62   :     return address;

  00090	e59d0008	 ldr         r0, [sp, #8]

; 63   : }

  00094	e28dd00c	 add         sp, sp, #0xC
  00098	e89d60f0	 ldmia       sp, {r4 - r7, sp, lr}
  0009c	e12fff1e	 bx          lr
  000a0		 |$LN10@OALPCIGetM|
  000a0		 |$LN11@OALPCIGetM|
  000a0	00000000	 DCD         |??_C@_1FC@DPGHJDLI@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAM?$AAB?$AAA?$AAR?$AA?$CI?$AAa?$AAd?$AAd?$AAr?$AAe?$AAs?$AAs?$AA?5?$AA?$DN?$AA?5?$AA0@|
  000a4		 |$LN12@OALPCIGetM|
  000a4	00000000	 DCD         |??_C@_1FC@NCOHMGLL@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAM?$AAB?$AAA?$AAR?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF@|
  000a8		 |$LN13@OALPCIGetM|
  000a8	00000000	 DCD         |dpCurSettings|
  000ac		 |$M40393|

			 ENDP  ; |OALPCIGetMBAR|

	EXPORT	|OALPCIGetInterruptPin|
	EXPORT	|??_C@_1FC@KFPMMNIB@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAr?$AAu?$AAp?$AAt?$AAP?$AAi?$AAn?$AA?$CI?$AAp?$AAi?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GC@DFGHBFGL@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAr?$AAu?$AAp?$AAt?$AAP?$AAi?$AAn?$AA?$CI?$AA?$CF?$AAd?$AA?0@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$T40414| DCD	|$LN9@OALPCIGetI@2|
	DCD	0x40002804

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@KFPMMNIB@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAr?$AAu?$AAp?$AAt?$AAP?$AAi?$AAn?$AA?$CI?$AAp?$AAi?$AAn@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "I", 0x0, "n", 0x0, "t"
	DCB	0x0, "e", 0x0, "r", 0x0, "r", 0x0, "u", 0x0, "p", 0x0, "t"
	DCB	0x0, "P", 0x0, "i", 0x0, "n", 0x0, "(", 0x0, "p", 0x0, "i"
	DCB	0x0, "n", 0x0, " ", 0x0, "=", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GC@DFGHBFGL@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAr?$AAu?$AAp?$AAt?$AAP?$AAi?$AAn?$AA?$CI?$AA?$CF?$AAd?$AA?0@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "I", 0x0, "n", 0x0, "t"
	DCB	0x0, "e", 0x0, "r", 0x0, "r", 0x0, "u", 0x0, "p", 0x0, "t"
	DCB	0x0, "P", 0x0, "i", 0x0, "n", 0x0, "(", 0x0, "%", 0x0, "d"
	DCB	0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, "/", 0x0, "%"
	DCB	0x0, "d", 0x0, "/", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALPCIGetInterruptPin| PROC

; 68   : {

  00000		 |$LN9@OALPCIGetI@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5070	 stmdb       sp!, {r4 - r6, r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M40411|
  00010	e1a05001	 mov         r5, r1
  00014	e58d5020	 str         r5, [sp, #0x20]
  00018	e1a04000	 mov         r4, r0

; 69   :     UINT8 pin = 1;
; 70   :     UINT32 offset;
; 71   : 
; 72   :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 73   :         L"+OALPCIGetDeviceInterruptPin(%d, %d/%d/%d, %d)\r\n", busId, 
; 74   :         pciLoc.bus, pciLoc.dev, pciLoc.fnc
; 75   :     ));

  0001c	e59f6078	 ldr         r6, [pc, #0x78]
  00020	e3a03001	 mov         r3, #1
  00024	e5cd3004	 strb        r3, [sp, #4]
  00028	e5963440	 ldr         r3, [r6, #0x440]
  0002c	e3130c01	 tst         r3, #1, 24
  00030	13130004	 tstne       r3, #4
  00034	15dde020	 ldrneb      lr, [sp, #0x20]
  00038	15dd3021	 ldrneb      r3, [sp, #0x21]
  0003c	15dd2022	 ldrneb      r2, [sp, #0x22]
  00040	159f0050	 ldrne       r0, [pc, #0x50]
  00044	11a01004	 movne       r1, r4
  00048	158de000	 strne       lr, [sp]
  0004c	1b000000	 blne        NKDbgPrintfW

; 76   : 
; 77   :     offset = FIELD_OFFSET(PCI_COMMON_CONFIG, u.type0.InterruptPin);
; 78   :     OALPCICfgRead(busId, pciLoc, offset, sizeof(pin), &pin);

  00050	e28d3004	 add         r3, sp, #4
  00054	e58d3000	 str         r3, [sp]
  00058	e3a03001	 mov         r3, #1
  0005c	e3a0203d	 mov         r2, #0x3D
  00060	e1a01005	 mov         r1, r5
  00064	e1a00004	 mov         r0, r4
  00068	eb000000	 bl          OALPCICfgRead

; 79   : 
; 80   :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 81   :         L"-OALPCIGetDeviceInterruptPin(pin = %d)\r\n", pin
; 82   :     ));

  0006c	e5963440	 ldr         r3, [r6, #0x440]
  00070	e3130c01	 tst         r3, #1, 24
  00074	13130004	 tstne       r3, #4
  00078	15dd1004	 ldrneb      r1, [sp, #4]
  0007c	159f0010	 ldrne       r0, [pc, #0x10]
  00080	1b000000	 blne        NKDbgPrintfW

; 83   :     return pin;

  00084	e5dd0004	 ldrb        r0, [sp, #4]

; 84   : }

  00088	e28dd008	 add         sp, sp, #8
  0008c	e89d6070	 ldmia       sp, {r4 - r6, sp, lr}
  00090	e12fff1e	 bx          lr
  00094		 |$LN10@OALPCIGetI@2|
  00094		 |$LN11@OALPCIGetI@2|
  00094	00000000	 DCD         |??_C@_1FC@KFPMMNIB@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAr?$AAu?$AAp?$AAt?$AAP?$AAi?$AAn?$AA?$CI?$AAp?$AAi?$AAn@|
  00098		 |$LN12@OALPCIGetI@2|
  00098	00000000	 DCD         |??_C@_1GC@DFGHBFGL@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAI?$AAn?$AAt?$AAe?$AAr?$AAr?$AAu?$AAp?$AAt?$AAP?$AAi?$AAn?$AA?$CI?$AA?$CF?$AAd?$AA?0@|
  0009c		 |$LN13@OALPCIGetI@2|
  0009c	00000000	 DCD         |dpCurSettings|
  000a0		 |$M40412|

			 ENDP  ; |OALPCIGetInterruptPin|

	EXPORT	|OALPCIGetHeaderType|
	EXPORT	|??_C@_1EI@IFJMDBCG@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAH?$AAe?$AAa?$AAd?$AAe?$AAr?$AAT?$AAy?$AAp?$AAe?$AA?$CI?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AA0?$AA2?$AAx@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FC@DMGEKDOE@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAH?$AAe?$AAa?$AAd?$AAe?$AAr?$AAT?$AAy?$AAp?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$T40435| DCD	|$LN11@OALPCIGetH|
	DCD	0x40002d04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EI@IFJMDBCG@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAH?$AAe?$AAa?$AAd?$AAe?$AAr?$AAT?$AAy?$AAp?$AAe?$AA?$CI?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AA0?$AA2?$AAx@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "H", 0x0, "e", 0x0, "a"
	DCB	0x0, "d", 0x0, "e", 0x0, "r", 0x0, "T", 0x0, "y", 0x0, "p"
	DCB	0x0, "e", 0x0, "(", 0x0, "t", 0x0, "y", 0x0, "p", 0x0, "e"
	DCB	0x0, " ", 0x0, "=", 0x0, " ", 0x0, "%", 0x0, "0", 0x0, "2"
	DCB	0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@DMGEKDOE@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAH?$AAe?$AAa?$AAd?$AAe?$AAr?$AAT?$AAy?$AAp?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "H", 0x0, "e", 0x0, "a"
	DCB	0x0, "d", 0x0, "e", 0x0, "r", 0x0, "T", 0x0, "y", 0x0, "p"
	DCB	0x0, "e", 0x0, "(", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, "/", 0x0, "%", 0x0, "d", 0x0, "/"
	DCB	0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALPCIGetHeaderType| PROC

; 89   : {

  00000		 |$LN11@OALPCIGetH|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5070	 stmdb       sp!, {r4 - r6, r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M40432|
  00010	e1a06001	 mov         r6, r1
  00014	e58d6020	 str         r6, [sp, #0x20]
  00018	e1a05000	 mov         r5, r0

; 90   :     UINT8 rc;
; 91   : 
; 92   :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 93   :         L"+OALPCIGetHeaderType(%d, %d/%d/%d, %d)\r\n", busId, 
; 94   :         pciLoc.bus, pciLoc.dev, pciLoc.fnc
; 95   :     ));

  0001c	e59f408c	 ldr         r4, [pc, #0x8C]
  00020	e5943440	 ldr         r3, [r4, #0x440]
  00024	e3130c01	 tst         r3, #1, 24
  00028	13130004	 tstne       r3, #4
  0002c	15dde020	 ldrneb      lr, [sp, #0x20]
  00030	15dd3021	 ldrneb      r3, [sp, #0x21]
  00034	15dd2022	 ldrneb      r2, [sp, #0x22]
  00038	159f006c	 ldrne       r0, [pc, #0x6C]
  0003c	11a01005	 movne       r1, r5
  00040	158de000	 strne       lr, [sp]
  00044	1b000000	 blne        NKDbgPrintfW

; 96   :     
; 97   :     // Read header
; 98   :     if (OALPCICfgRead(
; 99   :         busId, pciLoc, FIELD_OFFSET(PCI_COMMON_CONFIG, HeaderType),
; 100  :         sizeof(rc), &rc
; 101  :     ) != sizeof(rc)) rc = 0xFF;

  00048	e28d3004	 add         r3, sp, #4
  0004c	e58d3000	 str         r3, [sp]
  00050	e3a03001	 mov         r3, #1
  00054	e3a0200e	 mov         r2, #0xE
  00058	e1a01006	 mov         r1, r6
  0005c	e1a00005	 mov         r0, r5
  00060	eb000000	 bl          OALPCICfgRead
  00064	e3500001	 cmp         r0, #1

; 102  :     
; 103  :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 104  :         L"-OALPCIGetHeaderType(type = %02x)\r\n", rc
; 105  :     ));

  00068	e5942440	 ldr         r2, [r4, #0x440]
  0006c	13a030ff	 movne       r3, #0xFF
  00070	15cd3004	 strneb      r3, [sp, #4]
  00074	05dd3004	 ldreqb      r3, [sp, #4]
  00078	e3120c01	 tst         r2, #1, 24
  0007c	0a000005	 beq         |$LN6@OALPCIGetH|
  00080	e3120004	 tst         r2, #4
  00084	0a000003	 beq         |$LN6@OALPCIGetH|
  00088	e59f0018	 ldr         r0, [pc, #0x18]
  0008c	e1a01003	 mov         r1, r3
  00090	eb000000	 bl          NKDbgPrintfW
  00094	e5dd3004	 ldrb        r3, [sp, #4]
  00098		 |$LN6@OALPCIGetH|

; 106  :     return rc;
; 107  : }

  00098	e1a00003	 mov         r0, r3
  0009c	e28dd008	 add         sp, sp, #8
  000a0	e89d6070	 ldmia       sp, {r4 - r6, sp, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$LN12@OALPCIGetH|
  000a8		 |$LN13@OALPCIGetH|
  000a8	00000000	 DCD         |??_C@_1EI@IFJMDBCG@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAH?$AAe?$AAa?$AAd?$AAe?$AAr?$AAT?$AAy?$AAp?$AAe?$AA?$CI?$AAt?$AAy?$AAp?$AAe?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AA0?$AA2?$AAx@|
  000ac		 |$LN14@OALPCIGetH|
  000ac	00000000	 DCD         |??_C@_1FC@DMGEKDOE@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAH?$AAe?$AAa?$AAd?$AAe?$AAr?$AAT?$AAy?$AAp?$AAe?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF@|
  000b0		 |$LN15@OALPCIGetH|
  000b0	00000000	 DCD         |dpCurSettings|
  000b4		 |$M40433|

			 ENDP  ; |OALPCIGetHeaderType|

	EXPORT	|OALPCIGetSecBusNum|
	EXPORT	|??_C@_1EA@EAJIBAKP@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAc?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AAn?$AAu?$AAm?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FA@BDFOPHMC@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAc?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$T40456| DCD	|$LN11@OALPCIGetS|
	DCD	0x40002d04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EA@EAJIBAKP@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAc?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AAn?$AAu?$AAm?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "S", 0x0, "u", 0x0, "c"
	DCB	0x0, "B", 0x0, "u", 0x0, "s", 0x0, "N", 0x0, "u", 0x0, "m"
	DCB	0x0, "(", 0x0, "n", 0x0, "u", 0x0, "m", 0x0, " ", 0x0, "="
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FA@BDFOPHMC@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAc?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "S", 0x0, "u", 0x0, "c"
	DCB	0x0, "B", 0x0, "u", 0x0, "s", 0x0, "N", 0x0, "u", 0x0, "m"
	DCB	0x0, "(", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%"
	DCB	0x0, "d", 0x0, "/", 0x0, "%", 0x0, "d", 0x0, "/", 0x0, "%"
	DCB	0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALPCIGetSecBusNum| PROC

; 112  : {

  00000		 |$LN11@OALPCIGetS|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5070	 stmdb       sp!, {r4 - r6, r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M40453|
  00010	e1a06001	 mov         r6, r1
  00014	e58d6020	 str         r6, [sp, #0x20]
  00018	e1a05000	 mov         r5, r0

; 113  :     UINT8 rc;
; 114  :     
; 115  :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 116  :         L"+OALPCIGetSucBusNum(%d, %d/%d/%d, %d)\r\n", busId, 
; 117  :         pciLoc.bus, pciLoc.dev, pciLoc.fnc
; 118  :     ));

  0001c	e59f408c	 ldr         r4, [pc, #0x8C]
  00020	e5943440	 ldr         r3, [r4, #0x440]
  00024	e3130c01	 tst         r3, #1, 24
  00028	13130004	 tstne       r3, #4
  0002c	15dde020	 ldrneb      lr, [sp, #0x20]
  00030	15dd3021	 ldrneb      r3, [sp, #0x21]
  00034	15dd2022	 ldrneb      r2, [sp, #0x22]
  00038	159f006c	 ldrne       r0, [pc, #0x6C]
  0003c	11a01005	 movne       r1, r5
  00040	158de000	 strne       lr, [sp]
  00044	1b000000	 blne        NKDbgPrintfW

; 119  : 
; 120  :     // Read header
; 121  :     if (OALPCICfgRead(
; 122  :         busId, pciLoc, FIELD_OFFSET(
; 123  :             PCI_COMMON_CONFIG, u.type1.SecondaryBusNumber
; 124  :         ), sizeof(rc), &rc
; 125  :     ) != sizeof(rc)) rc = 0xFF;

  00048	e28d3004	 add         r3, sp, #4
  0004c	e58d3000	 str         r3, [sp]
  00050	e3a03001	 mov         r3, #1
  00054	e3a02019	 mov         r2, #0x19
  00058	e1a01006	 mov         r1, r6
  0005c	e1a00005	 mov         r0, r5
  00060	eb000000	 bl          OALPCICfgRead
  00064	e3500001	 cmp         r0, #1

; 126  : 
; 127  :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 128  :         L"-OALPCIGetSucBusNum(num = %d)\r\n", rc
; 129  :     ));

  00068	e5942440	 ldr         r2, [r4, #0x440]
  0006c	13a030ff	 movne       r3, #0xFF
  00070	15cd3004	 strneb      r3, [sp, #4]
  00074	05dd3004	 ldreqb      r3, [sp, #4]
  00078	e3120c01	 tst         r2, #1, 24
  0007c	0a000005	 beq         |$LN6@OALPCIGetS|
  00080	e3120004	 tst         r2, #4
  00084	0a000003	 beq         |$LN6@OALPCIGetS|
  00088	e59f0018	 ldr         r0, [pc, #0x18]
  0008c	e1a01003	 mov         r1, r3
  00090	eb000000	 bl          NKDbgPrintfW
  00094	e5dd3004	 ldrb        r3, [sp, #4]
  00098		 |$LN6@OALPCIGetS|

; 130  :     return rc;
; 131  : }

  00098	e1a00003	 mov         r0, r3
  0009c	e28dd008	 add         sp, sp, #8
  000a0	e89d6070	 ldmia       sp, {r4 - r6, sp, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$LN12@OALPCIGetS|
  000a8		 |$LN13@OALPCIGetS|
  000a8	00000000	 DCD         |??_C@_1EA@EAJIBAKP@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAc?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AAn?$AAu?$AAm?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  000ac		 |$LN14@OALPCIGetS|
  000ac	00000000	 DCD         |??_C@_1FA@BDFOPHMC@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAc?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd@|
  000b0		 |$LN15@OALPCIGetS|
  000b0	00000000	 DCD         |dpCurSettings|
  000b4		 |$M40454|

			 ENDP  ; |OALPCIGetSecBusNum|

	EXPORT	|OALPCIGetSubBusNum|
	EXPORT	|??_C@_1EA@OPNMICOI@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAb?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AAn?$AAu?$AAm?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FA@OMLOEBF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAb?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$T40477| DCD	|$LN11@OALPCIGetS@2|
	DCD	0x40002d04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EA@OPNMICOI@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAb?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AAn?$AAu?$AAm?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "S", 0x0, "u", 0x0, "b"
	DCB	0x0, "B", 0x0, "u", 0x0, "s", 0x0, "N", 0x0, "u", 0x0, "m"
	DCB	0x0, "(", 0x0, "n", 0x0, "u", 0x0, "m", 0x0, " ", 0x0, "="
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FA@OMLOEBF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAb?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "C", 0x0, "I"
	DCB	0x0, "G", 0x0, "e", 0x0, "t", 0x0, "S", 0x0, "u", 0x0, "b"
	DCB	0x0, "B", 0x0, "u", 0x0, "s", 0x0, "N", 0x0, "u", 0x0, "m"
	DCB	0x0, "(", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%"
	DCB	0x0, "d", 0x0, "/", 0x0, "%", 0x0, "d", 0x0, "/", 0x0, "%"
	DCB	0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALPCIGetSubBusNum| PROC

; 136  : {

  00000		 |$LN11@OALPCIGetS@2|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5070	 stmdb       sp!, {r4 - r6, r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M40474|
  00010	e1a06001	 mov         r6, r1
  00014	e58d6020	 str         r6, [sp, #0x20]
  00018	e1a05000	 mov         r5, r0

; 137  :     UINT8 rc;
; 138  :     
; 139  :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 140  :         L"+OALPCIGetSubBusNum(%d, %d/%d/%d, %d)\r\n", busId, 
; 141  :         pciLoc.bus, pciLoc.dev, pciLoc.fnc
; 142  :     ));

  0001c	e59f408c	 ldr         r4, [pc, #0x8C]
  00020	e5943440	 ldr         r3, [r4, #0x440]
  00024	e3130c01	 tst         r3, #1, 24
  00028	13130004	 tstne       r3, #4
  0002c	15dde020	 ldrneb      lr, [sp, #0x20]
  00030	15dd3021	 ldrneb      r3, [sp, #0x21]
  00034	15dd2022	 ldrneb      r2, [sp, #0x22]
  00038	159f006c	 ldrne       r0, [pc, #0x6C]
  0003c	11a01005	 movne       r1, r5
  00040	158de000	 strne       lr, [sp]
  00044	1b000000	 blne        NKDbgPrintfW

; 143  : 
; 144  :     // Read header
; 145  :     if (OALPCICfgRead(
; 146  :         busId, pciLoc, FIELD_OFFSET(
; 147  :             PCI_COMMON_CONFIG, u.type1.SubordinateBusNumber
; 148  :         ), sizeof(rc), &rc
; 149  :     ) != sizeof(rc)) rc = 0xFF;

  00048	e28d3004	 add         r3, sp, #4
  0004c	e58d3000	 str         r3, [sp]
  00050	e3a03001	 mov         r3, #1
  00054	e3a0201a	 mov         r2, #0x1A
  00058	e1a01006	 mov         r1, r6
  0005c	e1a00005	 mov         r0, r5
  00060	eb000000	 bl          OALPCICfgRead
  00064	e3500001	 cmp         r0, #1

; 150  : 
; 151  :     OALMSG(OAL_PCI&&OAL_FUNC, (
; 152  :         L"-OALPCIGetSubBusNum(num = %d)\r\n", rc
; 153  :     ));

  00068	e5942440	 ldr         r2, [r4, #0x440]
  0006c	13a030ff	 movne       r3, #0xFF
  00070	15cd3004	 strneb      r3, [sp, #4]
  00074	05dd3004	 ldreqb      r3, [sp, #4]
  00078	e3120c01	 tst         r2, #1, 24
  0007c	0a000005	 beq         |$LN6@OALPCIGetS@2|
  00080	e3120004	 tst         r2, #4
  00084	0a000003	 beq         |$LN6@OALPCIGetS@2|
  00088	e59f0018	 ldr         r0, [pc, #0x18]
  0008c	e1a01003	 mov         r1, r3
  00090	eb000000	 bl          NKDbgPrintfW
  00094	e5dd3004	 ldrb        r3, [sp, #4]
  00098		 |$LN6@OALPCIGetS@2|

; 154  :     return rc;
; 155  : }

  00098	e1a00003	 mov         r0, r3
  0009c	e28dd008	 add         sp, sp, #8
  000a0	e89d6070	 ldmia       sp, {r4 - r6, sp, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$LN12@OALPCIGetS@2|
  000a8		 |$LN13@OALPCIGetS@2|
  000a8	00000000	 DCD         |??_C@_1EA@OPNMICOI@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAb?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AAn?$AAu?$AAm?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  000ac		 |$LN14@OALPCIGetS@2|
  000ac	00000000	 DCD         |??_C@_1FA@OMLOEBF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAC?$AAI?$AAG?$AAe?$AAt?$AAS?$AAu?$AAb?$AAB?$AAu?$AAs?$AAN?$AAu?$AAm?$AA?$CI?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd?$AA?1?$AA?$CF?$AAd@|
  000b0		 |$LN15@OALPCIGetS@2|
  000b0	00000000	 DCD         |dpCurSettings|
  000b4		 |$M40475|

			 ENDP  ; |OALPCIGetSubBusNum|

	END
