; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\COMMON\IO\data.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|OALIoReadBusData|
	IMPORT	|memset|
	IMPORT	|OALPCICfgRead|

  00000			 AREA	 |.pdata|, PDATA
|$T40336| DCD	|$LN9@OALIoReadB|
	DCD	0x40002a04
; Function compile flags: /Odtp
; File c:\wince600\platform\common\src\common\io\data.c

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALIoReadBusData| PROC

; 37   : ) {

  00000		 |$LN9@OALIoReadB|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd018	 sub         sp, sp, #0x18
  00010		 |$M40333|

; 38   :     UINT32 rc = 0;

  00010	e3a03000	 mov         r3, #0
  00014	e58d3004	 str         r3, [sp, #4]

; 39   :     
; 40   :     switch (pDevLoc->IfcType) {

  00018	e59d3020	 ldr         r3, [sp, #0x20]
  0001c	e5933000	 ldr         r3, [r3]
  00020	e3530005	 cmp         r3, #5
  00024	0a000000	 beq         |$LN2@OALIoReadB|
  00028	ea000018	 b           |$LN3@OALIoReadB|
  0002c		 |$LN2@OALIoReadB|

; 41   : #ifdef OAL_IO_PCI        
; 42   :     case PCIBus:
; 43   :         rc = OALPCICfgRead(
; 44   :             pDevLoc->BusNumber, *(OAL_PCI_LOCATION*)&pDevLoc->LogicalLoc,
; 45   :             address, size, pData
; 46   :         );

  0002c	e59d302c	 ldr         r3, [sp, #0x2C]
  00030	e58d3000	 str         r3, [sp]
  00034	e59d3028	 ldr         r3, [sp, #0x28]
  00038	e59d2024	 ldr         r2, [sp, #0x24]
  0003c	e59d1020	 ldr         r1, [sp, #0x20]
  00040	e2811008	 add         r1, r1, #8
  00044	e58d1010	 str         r1, [sp, #0x10]
  00048	e59d1010	 ldr         r1, [sp, #0x10]
  0004c	e5911000	 ldr         r1, [r1]
  00050	e59d0020	 ldr         r0, [sp, #0x20]
  00054	e2800004	 add         r0, r0, #4
  00058	e5900000	 ldr         r0, [r0]
  0005c	eb000000	 bl          OALPCICfgRead
  00060	e58d0014	 str         r0, [sp, #0x14]
  00064	e59d3014	 ldr         r3, [sp, #0x14]
  00068	e58d3004	 str         r3, [sp, #4]

; 47   :         // Workaround PCIBus enumeration issue
; 48   :         if (rc == 0) {

  0006c	e59d3004	 ldr         r3, [sp, #4]
  00070	e3530000	 cmp         r3, #0
  00074	1a000005	 bne         |$LN1@OALIoReadB|

; 49   :             memset(pData, 0xFF, size);

  00078	e59d2028	 ldr         r2, [sp, #0x28]
  0007c	e3a010ff	 mov         r1, #0xFF
  00080	e59d002c	 ldr         r0, [sp, #0x2C]
  00084	eb000000	 bl          memset

; 50   :             rc = size;

  00088	e59d3028	 ldr         r3, [sp, #0x28]
  0008c	e58d3004	 str         r3, [sp, #4]
  00090		 |$LN1@OALIoReadB|
  00090		 |$LN3@OALIoReadB|

; 51   :         }
; 52   :         break;
; 53   : #endif        
; 54   :     }
; 55   :     return rc;

  00090	e59d3004	 ldr         r3, [sp, #4]
  00094	e58d300c	 str         r3, [sp, #0xC]

; 56   : }

  00098	e59d000c	 ldr         r0, [sp, #0xC]
  0009c	e28dd018	 add         sp, sp, #0x18
  000a0	e89d6000	 ldmia       sp, {sp, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$M40334|

			 ENDP  ; |OALIoReadBusData|

	EXPORT	|OALIoWriteBusData|
	IMPORT	|OALPCICfgWrite|

  00008			 AREA	 |.pdata|, PDATA
|$T40343| DCD	|$LN8@OALIoWrite|
	DCD	0x40002104
; Function compile flags: /Odtp

  000a8			 AREA	 |.text|, CODE, ARM

  000a8		 |OALIoWriteBusData| PROC

; 68   : ) {

  000a8		 |$LN8@OALIoWrite|
  000a8	e1a0c00d	 mov         r12, sp
  000ac	e92d000f	 stmdb       sp!, {r0 - r3}
  000b0	e92d5000	 stmdb       sp!, {r12, lr}
  000b4	e24dd018	 sub         sp, sp, #0x18
  000b8		 |$M40340|

; 69   :     UINT32 rc = 0;

  000b8	e3a03000	 mov         r3, #0
  000bc	e58d3004	 str         r3, [sp, #4]

; 70   :     
; 71   :     switch (pDevLoc->IfcType) {

  000c0	e59d3020	 ldr         r3, [sp, #0x20]
  000c4	e5933000	 ldr         r3, [r3]
  000c8	e3530005	 cmp         r3, #5
  000cc	0a000000	 beq         |$LN1@OALIoWrite|
  000d0	ea00000f	 b           |$LN2@OALIoWrite|
  000d4		 |$LN1@OALIoWrite|

; 72   : #ifdef OAL_IO_PCI
; 73   :     case PCIBus:
; 74   :         rc = OALPCICfgWrite(
; 75   :             pDevLoc->BusNumber, *(OAL_PCI_LOCATION*)&pDevLoc->LogicalLoc, 
; 76   :             address, size, pData
; 77   :         );

  000d4	e59d302c	 ldr         r3, [sp, #0x2C]
  000d8	e58d3000	 str         r3, [sp]
  000dc	e59d3028	 ldr         r3, [sp, #0x28]
  000e0	e59d2024	 ldr         r2, [sp, #0x24]
  000e4	e59d1020	 ldr         r1, [sp, #0x20]
  000e8	e2811008	 add         r1, r1, #8
  000ec	e58d1010	 str         r1, [sp, #0x10]
  000f0	e59d1010	 ldr         r1, [sp, #0x10]
  000f4	e5911000	 ldr         r1, [r1]
  000f8	e59d0020	 ldr         r0, [sp, #0x20]
  000fc	e2800004	 add         r0, r0, #4
  00100	e5900000	 ldr         r0, [r0]
  00104	eb000000	 bl          OALPCICfgWrite
  00108	e58d0014	 str         r0, [sp, #0x14]
  0010c	e59d3014	 ldr         r3, [sp, #0x14]
  00110	e58d3004	 str         r3, [sp, #4]
  00114		 |$LN2@OALIoWrite|

; 78   :         break;
; 79   : #endif        
; 80   :     }
; 81   :     return rc;

  00114	e59d3004	 ldr         r3, [sp, #4]
  00118	e58d300c	 str         r3, [sp, #0xC]

; 82   : }

  0011c	e59d000c	 ldr         r0, [sp, #0xC]
  00120	e28dd018	 add         sp, sp, #0x18
  00124	e89d6000	 ldmia       sp, {sp, lr}
  00128	e12fff1e	 bx          lr
  0012c		 |$M40341|

			 ENDP  ; |OALIoWriteBusData|

	END
