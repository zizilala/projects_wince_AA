; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\COMMON\IO\ioctl.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
	EXPORT	|OALIoCtlHalDdkCall|
	EXPORT	|??_C@_1DO@JHJONFOE@?$AA?9?$AAO?$AAA?$AAL?$AAI?$AAo?$AAC?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FM@IFHLCDE@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAI?$AAN?$AAV?$AAA?$AAL?$AAI@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HM@DONGDDHM@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAU?$AAn?$AAs?$AAu?$AAp@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GE@BFODAIDF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAU?$AAn?$AAs?$AAu?$AAp@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DG@HOFDDFMH@?$AA?$CL?$AAO?$AAA?$AAL?$AAI?$AAo?$AAC?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?$CI?$AA?4?$AA?4?$AA?4?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|NKSetLastError|
	IMPORT	|OALIoBusPowerOn|
	IMPORT	|OALIoBusPowerOff|
	IMPORT	|OALIoTransSystemAddress|
	IMPORT	|OALIoTransBusAddress|
	IMPORT	|OALIoReadBusData|
	IMPORT	|OALIoWriteBusData|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|dpCurSettings|
; File c:\wince600\platform\common\src\common\io\ioctl.c

  00000			 AREA	 |.pdata|, PDATA
|$T43135| DCD	|$LN54@OALIoCtlHa|
	DCD	0x40009702

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DO@JHJONFOE@?$AA?9?$AAO?$AAA?$AAL?$AAI?$AAo?$AAC?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "I", 0x0, "o", 0x0, "C"
	DCB	0x0, "t", 0x0, "l", 0x0, "H", 0x0, "a", 0x0, "l", 0x0, "D"
	DCB	0x0, "d", 0x0, "k", 0x0, "C", 0x0, "a", 0x0, "l", 0x0, "l"
	DCB	0x0, "(", 0x0, "r", 0x0, "c", 0x0, " ", 0x0, "=", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FM@IFHLCDE@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAI?$AAN?$AAV?$AAA?$AAL?$AAI@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, "O"
	DCB	0x0, "A", 0x0, "L", 0x0, "I", 0x0, "o", 0x0, "c", 0x0, "t"
	DCB	0x0, "l", 0x0, "H", 0x0, "a", 0x0, "l", 0x0, "D", 0x0, "d"
	DCB	0x0, "k", 0x0, "C", 0x0, "a", 0x0, "l", 0x0, "l", 0x0, ":"
	DCB	0x0, " ", 0x0, "I", 0x0, "N", 0x0, "V", 0x0, "A", 0x0, "L"
	DCB	0x0, "I", 0x0, "D", 0x0, " ", 0x0, "P", 0x0, "A", 0x0, "R"
	DCB	0x0, "A", 0x0, "M", 0x0, "E", 0x0, "T", 0x0, "E", 0x0, "R"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HM@DONGDDHM@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAU?$AAn?$AAs?$AAu?$AAp@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "I", 0x0, "o", 0x0, "c"
	DCB	0x0, "t", 0x0, "l", 0x0, "H", 0x0, "a", 0x0, "l", 0x0, "D"
	DCB	0x0, "d", 0x0, "k", 0x0, "C", 0x0, "a", 0x0, "l", 0x0, "l"
	DCB	0x0, ":", 0x0, " ", 0x0, "U", 0x0, "n", 0x0, "s", 0x0, "u"
	DCB	0x0, "p", 0x0, "p", 0x0, "o", 0x0, "r", 0x0, "t", 0x0, "e"
	DCB	0x0, "d", 0x0, " ", 0x0, "f", 0x0, "u", 0x0, "n", 0x0, "c"
	DCB	0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, " ", 0x0, "c"
	DCB	0x0, "o", 0x0, "d", 0x0, "e", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GE@BFODAIDF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAU?$AAn?$AAs?$AAu?$AAp@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "I", 0x0, "o", 0x0, "c"
	DCB	0x0, "t", 0x0, "l", 0x0, "H", 0x0, "a", 0x0, "l", 0x0, "D"
	DCB	0x0, "d", 0x0, "k", 0x0, "C", 0x0, "a", 0x0, "l", 0x0, "l"
	DCB	0x0, ":", 0x0, " ", 0x0, "U", 0x0, "n", 0x0, "s", 0x0, "u"
	DCB	0x0, "p", 0x0, "p", 0x0, "o", 0x0, "r", 0x0, "t", 0x0, "e"
	DCB	0x0, "d", 0x0, " ", 0x0, "b", 0x0, "u", 0x0, "s", 0x0, " "
	DCB	0x0, "t", 0x0, "y", 0x0, "p", 0x0, "e", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DG@HOFDDFMH@?$AA?$CL?$AAO?$AAA?$AAL?$AAI?$AAo?$AAC?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?$CI?$AA?4?$AA?4?$AA?4?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "I", 0x0, "o", 0x0, "C"
	DCB	0x0, "t", 0x0, "l", 0x0, "H", 0x0, "a", 0x0, "l", 0x0, "D"
	DCB	0x0, "d", 0x0, "k", 0x0, "C", 0x0, "a", 0x0, "l", 0x0, "l"
	DCB	0x0, "(", 0x0, ".", 0x0, ".", 0x0, ".", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALIoCtlHalDdkCall| PROC

; 30   : ) {

  00000		 |$LN54@OALIoCtlHa|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004	e24dd01c	 sub         sp, sp, #0x1C
  00008		 |$M43132|
  00008	e1a07002	 mov         r7, r2
  0000c	e1a05001	 mov         r5, r1

; 31   :     BOOL rc = FALSE;
; 32   :     BUSDATA_PARMS *pBusData;
; 33   :     PCI_SLOT_NUMBER slot;
; 34   :     DEVICE_LOCATION devLoc;
; 35   :     OAL_DDK_PARAMS *pParams;
; 36   :     
; 37   : 
; 38   :     OALMSG(OAL_IO&&OAL_FUNC, (L"+OALIoCtlHalDdkCall(...)\r\n"));

  00010	e59f6240	 ldr         r6, [pc, #0x240]
  00014	e3a04000	 mov         r4, #0
  00018	e5963440	 ldr         r3, [r6, #0x440]
  0001c	e3130b01	 tst         r3, #1, 22
  00020	13130004	 tstne       r3, #4
  00024	159f0228	 ldrne       r0, [pc, #0x228]
  00028	1b000000	 blne        NKDbgPrintfW

; 39   : 
; 40   :     if (pOutSize) {

  0002c	e59d3034	 ldr         r3, [sp, #0x34]
  00030	e3530000	 cmp         r3, #0

; 41   :         *pOutSize = 0;

  00034	13a02000	 movne       r2, #0
  00038	15832000	 strne       r2, [r3]

; 42   :     }
; 43   : 
; 44   :     if (pInpBuffer == NULL || inpSize < sizeof(UINT32)) {

  0003c	e3550000	 cmp         r5, #0
  00040	0a00006e	 beq         |$LN20@OALIoCtlHa|
  00044	e3570004	 cmp         r7, #4
  00048	3a00006c	 bcc         |$LN20@OALIoCtlHa|

; 49   :         goto cleanUp;
; 50   :     }        
; 51   : 
; 52   :     switch (*(UINT32*)pInpBuffer) {

  0004c	e5953000	 ldr         r3, [r5]
  00050	e2432001	 sub         r2, r3, #1
  00054	e3520007	 cmp         r2, #7
  00058	8a00005f	 bhi         |$LN1@OALIoCtlHa|
  0005c	e1a03082	 mov         r3, r2, lsl #1
  00060	e083300f	 add         r3, r3, pc
  00064	e1d330b4	 ldrh        r3, [r3, #4]
  00068	e08ff003	 add         pc, pc, r3
  0006c		 |$LN43@OALIoCtlHa|
  0006c		 |$LN42@OALIoCtlHa|
  0006c		 |$LN44@OALIoCtlHa|
  0006c	000c		 DCW         0xc
  0006e		 |$LN45@OALIoCtlHa|
  0006e	0080		 DCW         0x80
  00070		 |$LN46@OALIoCtlHa|
  00070	00d8		 DCW         0xd8
  00072		 |$LN47@OALIoCtlHa|
  00072	00f0		 DCW         0xf0
  00074		 |$LN48@OALIoCtlHa|
  00074	0104		 DCW         0x104
  00076		 |$LN49@OALIoCtlHa|
  00076	012c		 DCW         0x12c
  00078		 |$LN50@OALIoCtlHa|
  00078	014c		 DCW         0x14c
  0007a		 |$LN51@OALIoCtlHa|
  0007a	015c		 DCW         0x15c
  0007c		 |$LN17@OALIoCtlHa|

; 53   : 
; 54   :     case IOCTL_HAL_SETBUSDATA:
; 55   :         pBusData = (BUSDATA_PARMS*)pInpBuffer;
; 56   :         switch (pBusData->BusDataType) {

  0007c	e5953008	 ldr         r3, [r5, #8]
  00080	e3530004	 cmp         r3, #4
  00084	0a000004	 beq         |$LN14@OALIoCtlHa|
  00088		 |$LN38@OALIoCtlHa|
  00088	e5963440	 ldr         r3, [r6, #0x440]

; 68   :             break;
; 69   :         default:
; 70   :             OALMSG(OAL_ERROR, (
; 71   :                 L"ERROR: OALIoctlHalDdkCall: Unsupported bus type\r\n"
; 72   :             ));

  0008c	e3130001	 tst         r3, #1
  00090	0a000061	 beq         |$cleanUp$43035|
  00094	e59f01b4	 ldr         r0, [pc, #0x1B4]
  00098	ea00005e	 b           |$LN37@OALIoCtlHa|
  0009c		 |$LN14@OALIoCtlHa|

; 57   :         case PCIConfiguration:
; 58   :             devLoc.IfcType = PCIBus;
; 59   :             slot.u.AsULONG = pBusData->SlotNumber;

  0009c	e5950010	 ldr         r0, [r5, #0x10]

; 60   :             devLoc.BusNumber = pBusData->BusNumber >> 8;

  000a0	e595400c	 ldr         r4, [r5, #0xC]

; 61   :             devLoc.LogicalLoc = (pBusData->BusNumber & 0xFF) << 16;
; 62   :             devLoc.LogicalLoc |= slot.u.bits.DeviceNumber << 8;
; 63   :             devLoc.LogicalLoc |= slot.u.bits.FunctionNumber;
; 64   :             pBusData->ReturnCode = OALIoWriteBusData(
; 65   :                 &devLoc, pBusData->Offset, pBusData->Length, pBusData->Buffer
; 66   :             );

  000a4	e5953014	 ldr         r3, [r5, #0x14]
  000a8	e200101f	 and         r1, r0, #0x1F
  000ac	e20420ff	 and         r2, r4, #0xFF
  000b0	e1812402	 orr         r2, r1, r2, lsl #8
  000b4	e1a0e402	 mov         lr, r2, lsl #8
  000b8	e1a00c00	 mov         r0, r0, lsl #24
  000bc	e18e0ea0	 orr         r0, lr, r0, lsr #29
  000c0	e1a0e424	 mov         lr, r4, lsr #8
  000c4	e595201c	 ldr         r2, [r5, #0x1C]
  000c8	e5951018	 ldr         r1, [r5, #0x18]
  000cc	e3a07005	 mov         r7, #5
  000d0	e58d0010	 str         r0, [sp, #0x10]
  000d4	e28d0008	 add         r0, sp, #8
  000d8	e58de00c	 str         lr, [sp, #0xC]
  000dc	e58d7008	 str         r7, [sp, #8]
  000e0		 |$LN40@OALIoCtlHa|
  000e0	eb000000	 bl          OALIoWriteBusData
  000e4		 |$LN39@OALIoCtlHa|
  000e4	e5850004	 str         r0, [r5, #4]

; 67   :             rc = TRUE;

  000e8	e3a04001	 mov         r4, #1

; 73   :         }
; 74   :         break;

  000ec	ea00004a	 b           |$cleanUp$43035|
  000f0		 |$LN12@OALIoCtlHa|

; 75   :     case IOCTL_HAL_GETBUSDATA:
; 76   :         pBusData = (BUSDATA_PARMS*)pInpBuffer;
; 77   :         switch (pBusData->BusDataType) {

  000f0	e5953008	 ldr         r3, [r5, #8]
  000f4	e3530004	 cmp         r3, #4

; 78   :         case PCIConfiguration:
; 79   :             devLoc.IfcType = PCIBus;
; 80   :             slot.u.AsULONG = pBusData->SlotNumber;
; 81   :             devLoc.BusNumber = pBusData->BusNumber >> 8;
; 82   :             devLoc.LogicalLoc = (pBusData->BusNumber & 0xFF) << 16;
; 83   :             devLoc.LogicalLoc |= slot.u.bits.DeviceNumber << 8;
; 84   :             devLoc.LogicalLoc |= slot.u.bits.FunctionNumber;
; 85   :             pBusData->ReturnCode = OALIoReadBusData(
; 86   :                 &devLoc, pBusData->Offset, pBusData->Length, pBusData->Buffer
; 87   :             );
; 88   :             rc = TRUE;
; 89   :             break;
; 90   :         default:
; 91   :             OALMSG(OAL_ERROR, (
; 92   :                 L"ERROR: OALIoctlHalDdkCall: Unsupported bus type\r\n"
; 93   :             ));

  000f8	1affffe2	 bne         |$LN38@OALIoCtlHa|
  000fc	e5950010	 ldr         r0, [r5, #0x10]
  00100	e595400c	 ldr         r4, [r5, #0xC]
  00104	e5953014	 ldr         r3, [r5, #0x14]
  00108	e200101f	 and         r1, r0, #0x1F
  0010c	e20420ff	 and         r2, r4, #0xFF
  00110	e1812402	 orr         r2, r1, r2, lsl #8
  00114	e1a0e402	 mov         lr, r2, lsl #8
  00118	e1a00c00	 mov         r0, r0, lsl #24
  0011c	e595201c	 ldr         r2, [r5, #0x1C]
  00120	e5951018	 ldr         r1, [r5, #0x18]
  00124	e18e0ea0	 orr         r0, lr, r0, lsr #29
  00128	e58d0010	 str         r0, [sp, #0x10]
  0012c	e3a07005	 mov         r7, #5
  00130	e1a0e424	 mov         lr, r4, lsr #8
  00134	e28d0008	 add         r0, sp, #8
  00138	e58d7008	 str         r7, [sp, #8]
  0013c	e58de00c	 str         lr, [sp, #0xC]
  00140	eb000000	 bl          OALIoReadBusData

; 94   :         }
; 95   :         break;

  00144	eaffffe6	 b           |$LN39@OALIoCtlHa|
  00148		 |$LN7@OALIoCtlHa|

; 96   : 
; 97   :     case IOCTL_OAL_READBUSDATA:
; 98   :         pParams = (OAL_DDK_PARAMS*)pInpBuffer;
; 99   :         pParams->rc = OALIoReadBusData(
; 100  :             &pParams->busData.devLoc, pParams->busData.offset, 
; 101  :             pParams->busData.length , pParams->busData.pBuffer
; 102  :         );

  00148	e5953024	 ldr         r3, [r5, #0x24]
  0014c	e5952020	 ldr         r2, [r5, #0x20]
  00150	e595101c	 ldr         r1, [r5, #0x1C]
  00154	e2850008	 add         r0, r5, #8
  00158	eb000000	 bl          OALIoReadBusData
  0015c	eaffffe0	 b           |$LN39@OALIoCtlHa|
  00160		 |$LN6@OALIoCtlHa|

; 103  :         rc = TRUE;
; 104  :         break;
; 105  :     case IOCTL_OAL_WRITEBUSDATA:
; 106  :         pParams = (OAL_DDK_PARAMS*)pInpBuffer;
; 107  :         pParams->rc = OALIoWriteBusData(
; 108  :             &pParams->busData.devLoc, pParams->busData.offset, 
; 109  :             pParams->busData.length , pParams->busData.pBuffer
; 110  :         );

  00160	e5953024	 ldr         r3, [r5, #0x24]
  00164	e5952020	 ldr         r2, [r5, #0x20]
  00168	e595101c	 ldr         r1, [r5, #0x1C]
  0016c	e2850008	 add         r0, r5, #8

; 111  :         rc = TRUE;
; 112  :         break;

  00170	eaffffda	 b           |$LN40@OALIoCtlHa|
  00174		 |$LN5@OALIoCtlHa|

; 113  :     case IOCTL_OAL_TRANSBUSADDRESS:
; 114  :         pParams = (OAL_DDK_PARAMS*)pInpBuffer;
; 115  :         pParams->rc = OALIoTransBusAddress(
; 116  :             pParams->transAddress.ifcType, pParams->transAddress.busNumber, 
; 117  :             pParams->transAddress.address, &pParams->transAddress.space, 
; 118  :             &pParams->transAddress.address
; 119  :         );

  00174	e5952018	 ldr         r2, [r5, #0x18]
  00178	e595301c	 ldr         r3, [r5, #0x1C]
  0017c	e595100c	 ldr         r1, [r5, #0xC]
  00180	e5950008	 ldr         r0, [r5, #8]
  00184	e285e018	 add         lr, r5, #0x18
  00188	e2854010	 add         r4, r5, #0x10
  0018c	e58de004	 str         lr, [sp, #4]
  00190	e58d4000	 str         r4, [sp]
  00194	eb000000	 bl          OALIoTransBusAddress

; 120  :         rc = TRUE;
; 121  :         break;

  00198	eaffffd1	 b           |$LN39@OALIoCtlHa|
  0019c		 |$LN4@OALIoCtlHa|

; 122  :     case IOCTL_OAL_TRANSSYSADDRESS:
; 123  :         pParams = (OAL_DDK_PARAMS*)pInpBuffer;
; 124  :         pParams->rc = OALIoTransSystemAddress(
; 125  :             pParams->transAddress.ifcType, pParams->transAddress.busNumber,
; 126  :             pParams->transAddress.address, &pParams->transAddress.address
; 127  :         );

  0019c	e5952018	 ldr         r2, [r5, #0x18]
  001a0	e595301c	 ldr         r3, [r5, #0x1C]
  001a4	e595100c	 ldr         r1, [r5, #0xC]
  001a8	e5950008	 ldr         r0, [r5, #8]
  001ac	e285e018	 add         lr, r5, #0x18
  001b0	e58de000	 str         lr, [sp]
  001b4	eb000000	 bl          OALIoTransSystemAddress

; 128  :         rc = TRUE;
; 129  :         break;

  001b8	eaffffc9	 b           |$LN39@OALIoCtlHa|
  001bc		 |$LN3@OALIoCtlHa|

; 130  :     case IOCTL_OAL_BUSPOWEROFF:
; 131  :         pParams = (OAL_DDK_PARAMS*)pInpBuffer;
; 132  :         pParams->rc = OALIoBusPowerOff(
; 133  :             pParams->busPower.ifcType, pParams->busPower.busNumber
; 134  :         );            

  001bc	e595100c	 ldr         r1, [r5, #0xC]
  001c0	e5950008	 ldr         r0, [r5, #8]
  001c4	eb000000	 bl          OALIoBusPowerOff

; 135  :         rc = TRUE;
; 136  :         break;

  001c8	eaffffc5	 b           |$LN39@OALIoCtlHa|
  001cc		 |$LN2@OALIoCtlHa|

; 137  :     case IOCTL_OAL_BUSPOWERON:
; 138  :         pParams = (OAL_DDK_PARAMS*)pInpBuffer;
; 139  :         pParams->rc = OALIoBusPowerOn(
; 140  :             pParams->busPower.ifcType, pParams->busPower.busNumber
; 141  :         );            

  001cc	e595100c	 ldr         r1, [r5, #0xC]
  001d0	e5950008	 ldr         r0, [r5, #8]
  001d4	eb000000	 bl          OALIoBusPowerOn

; 142  :         rc = TRUE;
; 143  :         break;

  001d8	eaffffc1	 b           |$LN39@OALIoCtlHa|
  001dc		 |$LN1@OALIoCtlHa|

; 144  : 
; 145  :     default:
; 146  :         NKSetLastError(ERROR_INVALID_PARAMETER);

  001dc	e3a00057	 mov         r0, #0x57
  001e0	eb000000	 bl          NKSetLastError
  001e4	e5963440	 ldr         r3, [r6, #0x440]

; 147  :         OALMSG(OAL_ERROR, (
; 148  :             L"ERROR: OALIoctlHalDdkCall: Unsupported function code 0x%08x\r\n",
; 149  :             *(UINT32*)pInpBuffer
; 150  :         ));

  001e8	e3130001	 tst         r3, #1
  001ec	0a00000a	 beq         |$cleanUp$43035|
  001f0	e5951000	 ldr         r1, [r5]
  001f4	e59f0050	 ldr         r0, [pc, #0x50]
  001f8	eb000000	 bl          NKDbgPrintfW
  001fc	ea000006	 b           |$cleanUp$43035|
  00200		 |$LN20@OALIoCtlHa|

; 45   :         NKSetLastError(ERROR_INVALID_PARAMETER);

  00200	e3a00057	 mov         r0, #0x57
  00204	eb000000	 bl          NKSetLastError
  00208	e5963440	 ldr         r3, [r6, #0x440]

; 46   :         OALMSG(OAL_ERROR, (
; 47   :             L"ERROR:OALIoctlHalDdkCall: INVALID PARAMETER\r\n"
; 48   :         ));

  0020c	e3130001	 tst         r3, #1
  00210	0a000001	 beq         |$cleanUp$43035|
  00214	e59f002c	 ldr         r0, [pc, #0x2C]
  00218		 |$LN37@OALIoCtlHa|
  00218	eb000000	 bl          NKDbgPrintfW
  0021c		 |$cleanUp$43035|
  0021c	e5963440	 ldr         r3, [r6, #0x440]

; 151  :     }
; 152  : 
; 153  : cleanUp:
; 154  :     OALMSG(OAL_IO&&OAL_FUNC, (L"-OALIoCtlHalDdkCall(rc = %d)\r\n", rc));

  00220	e3130b01	 tst         r3, #1, 22
  00224	13130004	 tstne       r3, #4
  00228	159f0014	 ldrne       r0, [pc, #0x14]
  0022c	11a01004	 movne       r1, r4
  00230	1b000000	 blne        NKDbgPrintfW

; 155  :     return rc;    
; 156  : }

  00234	e1a00004	 mov         r0, r4
  00238	e28dd01c	 add         sp, sp, #0x1C
  0023c	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  00240	e12fff1e	 bx          lr
  00244		 |$LN55@OALIoCtlHa|
  00244		 |$LN56@OALIoCtlHa|
  00244	00000000	 DCD         |??_C@_1DO@JHJONFOE@?$AA?9?$AAO?$AAA?$AAL?$AAI?$AAo?$AAC?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00248		 |$LN57@OALIoCtlHa|
  00248	00000000	 DCD         |??_C@_1FM@IFHLCDE@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAI?$AAN?$AAV?$AAA?$AAL?$AAI@|
  0024c		 |$LN58@OALIoCtlHa|
  0024c	00000000	 DCD         |??_C@_1HM@DONGDDHM@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAU?$AAn?$AAs?$AAu?$AAp@|
  00250		 |$LN59@OALIoCtlHa|
  00250	00000000	 DCD         |??_C@_1GE@BFODAIDF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAO?$AAA?$AAL?$AAI?$AAo?$AAc?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?3?$AA?5?$AAU?$AAn?$AAs?$AAu?$AAp@|
  00254		 |$LN60@OALIoCtlHa|
  00254	00000000	 DCD         |??_C@_1DG@HOFDDFMH@?$AA?$CL?$AAO?$AAA?$AAL?$AAI?$AAo?$AAC?$AAt?$AAl?$AAH?$AAa?$AAl?$AAD?$AAd?$AAk?$AAC?$AAa?$AAl?$AAl?$AA?$CI?$AA?4?$AA?4?$AA?4?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00258		 |$LN61@OALIoCtlHa|
  00258	00000000	 DCD         |dpCurSettings|
  0025c		 |$M43133|

			 ENDP  ; |OALIoCtlHalDdkCall|

	END
