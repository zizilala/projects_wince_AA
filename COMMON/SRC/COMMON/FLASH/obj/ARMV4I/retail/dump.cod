; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\COMMON\FLASH\dump.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|OALFlashDump|
	EXPORT	|??_C@_1EM@NHAPHBBP@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAn?$AAo?$AAt?$AA?5?$AAd?$AAe?$AAt?$AAe?$AAc?$AAt?$AAe?$AAd?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FI@GLCEBIKL@?$AAR?$AAe?$AAg?$AAi?$AAo?$AAn?$AA?5?$AA?$CF?$AAd?$AA?3?$AA?5?$AA?$CF?$AA4?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HI@DCOIDNGK@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAd?$AAt?$AAh?$AA?5?$AA?$CF?$AAd?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FG@JLDNGHKN@?$AAS?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?1?$AAc?$AAh?$AAi?$AAp?$AA?0?$AA?5?$AAb?$AAa?$AAn?$AAk?$AA?5?$AA?$CF?$AAd?$AA?1?$AA0?$AAx?$AA?$CF?$AA0@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EI@GAFIBNJ@?$AAS?$AAe?$AAt?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAb?$AAu?$AAr?$AAs?$AAt?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?5?$AAr?$AAe?$AAg?$AAi?$AAo?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1M@JEHOPNL@?$AA?9?$AA?9?$AA?9?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|OALFlashInfo|
	IMPORT	|OALVAtoPA|
	IMPORT	|NKDbgPrintfW|
; File c:\wince600\platform\common\src\common\flash\dump.c

  00000			 AREA	 |.pdata|, PDATA
|$T40351| DCD	|$LN19@OALFlashDu|
	DCD	0x40003f02

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EM@NHAPHBBP@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAn?$AAo?$AAt?$AA?5?$AAd?$AAe?$AAt?$AAe?$AAc?$AAt?$AAe?$AAd?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF@| DCB "F"
	DCB	0x0, "l", 0x0, "a", 0x0, "s", 0x0, "h", 0x0, " ", 0x0, "m"
	DCB	0x0, "e", 0x0, "m", 0x0, "o", 0x0, "r", 0x0, "y", 0x0, " "
	DCB	0x0, "n", 0x0, "o", 0x0, "t", 0x0, " ", 0x0, "d", 0x0, "e"
	DCB	0x0, "t", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "a", 0x0, "t", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FI@GLCEBIKL@?$AAR?$AAe?$AAg?$AAi?$AAo?$AAn?$AA?5?$AA?$CF?$AAd?$AA?3?$AA?5?$AA?$CF?$AA4?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5@| DCB "R"
	DCB	0x0, "e", 0x0, "g", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, ":", 0x0, " ", 0x0, "%", 0x0, "4"
	DCB	0x0, "d", 0x0, " ", 0x0, "b", 0x0, "l", 0x0, "o", 0x0, "c"
	DCB	0x0, "k", 0x0, "s", 0x0, " ", 0x0, "w", 0x0, "i", 0x0, "t"
	DCB	0x0, "h", 0x0, " ", 0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e"
	DCB	0x0, " ", 0x0, "%", 0x0, "4", 0x0, "d", 0x0, " ", 0x0, "b"
	DCB	0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HI@DCOIDNGK@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAd?$AAt?$AAh?$AA?5?$AA?$CF?$AAd?$AA?5@| DCB "F"
	DCB	0x0, "l", 0x0, "a", 0x0, "s", 0x0, "h", 0x0, " ", 0x0, "m"
	DCB	0x0, "e", 0x0, "m", 0x0, "o", 0x0, "r", 0x0, "y", 0x0, " "
	DCB	0x0, "a", 0x0, "t", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, " ", 0x0, "w", 0x0, "i"
	DCB	0x0, "d", 0x0, "t", 0x0, "h", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "b", 0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, "p", 0x0, "a"
	DCB	0x0, "r", 0x0, "a", 0x0, "l", 0x0, "l", 0x0, "e", 0x0, "l"
	DCB	0x0, " ", 0x0, "c", 0x0, "h", 0x0, "i", 0x0, "p", 0x0, "("
	DCB	0x0, "s", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FG@JLDNGHKN@?$AAS?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?1?$AAc?$AAh?$AAi?$AAp?$AA?0?$AA?5?$AAb?$AAa?$AAn?$AAk?$AA?5?$AA?$CF?$AAd?$AA?1?$AA0?$AAx?$AA?$CF?$AA0@| DCB "S"
	DCB	0x0, "i", 0x0, "z", 0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "b", 0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s"
	DCB	0x0, "/", 0x0, "c", 0x0, "h", 0x0, "i", 0x0, "p", 0x0, ","
	DCB	0x0, " ", 0x0, "b", 0x0, "a", 0x0, "n", 0x0, "k", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, "/", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, " ", 0x0, "b", 0x0, "y"
	DCB	0x0, "t", 0x0, "e", 0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EI@GAFIBNJ@?$AAS?$AAe?$AAt?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAb?$AAu?$AAr?$AAs?$AAt?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?5?$AAr?$AAe?$AAg?$AAi?$AAo?$AAn@| DCB "S"
	DCB	0x0, "e", 0x0, "t", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ","
	DCB	0x0, " ", 0x0, "b", 0x0, "u", 0x0, "r", 0x0, "s", 0x0, "t"
	DCB	0x0, " ", 0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "r", 0x0, "e", 0x0, "g", 0x0, "i", 0x0, "o"
	DCB	0x0, "n", 0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1M@JEHOPNL@?$AA?9?$AA?9?$AA?9?$AA?$AN?$AA?6?$AA?$AA@| DCB "-", 0x0
	DCB	"-", 0x0, "-", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALFlashDump| PROC

; 28   : {

  00000		 |$LN19@OALFlashDu|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004	e24dd058	 sub         sp, sp, #0x58
  00008		 |$M40348|

; 29   :     OAL_FLASH_INFO info;
; 30   :     UINT32 base, i;
; 31   : 
; 32   :     // Erase must work from uncached memory
; 33   :     base = (UINT32)OALCAtoUA(pBase);
; 34   : 
; 35   :     OALLog(L"---\r\n");

  00008	e3804202	 orr         r4, r0, #2, 4
  0000c	e59f00d0	 ldr         r0, [pc, #0xD0]
  00010	eb000000	 bl          NKDbgPrintfW

; 36   :     
; 37   :     while (TRUE) {
; 38   : 
; 39   :         // Ther read first chip info
; 40   :         if (!OALFlashInfo((VOID*)base, &info)) {

  00014	ea000023	 b           |$LN16@OALFlashDu|
  00018		 |$LL6@OALFlashDu|

; 41   :             OALLog(
; 42   :                 L"Flash memory not detected at 0x%08x\r\n", 
; 43   :                 OALVAtoPA((VOID*)base)
; 44   :             );
; 45   :             break;
; 46   :         }
; 47   : 
; 48   :         OALLog(
; 49   :             L"Flash memory at 0x%08x width %d bytes %d parallel chip(s)\r\n",
; 50   :             OALVAtoPA((VOID*)base), info.width, info.parallel
; 51   :         );

  00018	eb000000	 bl          OALVAtoPA
  0001c	e59d3004	 ldr         r3, [sp, #4]
  00020	e59d2000	 ldr         r2, [sp]
  00024	e1a01000	 mov         r1, r0
  00028	e59f00c8	 ldr         r0, [pc, #0xC8]
  0002c	eb000000	 bl          NKDbgPrintfW

; 52   : 
; 53   :         OALLog(
; 54   :             L"Size %d bytes/chip, bank %d/0x%08x bytes\r\n",
; 55   :             info.size, info.size * info.parallel, info.size * info.parallel
; 56   :         );

  00030	e59de00c	 ldr         lr, [sp, #0xC]
  00034	e59d2004	 ldr         r2, [sp, #4]
  00038	e59f00b4	 ldr         r0, [pc, #0xB4]
  0003c	e1a0100e	 mov         r1, lr
  00040	e003029e	 mul         r3, lr, r2
  00044	e002029e	 mul         r2, lr, r2
  00048	eb000000	 bl          NKDbgPrintfW

; 57   : 
; 58   :         OALLog(
; 59   :             L"Set %d, burst size %d, %d regions\r\n",
; 60   :             info.set, info.burst, info.regions
; 61   :         );

  0004c	e59d3014	 ldr         r3, [sp, #0x14]
  00050	e59d2010	 ldr         r2, [sp, #0x10]
  00054	e59d1008	 ldr         r1, [sp, #8]
  00058	e59f0090	 ldr         r0, [pc, #0x90]
  0005c	eb000000	 bl          NKDbgPrintfW

; 62   : 
; 63   :         for (i = 0; i < info.regions; i++) {

  00060	e59d3014	 ldr         r3, [sp, #0x14]
  00064	e3a06000	 mov         r6, #0
  00068	e3530000	 cmp         r3, #0
  0006c	0a00000a	 beq         |$LN1@OALFlashDu|

; 41   :             OALLog(
; 42   :                 L"Flash memory not detected at 0x%08x\r\n", 
; 43   :                 OALVAtoPA((VOID*)base)
; 44   :             );
; 45   :             break;
; 46   :         }
; 47   : 
; 48   :         OALLog(
; 49   :             L"Flash memory at 0x%08x width %d bytes %d parallel chip(s)\r\n",
; 50   :             OALVAtoPA((VOID*)base), info.width, info.parallel
; 51   :         );

  00070	e28d5000	 add         r5, sp, #0
  00074		 |$LL3@OALFlashDu|

; 64   :             OALLog(
; 65   :                 L"Region %d: %4d blocks with size %4d bytes\r\n",
; 66   :                 i, info.aBlocks[i], info.aBlockSize[i]
; 67   :             );

  00074	e5953018	 ldr         r3, [r5, #0x18]
  00078	e5952038	 ldr         r2, [r5, #0x38]
  0007c	e59f0068	 ldr         r0, [pc, #0x68]
  00080	e1a01006	 mov         r1, r6
  00084	eb000000	 bl          NKDbgPrintfW
  00088	e59d3014	 ldr         r3, [sp, #0x14]
  0008c	e2866001	 add         r6, r6, #1
  00090	e2855004	 add         r5, r5, #4
  00094	e1560003	 cmp         r6, r3
  00098	3afffff5	 bcc         |$LL3@OALFlashDu|
  0009c		 |$LN1@OALFlashDu|

; 68   :         }
; 69   : 
; 70   :         base += info.size * info.parallel;

  0009c	e59d200c	 ldr         r2, [sp, #0xC]
  000a0	e59d3004	 ldr         r3, [sp, #4]
  000a4	e0244392	 mla         r4, r2, r3, r4
  000a8		 |$LN16@OALFlashDu|
  000a8	e28d1000	 add         r1, sp, #0
  000ac	e1a00004	 mov         r0, r4
  000b0	eb000000	 bl          OALFlashInfo
  000b4	e3500000	 cmp         r0, #0
  000b8	e1a00004	 mov         r0, r4
  000bc	1affffd5	 bne         |$LL6@OALFlashDu|
  000c0	eb000000	 bl          OALVAtoPA
  000c4	e1a01000	 mov         r1, r0
  000c8	e59f0018	 ldr         r0, [pc, #0x18]
  000cc	eb000000	 bl          NKDbgPrintfW

; 71   :         
; 72   :     }
; 73   : 
; 74   :     OALLog(L"---\r\n");

  000d0	e59f000c	 ldr         r0, [pc, #0xC]
  000d4	eb000000	 bl          NKDbgPrintfW

; 75   : 
; 76   : }    

  000d8	e28dd058	 add         sp, sp, #0x58
  000dc	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  000e0	e12fff1e	 bx          lr
  000e4		 |$LN20@OALFlashDu|
  000e4		 |$LN21@OALFlashDu|
  000e4	00000000	 DCD         |??_C@_1M@JEHOPNL@?$AA?9?$AA?9?$AA?9?$AA?$AN?$AA?6?$AA?$AA@|
  000e8		 |$LN22@OALFlashDu|
  000e8	00000000	 DCD         |??_C@_1EM@NHAPHBBP@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAn?$AAo?$AAt?$AA?5?$AAd?$AAe?$AAt?$AAe?$AAc?$AAt?$AAe?$AAd?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF@|
  000ec		 |$LN23@OALFlashDu|
  000ec	00000000	 DCD         |??_C@_1FI@GLCEBIKL@?$AAR?$AAe?$AAg?$AAi?$AAo?$AAn?$AA?5?$AA?$CF?$AAd?$AA?3?$AA?5?$AA?$CF?$AA4?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5@|
  000f0		 |$LN24@OALFlashDu|
  000f0	00000000	 DCD         |??_C@_1EI@GAFIBNJ@?$AAS?$AAe?$AAt?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAb?$AAu?$AAr?$AAs?$AAt?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?5?$AAr?$AAe?$AAg?$AAi?$AAo?$AAn@|
  000f4		 |$LN25@OALFlashDu|
  000f4	00000000	 DCD         |??_C@_1FG@JLDNGHKN@?$AAS?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?1?$AAc?$AAh?$AAi?$AAp?$AA?0?$AA?5?$AAb?$AAa?$AAn?$AAk?$AA?5?$AA?$CF?$AAd?$AA?1?$AA0?$AAx?$AA?$CF?$AA0@|
  000f8		 |$LN26@OALFlashDu|
  000f8	00000000	 DCD         |??_C@_1HI@DCOIDNGK@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAd?$AAt?$AAh?$AA?5?$AA?$CF?$AAd?$AA?5@|
  000fc		 |$M40349|

			 ENDP  ; |OALFlashDump|

	END
