; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\COMMON\FLASH\dump.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|??_C@_1FI@GLCEBIKL@?$AAR?$AAe?$AAg?$AAi?$AAo?$AAn?$AA?5?$AA?$CF?$AAd?$AA?3?$AA?5?$AA?$CF?$AA4?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EI@GAFIBNJ@?$AAS?$AAe?$AAt?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAb?$AAu?$AAr?$AAs?$AAt?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?5?$AAr?$AAe?$AAg?$AAi?$AAo?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FG@JLDNGHKN@?$AAS?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?1?$AAc?$AAh?$AAi?$AAp?$AA?0?$AA?5?$AAb?$AAa?$AAn?$AAk?$AA?5?$AA?$CF?$AAd?$AA?1?$AA0?$AAx?$AA?$CF?$AA0@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HI@DCOIDNGK@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAd?$AAt?$AAh?$AA?5?$AA?$CF?$AAd?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EM@NHAPHBBP@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAn?$AAo?$AAt?$AA?5?$AAd?$AAe?$AAt?$AAe?$AAc?$AAt?$AAe?$AAd?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF@| [ DATA ] ; `string'
	EXPORT	|??_C@_1M@JEHOPNL@?$AA?9?$AA?9?$AA?9?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|OALFlashDump|
	IMPORT	|OALVAtoPA|
	IMPORT	|OALFlashInfo|
	IMPORT	|NKDbgPrintfW|

  00000			 AREA	 |.pdata|, PDATA
|$T40310| DCD	|$LN11@OALFlashDu|
	DCD	0x40005904
; File c:\wince600\platform\common\src\common\flash\dump.c

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FI@GLCEBIKL@?$AAR?$AAe?$AAg?$AAi?$AAo?$AAn?$AA?5?$AA?$CF?$AAd?$AA?3?$AA?5?$AA?$CF?$AA4?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5@| DCB "R"
	DCB	0x0, "e", 0x0, "g", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, ":", 0x0, " ", 0x0, "%", 0x0, "4"
	DCB	0x0, "d", 0x0, " ", 0x0, "b", 0x0, "l", 0x0, "o", 0x0, "c"
	DCB	0x0, "k", 0x0, "s", 0x0, " ", 0x0, "w", 0x0, "i", 0x0, "t"
	DCB	0x0, "h", 0x0, " ", 0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e"
	DCB	0x0, " ", 0x0, "%", 0x0, "4", 0x0, "d", 0x0, " ", 0x0, "b"
	DCB	0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EI@GAFIBNJ@?$AAS?$AAe?$AAt?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAb?$AAu?$AAr?$AAs?$AAt?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?5?$AAr?$AAe?$AAg?$AAi?$AAo?$AAn@| DCB "S"
	DCB	0x0, "e", 0x0, "t", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ","
	DCB	0x0, " ", 0x0, "b", 0x0, "u", 0x0, "r", 0x0, "s", 0x0, "t"
	DCB	0x0, " ", 0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "r", 0x0, "e", 0x0, "g", 0x0, "i", 0x0, "o"
	DCB	0x0, "n", 0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FG@JLDNGHKN@?$AAS?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?1?$AAc?$AAh?$AAi?$AAp?$AA?0?$AA?5?$AAb?$AAa?$AAn?$AAk?$AA?5?$AA?$CF?$AAd?$AA?1?$AA0?$AAx?$AA?$CF?$AA0@| DCB "S"
	DCB	0x0, "i", 0x0, "z", 0x0, "e", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "b", 0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s"
	DCB	0x0, "/", 0x0, "c", 0x0, "h", 0x0, "i", 0x0, "p", 0x0, ","
	DCB	0x0, " ", 0x0, "b", 0x0, "a", 0x0, "n", 0x0, "k", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, "/", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, " ", 0x0, "b", 0x0, "y"
	DCB	0x0, "t", 0x0, "e", 0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HI@DCOIDNGK@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAd?$AAt?$AAh?$AA?5?$AA?$CF?$AAd?$AA?5@| DCB "F"
	DCB	0x0, "l", 0x0, "a", 0x0, "s", 0x0, "h", 0x0, " ", 0x0, "m"
	DCB	0x0, "e", 0x0, "m", 0x0, "o", 0x0, "r", 0x0, "y", 0x0, " "
	DCB	0x0, "a", 0x0, "t", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, " ", 0x0, "w", 0x0, "i"
	DCB	0x0, "d", 0x0, "t", 0x0, "h", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "b", 0x0, "y", 0x0, "t", 0x0, "e", 0x0, "s"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, "p", 0x0, "a"
	DCB	0x0, "r", 0x0, "a", 0x0, "l", 0x0, "l", 0x0, "e", 0x0, "l"
	DCB	0x0, " ", 0x0, "c", 0x0, "h", 0x0, "i", 0x0, "p", 0x0, "("
	DCB	0x0, "s", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EM@NHAPHBBP@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAn?$AAo?$AAt?$AA?5?$AAd?$AAe?$AAt?$AAe?$AAc?$AAt?$AAe?$AAd?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF@| DCB "F"
	DCB	0x0, "l", 0x0, "a", 0x0, "s", 0x0, "h", 0x0, " ", 0x0, "m"
	DCB	0x0, "e", 0x0, "m", 0x0, "o", 0x0, "r", 0x0, "y", 0x0, " "
	DCB	0x0, "n", 0x0, "o", 0x0, "t", 0x0, " ", 0x0, "d", 0x0, "e"
	DCB	0x0, "t", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "a", 0x0, "t", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1M@JEHOPNL@?$AA?9?$AA?9?$AA?9?$AA?$AN?$AA?6?$AA?$AA@| DCB "-", 0x0
	DCB	"-", 0x0, "-", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALFlashDump| PROC

; 28   : {

  00000		 |$LN11@OALFlashDu|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0001	 stmdb       sp!, {r0}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd06c	 sub         sp, sp, #0x6C
  00010		 |$M40307|

; 29   :     OAL_FLASH_INFO info;
; 30   :     UINT32 base, i;
; 31   : 
; 32   :     // Erase must work from uncached memory
; 33   :     base = (UINT32)OALCAtoUA(pBase);

  00010	e59d3074	 ldr         r3, [sp, #0x74]
  00014	e3833202	 orr         r3, r3, #2, 4
  00018	e58d3004	 str         r3, [sp, #4]

; 34   : 
; 35   :     OALLog(L"---\r\n");

  0001c	e59f0128	 ldr         r0, [pc, #0x128]
  00020	eb000000	 bl          NKDbgPrintfW
  00024		 |$LN6@OALFlashDu|

; 36   :     
; 37   :     while (TRUE) {
; 38   : 
; 39   :         // Ther read first chip info
; 40   :         if (!OALFlashInfo((VOID*)base, &info)) {

  00024	e28d1008	 add         r1, sp, #8
  00028	e59d0004	 ldr         r0, [sp, #4]
  0002c	eb000000	 bl          OALFlashInfo
  00030	e58d0060	 str         r0, [sp, #0x60]
  00034	e59d3060	 ldr         r3, [sp, #0x60]
  00038	e3530000	 cmp         r3, #0
  0003c	1a000006	 bne         |$LN4@OALFlashDu|

; 41   :             OALLog(
; 42   :                 L"Flash memory not detected at 0x%08x\r\n", 
; 43   :                 OALVAtoPA((VOID*)base)
; 44   :             );

  00040	e59d0004	 ldr         r0, [sp, #4]
  00044	eb000000	 bl          OALVAtoPA
  00048	e58d0064	 str         r0, [sp, #0x64]
  0004c	e59d1064	 ldr         r1, [sp, #0x64]
  00050	e59f0108	 ldr         r0, [pc, #0x108]
  00054	eb000000	 bl          NKDbgPrintfW

; 45   :             break;

  00058	ea000036	 b           |$LN5@OALFlashDu|
  0005c		 |$LN4@OALFlashDu|

; 46   :         }
; 47   : 
; 48   :         OALLog(
; 49   :             L"Flash memory at 0x%08x width %d bytes %d parallel chip(s)\r\n",
; 50   :             OALVAtoPA((VOID*)base), info.width, info.parallel
; 51   :         );

  0005c	e59d0004	 ldr         r0, [sp, #4]
  00060	eb000000	 bl          OALVAtoPA
  00064	e58d0068	 str         r0, [sp, #0x68]
  00068	e59d300c	 ldr         r3, [sp, #0xC]
  0006c	e59d2008	 ldr         r2, [sp, #8]
  00070	e59d1068	 ldr         r1, [sp, #0x68]
  00074	e59f00e0	 ldr         r0, [pc, #0xE0]
  00078	eb000000	 bl          NKDbgPrintfW

; 52   : 
; 53   :         OALLog(
; 54   :             L"Size %d bytes/chip, bank %d/0x%08x bytes\r\n",
; 55   :             info.size, info.size * info.parallel, info.size * info.parallel
; 56   :         );

  0007c	e59d2014	 ldr         r2, [sp, #0x14]
  00080	e59d300c	 ldr         r3, [sp, #0xC]
  00084	e0030392	 mul         r3, r2, r3
  00088	e59d1014	 ldr         r1, [sp, #0x14]
  0008c	e59d200c	 ldr         r2, [sp, #0xC]
  00090	e0020291	 mul         r2, r1, r2
  00094	e59d1014	 ldr         r1, [sp, #0x14]
  00098	e59f00b8	 ldr         r0, [pc, #0xB8]
  0009c	eb000000	 bl          NKDbgPrintfW

; 57   : 
; 58   :         OALLog(
; 59   :             L"Set %d, burst size %d, %d regions\r\n",
; 60   :             info.set, info.burst, info.regions
; 61   :         );

  000a0	e59d301c	 ldr         r3, [sp, #0x1C]
  000a4	e59d2018	 ldr         r2, [sp, #0x18]
  000a8	e59d1010	 ldr         r1, [sp, #0x10]
  000ac	e59f00a0	 ldr         r0, [pc, #0xA0]
  000b0	eb000000	 bl          NKDbgPrintfW

; 62   : 
; 63   :         for (i = 0; i < info.regions; i++) {

  000b4	e3a03000	 mov         r3, #0
  000b8	e58d3000	 str         r3, [sp]
  000bc	ea000002	 b           |$LN3@OALFlashDu|
  000c0		 |$LN2@OALFlashDu|
  000c0	e59d3000	 ldr         r3, [sp]
  000c4	e2833001	 add         r3, r3, #1
  000c8	e58d3000	 str         r3, [sp]
  000cc		 |$LN3@OALFlashDu|
  000cc	e59d2000	 ldr         r2, [sp]
  000d0	e59d301c	 ldr         r3, [sp, #0x1C]
  000d4	e1520003	 cmp         r2, r3
  000d8	2a00000f	 bcs         |$LN1@OALFlashDu|

; 64   :             OALLog(
; 65   :                 L"Region %d: %4d blocks with size %4d bytes\r\n",
; 66   :                 i, info.aBlocks[i], info.aBlockSize[i]
; 67   :             );

  000dc	e59d1000	 ldr         r1, [sp]
  000e0	e3a03004	 mov         r3, #4
  000e4	e0020391	 mul         r2, r1, r3
  000e8	e28d3020	 add         r3, sp, #0x20
  000ec	e0833002	 add         r3, r3, r2
  000f0	e5933000	 ldr         r3, [r3]
  000f4	e59d0000	 ldr         r0, [sp]
  000f8	e3a02004	 mov         r2, #4
  000fc	e0010290	 mul         r1, r0, r2
  00100	e28d2040	 add         r2, sp, #0x40
  00104	e0822001	 add         r2, r2, r1
  00108	e5922000	 ldr         r2, [r2]
  0010c	e59d1000	 ldr         r1, [sp]
  00110	e59f0038	 ldr         r0, [pc, #0x38]
  00114	eb000000	 bl          NKDbgPrintfW

; 68   :         }

  00118	eaffffe8	 b           |$LN2@OALFlashDu|
  0011c		 |$LN1@OALFlashDu|

; 69   : 
; 70   :         base += info.size * info.parallel;

  0011c	e59d1014	 ldr         r1, [sp, #0x14]
  00120	e59d300c	 ldr         r3, [sp, #0xC]
  00124	e0020391	 mul         r2, r1, r3
  00128	e59d3004	 ldr         r3, [sp, #4]
  0012c	e0833002	 add         r3, r3, r2
  00130	e58d3004	 str         r3, [sp, #4]

; 71   :         
; 72   :     }

  00134	eaffffba	 b           |$LN6@OALFlashDu|
  00138		 |$LN5@OALFlashDu|

; 73   : 
; 74   :     OALLog(L"---\r\n");

  00138	e59f000c	 ldr         r0, [pc, #0xC]
  0013c	eb000000	 bl          NKDbgPrintfW

; 75   : 
; 76   : }    

  00140	e28dd06c	 add         sp, sp, #0x6C
  00144	e89d6000	 ldmia       sp, {sp, lr}
  00148	e12fff1e	 bx          lr
  0014c		 |$LN12@OALFlashDu|
  0014c		 |$LN13@OALFlashDu|
  0014c	00000000	 DCD         |??_C@_1M@JEHOPNL@?$AA?9?$AA?9?$AA?9?$AA?$AN?$AA?6?$AA?$AA@|
  00150		 |$LN14@OALFlashDu|
  00150	00000000	 DCD         |??_C@_1FI@GLCEBIKL@?$AAR?$AAe?$AAg?$AAi?$AAo?$AAn?$AA?5?$AA?$CF?$AAd?$AA?3?$AA?5?$AA?$CF?$AA4?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAw?$AAi?$AAt?$AAh?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5@|
  00154		 |$LN15@OALFlashDu|
  00154	00000000	 DCD         |??_C@_1EI@GAFIBNJ@?$AAS?$AAe?$AAt?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAb?$AAu?$AAr?$AAs?$AAt?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?5?$AAr?$AAe?$AAg?$AAi?$AAo?$AAn@|
  00158		 |$LN16@OALFlashDu|
  00158	00000000	 DCD         |??_C@_1FG@JLDNGHKN@?$AAS?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe?$AAs?$AA?1?$AAc?$AAh?$AAi?$AAp?$AA?0?$AA?5?$AAb?$AAa?$AAn?$AAk?$AA?5?$AA?$CF?$AAd?$AA?1?$AA0?$AAx?$AA?$CF?$AA0@|
  0015c		 |$LN17@OALFlashDu|
  0015c	00000000	 DCD         |??_C@_1HI@DCOIDNGK@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?5?$AAw?$AAi?$AAd?$AAt?$AAh?$AA?5?$AA?$CF?$AAd?$AA?5@|
  00160		 |$LN18@OALFlashDu|
  00160	00000000	 DCD         |??_C@_1EM@NHAPHBBP@?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAm?$AAe?$AAm?$AAo?$AAr?$AAy?$AA?5?$AAn?$AAo?$AAt?$AA?5?$AAd?$AAe?$AAt?$AAe?$AAc?$AAt?$AAe?$AAd?$AA?5?$AAa?$AAt?$AA?5?$AA0?$AAx?$AA?$CF@|
  00164		 |$M40308|

			 ENDP  ; |OALFlashDump|

	END
