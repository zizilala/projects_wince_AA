; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\OMAP3530\PM\POLICYADAPTERS\SMARTREFLEX\smartreflexpolicy.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|??_C@_1BE@LJCCPHDL@?$AAL?$AAp?$AAr?$AAO?$AAf?$AAf?$AAO?$AAp?$AAm?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BK@KMIGPPHB@?$AAS?$AAe?$AAn?$AAs?$AAi?$AAn?$AAg?$AAD?$AAe?$AAl?$AAa?$AAy?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BM@OPHBJDPH@?$AAS?$AAe?$AAn?$AAs?$AAi?$AAn?$AAg?$AAP?$AAe?$AAr?$AAi?$AAo?$AAd?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|dpCurSettings| [ DATA ]

  00000			 AREA	 |.rdata|, DATA, READONLY
|g_policyRegParams| DCD |??_C@_1BM@OPHBJDPH@?$AAS?$AAe?$AAn?$AAs?$AAi?$AAn?$AAg?$AAP?$AAe?$AAr?$AAi?$AAo?$AAd?$AA?$AA@|
	DCD	0x1
	DCD	0x0
	DCD	0x4
	DCD	0x4
	DCD	0x3e8
	DCD	|??_C@_1BK@KMIGPPHB@?$AAS?$AAe?$AAn?$AAs?$AAi?$AAn?$AAg?$AAD?$AAe?$AAl?$AAa?$AAy?$AA?$AA@|
	DCD	0x1
	DCD	0x0
	DCD	0x8
	DCD	0x4
	DCD	0x3e8
	DCD	|??_C@_1BE@LJCCPHDL@?$AAL?$AAp?$AAr?$AAO?$AAf?$AAf?$AAO?$AAp?$AAm?$AA?$AA@|
	DCD	0x1
	DCD	0x0
	DCD	0x30
	DCD	0x4
	DCD	0x2

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BE@LJCCPHDL@?$AAL?$AAp?$AAr?$AAO?$AAf?$AAf?$AAO?$AAp?$AAm?$AA?$AA@| DCB "L"
	DCB	0x0, "p", 0x0, "r", 0x0, "O", 0x0, "f", 0x0, "f", 0x0, "O"
	DCB	0x0, "p", 0x0, "m", 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BK@KMIGPPHB@?$AAS?$AAe?$AAn?$AAs?$AAi?$AAn?$AAg?$AAD?$AAe?$AAl?$AAa?$AAy?$AA?$AA@| DCB "S"
	DCB	0x0, "e", 0x0, "n", 0x0, "s", 0x0, "i", 0x0, "n", 0x0, "g"
	DCB	0x0, "D", 0x0, "e", 0x0, "l", 0x0, "a", 0x0, "y", 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BM@OPHBJDPH@?$AAS?$AAe?$AAn?$AAs?$AAi?$AAn?$AAg?$AAP?$AAe?$AAr?$AAi?$AAo?$AAd?$AA?$AA@| DCB "S"
	DCB	0x0, "e", 0x0, "n", 0x0, "s", 0x0, "i", 0x0, "n", 0x0, "g"
	DCB	0x0, "P", 0x0, "e", 0x0, "r", 0x0, "i", 0x0, "o", 0x0, "d"
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.data|, DATA
|dpCurSettings| DCB "P", 0x0, "r", 0x0, "o", 0x0, "x", 0x0, "y", 0x0, "D", 0x0
	DCB	"r", 0x0, "i", 0x0, "v", 0x0, "e", 0x0, "r", 0x0, 0x0, 0x0
	%	40
	DCB	"E", 0x0, "r", 0x0, "r", 0x0, "o", 0x0, "r", 0x0, "s", 0x0
	DCB	0x0, 0x0
	%	50
	DCB	"W", 0x0, "a", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0
	DCB	"g", 0x0, "s", 0x0, 0x0, 0x0
	%	46
	DCB	"F", 0x0, "u", 0x0, "n", 0x0, "c", 0x0, "t", 0x0, "i", 0x0
	DCB	"o", 0x0, "n", 0x0, 0x0, 0x0
	%	46
	DCB	"I", 0x0, "n", 0x0, "f", 0x0, "o", 0x0, 0x0, 0x0
	%	54
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCD	0x0
	EXPORT	|SetEvent|
	IMPORT	|EventModify|
; File c:\wince600\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.pdata|, PDATA
|$T37885| DCD	|$LN5@SetEvent|
	DCD	0x40000501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |SetEvent| PROC

; 235  : _inline BOOL SetEvent(HANDLE h) {

  00000		 |$LN5@SetEvent|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M37882|

; 236  : 	return EventModify(h,EVENT_SET);

  00004	e3a01003	 mov         r1, #3
  00008	eb000000	 bl          EventModify

; 237  : }

  0000c	e49de004	 ldr         lr, [sp], #4
  00010	e12fff1e	 bx          lr
  00014		 |$M37883|

			 ENDP  ; |SetEvent|

	EXPORT	|?EnableSmartReflex@@YAXH@Z|		; EnableSmartReflex
	EXPORT	|??_C@_1FC@LOBCMHCK@?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe?$AAf?$AAl?$AAe?$AAx?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe@| [ DATA ] ; `string'
	IMPORT	|NKDbgPrintfW|
	IMPORT	|KernelIoControl|
; File c:\wince600\platform\common\src\soc\common_ti_v1\omap3530\pm\policyadapters\smartreflex\smartreflexpolicy.cpp

  00000			 AREA	 |.pdata|, PDATA
|$T37894| DCD	|$LN7@EnableSmar|
	DCD	0x40001804

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@LOBCMHCK@?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe?$AAf?$AAl?$AAe?$AAx?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe@| DCB "S"
	DCB	0x0, "m", 0x0, "a", 0x0, "r", 0x0, "t", 0x0, "R", 0x0, "e"
	DCB	0x0, "f", 0x0, "l", 0x0, "e", 0x0, "x", 0x0, "P", 0x0, "o"
	DCB	0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, ":", 0x0, " "
	DCB	0x0, "E", 0x0, "n", 0x0, "a", 0x0, "b", 0x0, "l", 0x0, "e"
	DCB	0x0, "S", 0x0, "m", 0x0, "a", 0x0, "r", 0x0, "t", 0x0, "R"
	DCB	0x0, "e", 0x0, "f", 0x0, "l", 0x0, "e", 0x0, "x", 0x0, "("
	DCB	0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?EnableSmartReflex@@YAXH@Z| PROC	; EnableSmartReflex

; 143  : {

  00000		 |$LN7@EnableSmar|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d000f	 stmdb       sp!, {r0 - r3}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd008	 sub         sp, sp, #8
  00010		 |$M37891|

; 144  :     KernelIoControl(
; 145  :         IOCTL_SMARTREFLEX_CONTROL,
; 146  :         &bEnable,
; 147  :         sizeof(BOOL),
; 148  :         NULL,
; 149  :         0,
; 150  :         NULL
; 151  :         );

  00010	e59f0044	 ldr         r0, [pc, #0x44]
  00014	e3a0e000	 mov         lr, #0
  00018	e3a03000	 mov         r3, #0
  0001c	e3a02004	 mov         r2, #4
  00020	e28d1010	 add         r1, sp, #0x10
  00024	e58de004	 str         lr, [sp, #4]
  00028	e58de000	 str         lr, [sp]
  0002c	eb000000	 bl          KernelIoControl

; 152  :      RETAILMSG(ZONE_INFO,(L"SmartReflexPolicy: EnableSmartReflex(%d)",bEnable));

  00030	e59f3020	 ldr         r3, [pc, #0x20]
  00034	e5933440	 ldr         r3, [r3, #0x440]
  00038	e3130008	 tst         r3, #8
  0003c	159d1010	 ldrne       r1, [sp, #0x10]
  00040	159f000c	 ldrne       r0, [pc, #0xC]
  00044	1b000000	 blne        NKDbgPrintfW

; 153  : }

  00048	e28dd008	 add         sp, sp, #8
  0004c	e89d6000	 ldmia       sp, {sp, lr}
  00050	e12fff1e	 bx          lr
  00054		 |$LN8@EnableSmar|
  00054		 |$LN9@EnableSmar|
  00054	00000000	 DCD         |??_C@_1FC@LOBCMHCK@?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe?$AAf?$AAl?$AAe?$AAx?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAE?$AAn?$AAa?$AAb?$AAl?$AAe?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe@|
  00058		 |$LN10@EnableSmar|
  00058	00000000	 DCD         |dpCurSettings|
  0005c		 |$LN11@EnableSmar|
  0005c	02bd0fa4	 DCD         0x2bd0fa4
  00060		 |$M37892|

			 ENDP  ; |?EnableSmartReflex@@YAXH@Z|, EnableSmartReflex

	EXPORT	|?SendRetentionVoltages@@YAXXZ|		; SendRetentionVoltages

  00000			 AREA	 |.bss|, NOINIT
|s_KernIoCtlInfo| % 0x8
|s_KernIoCtlInfo| % 0x8

  00000			 AREA	 |.pdata|, PDATA
|$T37905| DCD	|$LN5@SendRetent|
	DCD	0x40000f02
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SendRetentionVoltages@@YAXXZ| PROC	; SendRetentionVoltages

; 163  : {

  00000		 |$LN5@SendRetent|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004	e24dd008	 sub         sp, sp, #8
  00008		 |$M37902|

; 164  :     KernelIoControl(
; 165  :         IOCTL_UPDATE_RETENTION_VOLTAGES,
; 166  :         &s_KernIoCtlInfo,
; 167  :         sizeof(IOCTL_RETENTION_VOLTAGES),
; 168  :         NULL,
; 169  :         0,
; 170  :         NULL
; 171  :         );

  00008	e59f1028	 ldr         r1, [pc, #0x28]
  0000c	e59f0020	 ldr         r0, [pc, #0x20]
  00010	e3a0e000	 mov         lr, #0
  00014	e3a03000	 mov         r3, #0
  00018	e3a02008	 mov         r2, #8
  0001c	e58de004	 str         lr, [sp, #4]
  00020	e58de000	 str         lr, [sp]
  00024	eb000000	 bl          KernelIoControl

; 172  : }

  00028	e28dd008	 add         sp, sp, #8
  0002c	e49de004	 ldr         lr, [sp], #4
  00030	e12fff1e	 bx          lr
  00034		 |$LN6@SendRetent|
  00034		 |$LN7@SendRetent|
  00034	02bd0fa8	 DCD         0x2bd0fa8
  00038		 |$LN8@SendRetent|
  00038	00000000	 DCD         |s_KernIoCtlInfo|
  0003c		 |$M37903|

			 ENDP  ; |?SendRetentionVoltages@@YAXXZ|, SendRetentionVoltages

	EXPORT	|?SaveCalibratedVoltages@@YAXXZ|	; SaveCalibratedVoltages

  00010			 AREA	 |.bss|, NOINIT
|s_VddOptimizationInfo| % 0x10
|s_VddOptimizationInfo| % 0x10

  00000			 AREA	 |.pdata|, PDATA
|$T37917| DCD	|$LN10@SaveCalibr|
	DCD	0x40000a00
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SaveCalibratedVoltages@@YAXXZ| PROC	; SaveCalibratedVoltages

; 182  : {

  00000		 |$LN10@SaveCalibr|
  00000		 |$M37914|

; 183  :     UINT idx;
; 184  :     for (idx = 0 ; idx < 2 ; idx++)

  00000	e59f201c	 ldr         r2, [pc, #0x1C]
  00004	e3a01002	 mov         r1, #2
  00008		 |$LL3@SaveCalibr|

; 185  :         {
; 186  :         s_VddOptimizationInfo[idx].optimizedVoltage = INREG32(s_VddOptimizationInfo[idx].pPrcmRegistryAddress);

  00008	e5923000	 ldr         r3, [r2]
  0000c	e2511001	 subs        r1, r1, #1
  00010	e5933000	 ldr         r3, [r3]
  00014	e5823004	 str         r3, [r2, #4]
  00018	e2822008	 add         r2, r2, #8
  0001c	1afffff9	 bne         |$LL3@SaveCalibr|

; 187  :         }
; 188  : }

  00020	e12fff1e	 bx          lr
  00024		 |$LN11@SaveCalibr|
  00024		 |$LN12@SaveCalibr|
  00024	00000000	 DCD         |s_VddOptimizationInfo|
  00028		 |$M37915|

			 ENDP  ; |?SaveCalibratedVoltages@@YAXXZ|, SaveCalibratedVoltages

	EXPORT	|?FlushCalibratedVoltages@@YAXXZ|	; FlushCalibratedVoltages

  00000			 AREA	 |.pdata|, PDATA
|$T37928| DCD	|$LN10@FlushCalib|
	DCD	0x40000d01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?FlushCalibratedVoltages@@YAXXZ| PROC	; FlushCalibratedVoltages

; 198  : {

  00000		 |$LN10@FlushCalib|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M37925|

; 199  :     UINT idx;
; 200  :     for (idx = 0 ; idx < 2 ; idx++)

  00004	e59f2024	 ldr         r2, [pc, #0x24]
  00008	e3a00002	 mov         r0, #2
  0000c	e2821008	 add         r1, r2, #8
  00010		 |$LL3@FlushCalib|

; 201  :         {
; 202  :         s_KernIoCtlInfo.retentionVoltage[idx] = s_VddOptimizationInfo[idx].optimizedVoltage;

  00010	e5913004	 ldr         r3, [r1, #4]
  00014	e2811008	 add         r1, r1, #8
  00018	e2500001	 subs        r0, r0, #1
  0001c	e4823004	 str         r3, [r2], #4
  00020	1afffffa	 bne         |$LL3@FlushCalib|

; 203  :         }
; 204  : 
; 205  :     SendRetentionVoltages();

  00024	eb000000	 bl          |?SendRetentionVoltages@@YAXXZ|

; 206  : }

  00028	e49de004	 ldr         lr, [sp], #4
  0002c	e12fff1e	 bx          lr
  00030		 |$LN11@FlushCalib|
  00030		 |$LN12@FlushCalib|
  00030	00000000	 DCD         |s_KernIoCtlInfo|
  00034		 |$M37926|

			 ENDP  ; |?FlushCalibratedVoltages@@YAXXZ|, FlushCalibratedVoltages

	EXPORT	|?UpdateSmartReflex@@YAXXZ|		; UpdateSmartReflex

  00030			 AREA	 |.bss|, NOINIT
|s_SmartReflexLoadPolicyInfo| % 0x34
|s_SmartReflexLoadPolicyInfo| % 0x34

  00000			 AREA	 |.pdata|, PDATA
|$T37938| DCD	|$LN11@UpdateSmar|
	DCD	0x40001a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?UpdateSmartReflex@@YAXXZ| PROC	; UpdateSmartReflex

; 216  : {

  00000		 |$LN11@UpdateSmar|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M37935|

; 217  :     if ((s_SmartReflexLoadPolicyInfo.dwActiveDevices > 0 ||
; 218  :          s_SmartReflexLoadPolicyInfo.nSensingState == STATE_SENSING
; 219  :          ) &&
; 220  :         s_SmartReflexLoadPolicyInfo.bSmartReflexState == FALSE
; 221  :            )

  00004	e59f3058	 ldr         r3, [pc, #0x58]
  00008	e5930000	 ldr         r0, [r3]
  0000c	e5932010	 ldr         r2, [r3, #0x10]
  00010	e5931014	 ldr         r1, [r3, #0x14]
  00014	e3500000	 cmp         r0, #0
  00018	1a000001	 bne         |$LN4@UpdateSmar|
  0001c	e3510002	 cmp         r1, #2
  00020	1a000003	 bne         |$LN5@UpdateSmar|
  00024		 |$LN4@UpdateSmar|
  00024	e3520000	 cmp         r2, #0

; 222  :         {
; 223  :         //enable SR
; 224  :         s_SmartReflexLoadPolicyInfo.bSmartReflexState = TRUE;

  00028	03a02001	 moveq       r2, #1

; 225  :         EnableSmartReflex(s_SmartReflexLoadPolicyInfo.bSmartReflexState);

  0002c	03a00001	 moveq       r0, #1
  00030	0a000007	 beq         |$LN8@UpdateSmar|
  00034		 |$LN5@UpdateSmar|

; 226  :         }
; 227  : 
; 228  :     else if ((s_SmartReflexLoadPolicyInfo.dwActiveDevices == 0 ||
; 229  :         s_SmartReflexLoadPolicyInfo.nSensingState == STATE_SENSING
; 230  :         ) &&
; 231  :         s_SmartReflexLoadPolicyInfo.bSmartReflexState == TRUE
; 232  :            )

  00034	e3500000	 cmp         r0, #0
  00038	0a000001	 beq         |$LN1@UpdateSmar|
  0003c	e3510002	 cmp         r1, #2
  00040	1a000005	 bne         |$LN2@UpdateSmar|
  00044		 |$LN1@UpdateSmar|
  00044	e3520001	 cmp         r2, #1
  00048	1a000003	 bne         |$LN2@UpdateSmar|

; 233  :         {
; 234  :         //diable SR
; 235  :         s_SmartReflexLoadPolicyInfo.bSmartReflexState = FALSE;

  0004c	e3a02000	 mov         r2, #0

; 236  :         EnableSmartReflex(s_SmartReflexLoadPolicyInfo.bSmartReflexState);

  00050	e3a00000	 mov         r0, #0
  00054		 |$LN8@UpdateSmar|
  00054	e5832010	 str         r2, [r3, #0x10]
  00058	eb000000	 bl          |?EnableSmartReflex@@YAXH@Z|
  0005c		 |$LN2@UpdateSmar|

; 237  :         }
; 238  : }

  0005c	e49de004	 ldr         lr, [sp], #4
  00060	e12fff1e	 bx          lr
  00064		 |$LN12@UpdateSmar|
  00064		 |$LN13@UpdateSmar|
  00064	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  00068		 |$M37936|

			 ENDP  ; |?UpdateSmartReflex@@YAXXZ|, UpdateSmartReflex

	EXPORT	|?SmartReflexSensingThread@@YAKPAX@Z|	; SmartReflexSensingThread
	IMPORT	|WaitForSingleObject|
	IMPORT	|CeSetThreadPriority|

  00098			 AREA	 |.bss|, NOINIT
|s_currentOpm| % 0x4

  00000			 AREA	 |.pdata|, PDATA
|$T37964| DCD	|$LN40@SmartRefle|
	DCD	0x40005d01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SmartReflexSensingThread@@YAKPAX@Z| PROC ; SmartReflexSensingThread

; 255  : {

  00000		 |$LN40@SmartRefle|
  00000	e92d4ff0	 stmdb       sp!, {r4 - r11, lr}
  00004		 |$M37961|

; 256  :     DWORD code;
; 257  :     DWORD dwTimeout;
; 258  : 
; 259  :     UNREFERENCED_PARAMETER(pvParam);
; 260  : 
; 261  :     // set thread priority to lowest to prevent possible thread inversion
; 262  :     CeSetThreadPriority(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingThread, 255);

  00004	e59f4164	 ldr         r4, [pc, #0x164]
  00008	e3a010ff	 mov         r1, #0xFF
  0000c	e5940028	 ldr         r0, [r4, #0x28]
  00010	eb000000	 bl          CeSetThreadPriority

; 263  : 
; 264  :     // events
; 265  :     // -----------------
; 266  :     //
; 267  :     // abort - when currently not in OPM0 or
; 268  :     //         a device is active which causes smartreflex to be enabled
; 269  :     //
; 270  :     // signal - currently at opm 0 and
; 271  :     //          no device active to trigger smartreflex
; 272  :     //
; 273  :     // timeout - wait time expired
; 274  :     //
; 275  : 
; 276  :     // states
; 277  :     //--------
; 278  :     //
; 279  :     // Inactive - not waiting to calibrate or
; 280  :     //            not currently calibrating
; 281  :     //
; 282  :     // Waiting  - currently waiting to calibrate
; 283  :     //
; 284  :     // Sensing  - currently calibrating
; 285  :     //
; 286  : 
; 287  :     // current state   |       abort       |       signal       |       timeout     |
; 288  :     //--------------------------------------------------------------------------------
; 289  :     //
; 290  :     // Inactive               Inactive             Waiting              Inactive
; 291  :     //
; 292  :     // Waiting                Inactive             Waiting              Sensing
; 293  :     //
; 294  :     // Sensing                Inactive             Waiting              Inactive
; 295  :     //
; 296  : 
; 297  :     dwTimeout = INFINITE;
; 298  :     for(;;)
; 299  :         {
; 300  :         code = WaitForSingleObject(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingEvent, dwTimeout);

  00014	e5940024	 ldr         r0, [r4, #0x24]
  00018	e3e01000	 mvn         r1, #0
  0001c	e3e05000	 mvn         r5, #0
  00020	eb000000	 bl          WaitForSingleObject

; 301  : 
; 302  :         // check for exit thread
; 303  :         if (s_SmartReflexLoadPolicyInfo.bExitThread == TRUE) goto cleanUp;

  00024	e5943018	 ldr         r3, [r4, #0x18]
  00028	e3530001	 cmp         r3, #1
  0002c	0a00004c	 beq         |$cleanUp$37610|
  00030	e3a09001	 mov         r9, #1
  00034	e3a0a001	 mov         r10, #1
  00038	e3a0b001	 mov         r11, #1
  0003c	e3a01000	 mov         r1, #0
  00040	e3a02002	 mov         r2, #2
  00044	e3a06000	 mov         r6, #0
  00048	e3a07000	 mov         r7, #0
  0004c	e3a08000	 mov         r8, #0
  00050		 |$LL24@SmartRefle|

; 304  : 
; 305  :         // identify event
; 306  :         if (s_currentOpm != kOpm0 || s_SmartReflexLoadPolicyInfo.dwActiveDevices != 0)

  00050	e5943034	 ldr         r3, [r4, #0x34]
  00054	e3530000	 cmp         r3, #0
  00058	1a00002f	 bne         |$LN19@SmartRefle|
  0005c	e5943000	 ldr         r3, [r4]
  00060	e3530000	 cmp         r3, #0
  00064	1a00002c	 bne         |$LN19@SmartRefle|

; 324  :                 }
; 325  :             }
; 326  :         else if (code == WAIT_OBJECT_0)
; 327  :             {
; 328  :             // Event: signal
; 329  :             switch (s_SmartReflexLoadPolicyInfo.nSensingState)

  00068	e5943014	 ldr         r3, [r4, #0x14]
  0006c	e3500000	 cmp         r0, #0
  00070	1a00000f	 bne         |$LN12@SmartRefle|
  00074	e3530000	 cmp         r3, #0
  00078	0a00000a	 beq         |$LN9@SmartRefle|
  0007c	e3530001	 cmp         r3, #1
  00080	0a000005	 beq         |$LN8@SmartRefle|
  00084	e3530002	 cmp         r3, #2
  00088	1a00002d	 bne         |$LN17@SmartRefle|

; 340  : 
; 341  :                 case STATE_SENSING:
; 342  :                     dwTimeout = s_SmartReflexLoadPolicyInfo.dwSensingDelay;

  0008c	e5945008	 ldr         r5, [r4, #8]

; 343  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_WAITING;

  00090	e5849014	 str         r9, [r4, #0x14]
  00094	eb000000	 bl          |?UpdateSmartReflex@@YAXXZ|
  00098	ea000029	 b           |$LN17@SmartRefle|
  0009c		 |$LN8@SmartRefle|

; 334  :                     break;
; 335  : 
; 336  :                 case STATE_WAITING:
; 337  :                     dwTimeout = s_SmartReflexLoadPolicyInfo.dwSensingDelay;

  0009c	e5945008	 ldr         r5, [r4, #8]

; 338  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_WAITING;

  000a0	e584a014	 str         r10, [r4, #0x14]

; 339  :                     break;

  000a4	ea000026	 b           |$LN17@SmartRefle|
  000a8		 |$LN9@SmartRefle|

; 330  :                 {
; 331  :                 case STATE_INACTIVE:
; 332  :                     dwTimeout = s_SmartReflexLoadPolicyInfo.dwSensingDelay;

  000a8	e5945008	 ldr         r5, [r4, #8]

; 333  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_WAITING;

  000ac	e584b014	 str         r11, [r4, #0x14]

; 344  :                     UpdateSmartReflex();
; 345  :                     break;
; 346  :                 }
; 347  :             }
; 348  :         else

  000b0	ea000023	 b           |$LN17@SmartRefle|
  000b4		 |$LN12@SmartRefle|

; 349  :             {
; 350  :             // Event: timeout
; 351  :             switch (s_SmartReflexLoadPolicyInfo.nSensingState)

  000b4	e3530000	 cmp         r3, #0
  000b8	0a000014	 beq         |$LN3@SmartRefle|
  000bc	e3530001	 cmp         r3, #1
  000c0	0a00000e	 beq         |$LN2@SmartRefle|
  000c4	e3530002	 cmp         r3, #2
  000c8	1a00001d	 bne         |$LN17@SmartRefle|

; 361  :                     UpdateSmartReflex();
; 362  :                     break;
; 363  : 
; 364  :                 case STATE_SENSING:
; 365  :                     dwTimeout = INFINITE;
; 366  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_INACTIVE;

  000cc	e5841014	 str         r1, [r4, #0x14]
  000d0	e3a01002	 mov         r1, #2
  000d4	e3e05000	 mvn         r5, #0
  000d8	e2842040	 add         r2, r4, #0x40

; 367  :                     SaveCalibratedVoltages();

  000dc		 |$LL29@SmartRefle|
  000dc	e5923000	 ldr         r3, [r2]
  000e0	e2511001	 subs        r1, r1, #1
  000e4	e5933000	 ldr         r3, [r3]
  000e8	e5823004	 str         r3, [r2, #4]
  000ec	e2822008	 add         r2, r2, #8
  000f0	1afffff9	 bne         |$LL29@SmartRefle|

; 368  :                     UpdateSmartReflex();

  000f4	eb000000	 bl          |?UpdateSmartReflex@@YAXXZ|

; 369  :                     FlushCalibratedVoltages();

  000f8	eb000000	 bl          |?FlushCalibratedVoltages@@YAXXZ|

; 370  :                     break;

  000fc	ea000010	 b           |$LN17@SmartRefle|
  00100		 |$LN2@SmartRefle|

; 357  : 
; 358  :                 case STATE_WAITING:
; 359  :                     dwTimeout = s_SmartReflexLoadPolicyInfo.dwSensingPeriod;

  00100	e5945004	 ldr         r5, [r4, #4]

; 360  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_SENSING;

  00104	e5842014	 str         r2, [r4, #0x14]
  00108	eb000000	 bl          |?UpdateSmartReflex@@YAXXZ|
  0010c	ea00000c	 b           |$LN17@SmartRefle|
  00110		 |$LN3@SmartRefle|

; 352  :                 {
; 353  :                 case STATE_INACTIVE:
; 354  :                     dwTimeout = INFINITE;

  00110	e3e05000	 mvn         r5, #0

; 355  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_INACTIVE;

  00114	e5846014	 str         r6, [r4, #0x14]

; 356  :                     break;

  00118	ea000009	 b           |$LN17@SmartRefle|
  0011c		 |$LN19@SmartRefle|

; 307  :             {
; 308  :             // Event: abort
; 309  :             dwTimeout = INFINITE;
; 310  :             switch (s_SmartReflexLoadPolicyInfo.nSensingState)

  0011c	e5943014	 ldr         r3, [r4, #0x14]
  00120	e3e05000	 mvn         r5, #0
  00124	e3530001	 cmp         r3, #1
  00128	0a000004	 beq         |$LN15@SmartRefle|
  0012c	e3530002	 cmp         r3, #2
  00130	1a000003	 bne         |$LN17@SmartRefle|

; 317  :                     break;
; 318  : 
; 319  :                 case STATE_SENSING:
; 320  :                     // check if smartreflex should be disabled
; 321  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_INACTIVE;

  00134	e5847014	 str         r7, [r4, #0x14]

; 322  :                     UpdateSmartReflex();

  00138	eb000000	 bl          |?UpdateSmartReflex@@YAXXZ|

; 323  :                     break;

  0013c	ea000000	 b           |$LN17@SmartRefle|
  00140		 |$LN15@SmartRefle|

; 311  :                 {
; 312  :                 case STATE_INACTIVE:
; 313  :                     break;
; 314  : 
; 315  :                 case STATE_WAITING:
; 316  :                     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_INACTIVE;

  00140	e5848014	 str         r8, [r4, #0x14]
  00144		 |$LN17@SmartRefle|

; 263  : 
; 264  :     // events
; 265  :     // -----------------
; 266  :     //
; 267  :     // abort - when currently not in OPM0 or
; 268  :     //         a device is active which causes smartreflex to be enabled
; 269  :     //
; 270  :     // signal - currently at opm 0 and
; 271  :     //          no device active to trigger smartreflex
; 272  :     //
; 273  :     // timeout - wait time expired
; 274  :     //
; 275  : 
; 276  :     // states
; 277  :     //--------
; 278  :     //
; 279  :     // Inactive - not waiting to calibrate or
; 280  :     //            not currently calibrating
; 281  :     //
; 282  :     // Waiting  - currently waiting to calibrate
; 283  :     //
; 284  :     // Sensing  - currently calibrating
; 285  :     //
; 286  : 
; 287  :     // current state   |       abort       |       signal       |       timeout     |
; 288  :     //--------------------------------------------------------------------------------
; 289  :     //
; 290  :     // Inactive               Inactive             Waiting              Inactive
; 291  :     //
; 292  :     // Waiting                Inactive             Waiting              Sensing
; 293  :     //
; 294  :     // Sensing                Inactive             Waiting              Inactive
; 295  :     //
; 296  : 
; 297  :     dwTimeout = INFINITE;
; 298  :     for(;;)
; 299  :         {
; 300  :         code = WaitForSingleObject(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingEvent, dwTimeout);

  00144	e5940024	 ldr         r0, [r4, #0x24]
  00148	e1a01005	 mov         r1, r5
  0014c	eb000000	 bl          WaitForSingleObject

; 301  : 
; 302  :         // check for exit thread
; 303  :         if (s_SmartReflexLoadPolicyInfo.bExitThread == TRUE) goto cleanUp;

  00150	e5943018	 ldr         r3, [r4, #0x18]
  00154	e3a02002	 mov         r2, #2
  00158	e3a01000	 mov         r1, #0
  0015c	e3530001	 cmp         r3, #1
  00160	1affffba	 bne         |$LL24@SmartRefle|
  00164		 |$cleanUp$37610|

; 371  :                 }
; 372  :             }
; 373  :         }
; 374  : 
; 375  : cleanUp:
; 376  :     return 0;

  00164	e3a00000	 mov         r0, #0

; 377  : }

  00168	e8bd4ff0	 ldmia       sp!, {r4 - r11, lr}
  0016c	e12fff1e	 bx          lr
  00170		 |$LN41@SmartRefle|
  00170		 |$LN42@SmartRefle|
  00170	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  00174		 |$M37962|

			 ENDP  ; |?SmartReflexSensingThread@@YAKPAX@Z|, SmartReflexSensingThread

	EXPORT	|?SignalSensingThread@@YAXXZ|		; SignalSensingThread
; File c:\wince600\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.pdata|, PDATA
|$T37977| DCD	|$LN10@SignalSens|
	DCD	0x40001101
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\omap3530\pm\policyadapters\smartreflex\smartreflexpolicy.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SignalSensingThread@@YAXXZ| PROC	; SignalSensingThread

; 388  : {

  00000		 |$LN10@SignalSens|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M37974|

; 389  :     if ((s_currentOpm == kOpm0 && s_SmartReflexLoadPolicyInfo.dwActiveDevices == 0) ||
; 390  :         s_SmartReflexLoadPolicyInfo.nSensingState != STATE_INACTIVE)

  00004	e59f2034	 ldr         r2, [pc, #0x34]
  00008	e5923034	 ldr         r3, [r2, #0x34]
  0000c	e3530000	 cmp         r3, #0
  00010	1a000002	 bne         |$LN1@SignalSens|
  00014	e5923000	 ldr         r3, [r2]
  00018	e3530000	 cmp         r3, #0
  0001c	0a000002	 beq         |$LN2@SignalSens|
  00020		 |$LN1@SignalSens|
  00020	e5923014	 ldr         r3, [r2, #0x14]
  00024	e3530000	 cmp         r3, #0
  00028	0a000002	 beq         |$LN6@SignalSens|
  0002c		 |$LN2@SignalSens|

; 391  :         {
; 392  :         SetEvent(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingEvent);

  0002c	e5920024	 ldr         r0, [r2, #0x24]
  00030	e3a01003	 mov         r1, #3
  00034	eb000000	 bl          EventModify
  00038		 |$LN6@SignalSens|

; 393  :         }
; 394  : }

  00038	e49de004	 ldr         lr, [sp], #4
  0003c	e12fff1e	 bx          lr
  00040		 |$LN11@SignalSens|
  00040		 |$LN12@SignalSens|
  00040	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  00044		 |$M37975|

			 ENDP  ; |?SignalSensingThread@@YAXXZ|, SignalSensingThread

	EXPORT	|?DvfsConstraintCallback@@YAHPAXK0I@Z|	; DvfsConstraintCallback

  00000			 AREA	 |.pdata|, PDATA
|$T37990| DCD	|$LN6@DvfsConstr|
	DCD	0x40000b01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?DvfsConstraintCallback@@YAHPAXK0I@Z| PROC ; DvfsConstraintCallback

; 408  : {

  00000		 |$LN6@DvfsConstr|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M37987|
  00004	e3a03801	 mov         r3, #1, 16

; 409  :     UNREFERENCED_PARAMETER(size);
; 410  :     UNREFERENCED_PARAMETER(hRefContext);
; 411  : 
; 412  :     if (msg == CONSTRAINT_MSG_DVFS_NEWOPM)

  00008	e3833001	 orr         r3, r3, #1
  0000c	e1510003	 cmp         r1, r3

; 413  :         {
; 414  :         s_currentOpm = (DWORD)pParam;

  00010	059f3010	 ldreq       r3, [pc, #0x10]
  00014	05832000	 streq       r2, [r3]

; 415  :         // When OPM changes check if smartreflex sensing is active
; 416  :         // if it is then abort activity
; 417  :         SignalSensingThread();

  00018	0b000000	 bleq        |?SignalSensingThread@@YAXXZ|

; 418  :         }
; 419  : 
; 420  :     return TRUE;

  0001c	e3a00001	 mov         r0, #1

; 421  : }

  00020	e49de004	 ldr         lr, [sp], #4
  00024	e12fff1e	 bx          lr
  00028		 |$LN7@DvfsConstr|
  00028		 |$LN8@DvfsConstr|
  00028	00000000	 DCD         |s_currentOpm|
  0002c		 |$M37988|

			 ENDP  ; |?DvfsConstraintCallback@@YAHPAXK0I@Z|, DvfsConstraintCallback

	EXPORT	|?SMARTREFLEX_InitPolicy@@YAPAXPBG@Z|	; SMARTREFLEX_InitPolicy
	EXPORT	|??_C@_1DI@KFGABDLO@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_19BINEIDCP@?$AAD?$AAV?$AAF?$AAS?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1KC@KJEOONBL@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAI?$AAn?$AAv?$AAa?$AAl?$AAi?$AAd?$AA?1@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EE@JFKJFJLC@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@| [ DATA ] ; `string'
	IMPORT	|MmMapIoSpace|
	IMPORT	|PmxRegisterConstraintCallback|
	IMPORT	|PmxSetConstraintById|
	IMPORT	|CreateThread|
	IMPORT	|CreateEventW|
	IMPORT	|GetDeviceRegistryParams|
	IMPORT	|memset|

  00000			 AREA	 |.pdata|, PDATA
|$T38013| DCD	|$LN12@SMARTREFLE|
	DCD	0x40006002

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DI@KFGABDLO@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "I", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, "P", 0x0, "o"
	DCB	0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, "(", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_19BINEIDCP@?$AAD?$AAV?$AAF?$AAS?$AA?$AA@| DCB "D", 0x0, "V", 0x0, "F"
	DCB	0x0, "S", 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1KC@KJEOONBL@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAI?$AAn?$AAv?$AAa?$AAl?$AAi?$AAd?$AA?1@| DCB "S"
	DCB	0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R", 0x0, "E"
	DCB	0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_", 0x0, "I"
	DCB	0x0, "n", 0x0, "i", 0x0, "t", 0x0, "P", 0x0, "o", 0x0, "l"
	DCB	0x0, "i", 0x0, "c", 0x0, "y", 0x0, ":", 0x0, " ", 0x0, "I"
	DCB	0x0, "n", 0x0, "v", 0x0, "a", 0x0, "l", 0x0, "i", 0x0, "d"
	DCB	0x0, "/", 0x0, "M", 0x0, "i", 0x0, "s", 0x0, "s", 0x0, "i"
	DCB	0x0, "n", 0x0, "g", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "g"
	DCB	0x0, "i", 0x0, "s", 0x0, "t", 0x0, "r", 0x0, "y", 0x0, " "
	DCB	0x0, "p", 0x0, "a", 0x0, "r", 0x0, "a", 0x0, "m", 0x0, "e"
	DCB	0x0, "t", 0x0, "e", 0x0, "r", 0x0, "s", 0x0, ".", 0x0, " "
	DCB	0x0, " ", 0x0, "U", 0x0, "n", 0x0, "l", 0x0, "o", 0x0, "a"
	DCB	0x0, "d", 0x0, "i", 0x0, "n", 0x0, "g", 0x0, " ", 0x0, "p"
	DCB	0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@JFKJFJLC@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@| DCB "+"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "I", 0x0, "n", 0x0, "i", 0x0, "t", 0x0, "P", 0x0, "o"
	DCB	0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, "(", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SMARTREFLEX_InitPolicy@@YAPAXPBG@Z| PROC ; SMARTREFLEX_InitPolicy

; 434  : {

  00000		 |$LN12@SMARTREFLE|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004	e24dd00c	 sub         sp, sp, #0xC
  00008		 |$M38010|
  00008	e1a05000	 mov         r5, r0

; 435  :     RETAILMSG(ZONE_FUNCTION, (
; 436  :       L"+SMARTREFLEX_InitPolicy(0x%08x)\r\n",
; 437  :       szContext
; 438  :       ));

  0000c	e59f6168	 ldr         r6, [pc, #0x168]
  00010	e5963440	 ldr         r3, [r6, #0x440]
  00014	e3130004	 tst         r3, #4
  00018	159f0158	 ldrne       r0, [pc, #0x158]
  0001c	11a01005	 movne       r1, r5
  00020	1b000000	 blne        NKDbgPrintfW

; 439  : 
; 440  :     PHYSICAL_ADDRESS PhysAddr;
; 441  :     DWORD dwInitOpm = CONSTRAINT_STATE_NULL;
; 442  : 
; 443  :     // initializt global structure
; 444  :     memset(&s_SmartReflexLoadPolicyInfo, 0, sizeof(SmartReflexPolicyInfo_t));

  00024	e59f4148	 ldr         r4, [pc, #0x148]
  00028	e3e03cff	 mvn         r3, #0xFF, 24
  0002c	e22330ff	 eor         r3, r3, #0xFF
  00030	e1a00004	 mov         r0, r4
  00034	e3a02034	 mov         r2, #0x34
  00038	e3a01000	 mov         r1, #0
  0003c	e58d3008	 str         r3, [sp, #8]
  00040	eb000000	 bl          memset

; 445  :     s_SmartReflexLoadPolicyInfo.dwActiveDevices = 0x1; //because LPR starts disabled

  00044	e3a03001	 mov         r3, #1

; 446  :     s_SmartReflexLoadPolicyInfo.bSmartReflexState = FALSE;

  00048	e3a02000	 mov         r2, #0
  0004c	e5843000	 str         r3, [r4]

; 447  :     s_SmartReflexLoadPolicyInfo.nSensingState = STATE_INACTIVE;
; 448  :     s_SmartReflexLoadPolicyInfo.bLprModeState = FALSE;
; 449  : 
; 450  :     // Read policy registry params
; 451  :     if (GetDeviceRegistryParams(
; 452  :         szContext, &s_SmartReflexLoadPolicyInfo, dimof(g_policyRegParams),
; 453  :         g_policyRegParams) != ERROR_SUCCESS)

  00050	e5842010	 str         r2, [r4, #0x10]
  00054	e3a02000	 mov         r2, #0
  00058	e5842014	 str         r2, [r4, #0x14]
  0005c	e59f310c	 ldr         r3, [pc, #0x10C]
  00060	e3a02000	 mov         r2, #0
  00064	e584202c	 str         r2, [r4, #0x2C]
  00068	e3a02003	 mov         r2, #3
  0006c	e1a01004	 mov         r1, r4
  00070	e1a00005	 mov         r0, r5
  00074	eb000000	 bl          GetDeviceRegistryParams
  00078	e3500000	 cmp         r0, #0

; 454  :         {
; 455  :         RETAILMSG(ZONE_ERROR, (L"SMARTREFLEX_InitPolicy: Invalid/Missing "
; 456  :             L"registry parameters.  Unloading policy\r\n")
; 457  :             );

  0007c	159f00e8	 ldrne       r0, [pc, #0xE8]
  00080	1b000000	 blne        NKDbgPrintfW

; 458  :         }
; 459  : 
; 460  :     //create DVFS change notification event
; 461  :     s_SmartReflexLoadPolicyInfo.hSmartReflexSensingEvent = CreateEvent(
; 462  :                                                                NULL,
; 463  :                                                                FALSE,
; 464  :                                                                FALSE,
; 465  :                                                                NULL
; 466  :                                                                );

  00084	e3a03000	 mov         r3, #0
  00088	e3a02000	 mov         r2, #0
  0008c	e3a01000	 mov         r1, #0
  00090	e3a00000	 mov         r0, #0
  00094	eb000000	 bl          CreateEventW

; 467  : 
; 468  :     //start retention optimization thread
; 469  :     s_SmartReflexLoadPolicyInfo.hSmartReflexSensingThread = CreateThread(
; 470  :                                                                    NULL,
; 471  :                                                                    0,
; 472  :                                                                    SmartReflexSensingThread,
; 473  :                                                                    NULL,
; 474  :                                                                    0,
; 475  :                                                                    NULL
; 476  :                                                                    );

  00098	e59f20c8	 ldr         r2, [pc, #0xC8]
  0009c	e1a03000	 mov         r3, r0
  000a0	e5843024	 str         r3, [r4, #0x24]
  000a4	e3a0e000	 mov         lr, #0
  000a8	e3a03000	 mov         r3, #0
  000ac	e3a00000	 mov         r0, #0
  000b0	e3a01000	 mov         r1, #0
  000b4	e58de004	 str         lr, [sp, #4]
  000b8	e58de000	 str         lr, [sp]
  000bc	eb000000	 bl          CreateThread
  000c0	e1a0e000	 mov         lr, r0

; 477  : 
; 478  :     // Obtain DVFS constraint handler
; 479  :     s_SmartReflexLoadPolicyInfo.hDvfsConstraint = PmxSetConstraintById(
; 480  :                                     CONSTRAINT_ID_DVFS,
; 481  :                                     CONSTRAINT_MSG_DVFS_REQUEST,
; 482  :                                     (void*)&dwInitOpm,
; 483  :                                     sizeof(DWORD)
; 484  :                                     );

  000c4	e59f0098	 ldr         r0, [pc, #0x98]
  000c8	e3a03004	 mov         r3, #4
  000cc	e28d2008	 add         r2, sp, #8
  000d0	e3a01001	 mov         r1, #1
  000d4	e584e028	 str         lr, [r4, #0x28]
  000d8	eb000000	 bl          PmxSetConstraintById

; 485  : 
; 486  :     // register for DVFS change notifications
; 487  :     s_SmartReflexLoadPolicyInfo.hDvfsCallback = PmxRegisterConstraintCallback(
; 488  :                                         s_SmartReflexLoadPolicyInfo.hDvfsConstraint,
; 489  :                                         DvfsConstraintCallback,
; 490  :                                         NULL,
; 491  :                                         0,
; 492  :                                         (HANDLE)&s_SmartReflexLoadPolicyInfo
; 493  :                                         );

  000dc	e59f107c	 ldr         r1, [pc, #0x7C]
  000e0	e1a0e000	 mov         lr, r0
  000e4	e3a03000	 mov         r3, #0
  000e8	e3a02000	 mov         r2, #0
  000ec	e584e01c	 str         lr, [r4, #0x1C]
  000f0	e58d4000	 str         r4, [sp]
  000f4	eb000000	 bl          PmxRegisterConstraintCallback
  000f8	e1a0e000	 mov         lr, r0

; 494  : 
; 495  :     //map vdd1 voltage register to virtual memory
; 496  :     PhysAddr.QuadPart = PRM_VP1_VOLTAGE;

  000fc	e59f0058	 ldr         r0, [pc, #0x58]
  00100	e3a01000	 mov         r1, #0

; 497  :     s_VddOptimizationInfo[0].pPrcmRegistryAddress = MmMapIoSpace(
; 498  :                                                         PhysAddr,
; 499  :                                                         sizeof(UINT32),
; 500  :                                                         FALSE
; 501  :                                                         );

  00104	e3a03000	 mov         r3, #0
  00108	e3a02004	 mov         r2, #4
  0010c	e584e020	 str         lr, [r4, #0x20]
  00110	eb000000	 bl          MmMapIoSpace
  00114	e1a0e000	 mov         lr, r0

; 502  : 
; 503  :     //map vdd2 voltage register to virtual memory
; 504  :     PhysAddr.QuadPart = PRM_VP2_VOLTAGE;

  00118	e59f0038	 ldr         r0, [pc, #0x38]
  0011c	e3a01000	 mov         r1, #0

; 505  :     s_VddOptimizationInfo[1].pPrcmRegistryAddress = MmMapIoSpace(
; 506  :                                                         PhysAddr,
; 507  :                                                         sizeof(UINT32),
; 508  :                                                         FALSE
; 509  :                                                         );

  00120	e3a03000	 mov         r3, #0
  00124	e3a02004	 mov         r2, #4
  00128	e584e040	 str         lr, [r4, #0x40]
  0012c	eb000000	 bl          MmMapIoSpace

; 510  : 
; 511  : 
; 512  :     RETAILMSG(ZONE_FUNCTION, (L"-SMARTREFLEX_InitPolicy()\r\n"));

  00130	e5963440	 ldr         r3, [r6, #0x440]
  00134	e5840048	 str         r0, [r4, #0x48]
  00138	e3130004	 tst         r3, #4
  0013c	159f0010	 ldrne       r0, [pc, #0x10]
  00140	1b000000	 blne        NKDbgPrintfW

; 513  :     return (HANDLE)&s_SmartReflexLoadPolicyInfo;
; 514  : }

  00144	e1a00004	 mov         r0, r4
  00148	e28dd00c	 add         sp, sp, #0xC
  0014c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00150	e12fff1e	 bx          lr
  00154		 |$LN13@SMARTREFLE|
  00154		 |$LN14@SMARTREFLE|
  00154	00000000	 DCD         |??_C@_1DI@KFGABDLO@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00158		 |$LN15@SMARTREFLE|
  00158	483072e0	 DCD         0x483072e0
  0015c		 |$LN16@SMARTREFLE|
  0015c	483072c0	 DCD         0x483072c0
  00160		 |$LN17@SMARTREFLE|
  00160	00000000	 DCD         |?DvfsConstraintCallback@@YAHPAXK0I@Z|
  00164		 |$LN18@SMARTREFLE|
  00164	00000000	 DCD         |??_C@_19BINEIDCP@?$AAD?$AAV?$AAF?$AAS?$AA?$AA@|
  00168		 |$LN19@SMARTREFLE|
  00168	00000000	 DCD         |?SmartReflexSensingThread@@YAKPAX@Z|
  0016c		 |$LN20@SMARTREFLE|
  0016c	00000000	 DCD         |??_C@_1KC@KJEOONBL@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAI?$AAn?$AAv?$AAa?$AAl?$AAi?$AAd?$AA?1@|
  00170		 |$LN21@SMARTREFLE|
  00170	00000000	 DCD         |g_policyRegParams|
  00174		 |$LN22@SMARTREFLE|
  00174	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  00178		 |$LN23@SMARTREFLE|
  00178	00000000	 DCD         |??_C@_1EE@JFKJFJLC@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAI?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@|
  0017c		 |$LN24@SMARTREFLE|
  0017c	00000000	 DCD         |dpCurSettings|
  00180		 |$M38011|

			 ENDP  ; |?SMARTREFLEX_InitPolicy@@YAPAXPBG@Z|, SMARTREFLEX_InitPolicy

	EXPORT	|?SMARTREFLEX_DeinitPolicy@@YAHPAX@Z|	; SMARTREFLEX_DeinitPolicy
	EXPORT	|??_C@_1DM@FLJKFFNF@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HM@EOFDEPCO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EI@HMOLPFDH@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	IMPORT	|CloseHandle|
	IMPORT	|PmxReleaseConstraint|
	IMPORT	|PmxUnregisterConstraintCallback|
	IMPORT	|MmUnmapIoSpace|
; File c:\wince600\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.pdata|, PDATA
|$T38046| DCD	|$LN16@SMARTREFLE@2|
	DCD	0x40003b01

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DM@FLJKFFNF@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "D", 0x0, "e", 0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t"
	DCB	0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y"
	DCB	0x0, "(", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HM@EOFDEPCO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "D", 0x0, "e", 0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t"
	DCB	0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y"
	DCB	0x0, ":", 0x0, "I", 0x0, "n", 0x0, "c", 0x0, "o", 0x0, "r"
	DCB	0x0, "r", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, " ", 0x0, "c"
	DCB	0x0, "o", 0x0, "n", 0x0, "t", 0x0, "e", 0x0, "x", 0x0, "t"
	DCB	0x0, " ", 0x0, "p", 0x0, "a", 0x0, "r", 0x0, "a", 0x0, "m"
	DCB	0x0, "e", 0x0, "t", 0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EI@HMOLPFDH@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "+"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "D", 0x0, "e", 0x0, "i", 0x0, "n", 0x0, "i", 0x0, "t"
	DCB	0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y"
	DCB	0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\omap3530\pm\policyadapters\smartreflex\smartreflexpolicy.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SMARTREFLEX_DeinitPolicy@@YAHPAX@Z| PROC ; SMARTREFLEX_DeinitPolicy

; 526  : {

  00000		 |$LN16@SMARTREFLE@2|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004		 |$M38043|
  00004	e1a05000	 mov         r5, r0

; 527  :     BOOL rc = FALSE;
; 528  : 
; 529  :     RETAILMSG(ZONE_FUNCTION, (
; 530  :       L"+SMARTREFLEX_DeinitPolicy(0x%08x)\r\n",
; 531  :       hPolicyAdapter
; 532  :       ));

  00008	e59f70d8	 ldr         r7, [pc, #0xD8]
  0000c	e3a06000	 mov         r6, #0
  00010	e5973440	 ldr         r3, [r7, #0x440]
  00014	e3130004	 tst         r3, #4
  00018	159f00c4	 ldrne       r0, [pc, #0xC4]
  0001c	11a01005	 movne       r1, r5
  00020	1b000000	 blne        NKDbgPrintfW

; 533  : 
; 534  :     // validate parameters
; 535  :     if (hPolicyAdapter != (HANDLE)&s_SmartReflexLoadPolicyInfo)

  00024	e59f40b4	 ldr         r4, [pc, #0xB4]
  00028	e1550004	 cmp         r5, r4
  0002c	0a000002	 beq         |$LN3@SMARTREFLE@2|

; 536  :         {
; 537  :         RETAILMSG (ZONE_ERROR, (L"ERROR: SMARTREFLEX_DeinitPolicy:"
; 538  :             L"Incorrect context parameter\r\n"
; 539  :             ));

  00030	e59f00a4	 ldr         r0, [pc, #0xA4]
  00034	eb000000	 bl          NKDbgPrintfW

; 540  :         goto cleanUp;

  00038	ea00001e	 b           |$cleanUp$37676|
  0003c		 |$LN3@SMARTREFLE@2|

; 541  :         }
; 542  : 
; 543  :     //unmap vdd1 voltage register to virtual memory
; 544  :     MmUnmapIoSpace(s_VddOptimizationInfo[0].pPrcmRegistryAddress,sizeof(UINT32));

  0003c	e5940040	 ldr         r0, [r4, #0x40]
  00040	e3a01004	 mov         r1, #4
  00044	eb000000	 bl          MmUnmapIoSpace

; 545  : 
; 546  :     //unmap vdd2 voltage register to virtual memory
; 547  :     MmUnmapIoSpace(s_VddOptimizationInfo[1].pPrcmRegistryAddress,sizeof(UINT32));

  00048	e5940048	 ldr         r0, [r4, #0x48]
  0004c	e3a01004	 mov         r1, #4
  00050	eb000000	 bl          MmUnmapIoSpace

; 548  : 
; 549  :     //unregisted DVFS change callback function
; 550  :     PmxUnregisterConstraintCallback(s_SmartReflexLoadPolicyInfo.hDvfsConstraint,
; 551  :                                     DvfsConstraintCallback
; 552  :                                     );

  00054	e59f107c	 ldr         r1, [pc, #0x7C]
  00058	e594001c	 ldr         r0, [r4, #0x1C]
  0005c	eb000000	 bl          PmxUnregisterConstraintCallback

; 553  : 
; 554  :     //release DVFS constraint handler
; 555  :     PmxReleaseConstraint(s_SmartReflexLoadPolicyInfo.hDvfsConstraint);

  00060	e594001c	 ldr         r0, [r4, #0x1C]
  00064	eb000000	 bl          PmxReleaseConstraint

; 556  : 
; 557  :     //stop thread gracefuly
; 558  :     if (s_SmartReflexLoadPolicyInfo.hSmartReflexSensingThread != NULL)

  00068	e5943028	 ldr         r3, [r4, #0x28]
  0006c	e3530000	 cmp         r3, #0
  00070	0a000009	 beq         |$LN1@SMARTREFLE@2|

; 559  :         {
; 560  :         s_SmartReflexLoadPolicyInfo.bExitThread = TRUE;

  00074	e3a03001	 mov         r3, #1
  00078	e5843018	 str         r3, [r4, #0x18]

; 561  :         SetEvent(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingEvent);

  0007c	e5940024	 ldr         r0, [r4, #0x24]
  00080	e3a01003	 mov         r1, #3
  00084	eb000000	 bl          EventModify

; 562  :         WaitForSingleObject(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingThread, INFINITE);

  00088	e5940028	 ldr         r0, [r4, #0x28]
  0008c	e3e01000	 mvn         r1, #0
  00090	eb000000	 bl          WaitForSingleObject

; 563  :         CloseHandle(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingThread);

  00094	e5940028	 ldr         r0, [r4, #0x28]
  00098	eb000000	 bl          CloseHandle
  0009c		 |$LN1@SMARTREFLE@2|

; 564  :         }
; 565  : 
; 566  :     //close sync event hanle
; 567  :     CloseHandle(s_SmartReflexLoadPolicyInfo.hSmartReflexSensingEvent);

  0009c	e5940024	 ldr         r0, [r4, #0x24]
  000a0	eb000000	 bl          CloseHandle

; 568  : 
; 569  :     // clear main policy structure
; 570  :     memset(&s_SmartReflexLoadPolicyInfo, 0, sizeof(SmartReflexPolicyInfo_t));

  000a4	e3a02034	 mov         r2, #0x34
  000a8	e3a01000	 mov         r1, #0
  000ac	e1a00004	 mov         r0, r4
  000b0	eb000000	 bl          memset

; 571  : 
; 572  :     rc = TRUE;

  000b4	e3a06001	 mov         r6, #1
  000b8		 |$cleanUp$37676|

; 573  : 
; 574  : cleanUp:
; 575  :     RETAILMSG(ZONE_FUNCTION, (L"-SMARTREFLEX_DeinitPolicy()\r\n"));

  000b8	e5973440	 ldr         r3, [r7, #0x440]
  000bc	e3130004	 tst         r3, #4
  000c0	159f000c	 ldrne       r0, [pc, #0xC]
  000c4	1b000000	 blne        NKDbgPrintfW

; 576  :     return rc;
; 577  : }

  000c8	e1a00006	 mov         r0, r6
  000cc	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  000d0	e12fff1e	 bx          lr
  000d4		 |$LN17@SMARTREFLE@2|
  000d4		 |$LN18@SMARTREFLE@2|
  000d4	00000000	 DCD         |??_C@_1DM@FLJKFFNF@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  000d8		 |$LN19@SMARTREFLE@2|
  000d8	00000000	 DCD         |?DvfsConstraintCallback@@YAHPAXK0I@Z|
  000dc		 |$LN20@SMARTREFLE@2|
  000dc	00000000	 DCD         |??_C@_1HM@EOFDEPCO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@|
  000e0		 |$LN21@SMARTREFLE@2|
  000e0	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  000e4		 |$LN22@SMARTREFLE@2|
  000e4	00000000	 DCD         |??_C@_1EI@HMOLPFDH@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAD?$AAe?$AAi?$AAn?$AAi?$AAt?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  000e8		 |$LN23@SMARTREFLE@2|
  000e8	00000000	 DCD         |dpCurSettings|
  000ec		 |$M38044|

			 ENDP  ; |?SMARTREFLEX_DeinitPolicy@@YAHPAX@Z|, SMARTREFLEX_DeinitPolicy

	EXPORT	|?SMARTREFLEX_OpenPolicy@@YAPAXPAX@Z|	; SMARTREFLEX_OpenPolicy
	EXPORT	|??_C@_1DI@DEIOFKBG@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IM@DJEKKHLG@?$AAW?$AAA?$AAR?$AAN?$AAI?$AAN?$AAG?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HI@BOGPJPFG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AAI?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EE@LCJDNHIB@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@| [ DATA ] ; `string'
	IMPORT	|LocalAlloc|

  00000			 AREA	 |.pdata|, PDATA
|$T38074| DCD	|$LN18@SMARTREFLE@3|
	DCD	0x40002b01

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DI@DEIOFKBG@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "O", 0x0, "p", 0x0, "e", 0x0, "n", 0x0, "P", 0x0, "o"
	DCB	0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, "(", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IM@DJEKKHLG@?$AAW?$AAA?$AAR?$AAN?$AAI?$AAN?$AAG?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@| DCB "W"
	DCB	0x0, "A", 0x0, "R", 0x0, "N", 0x0, "I", 0x0, "N", 0x0, "G"
	DCB	0x0, ":", 0x0, " ", 0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R"
	DCB	0x0, "T", 0x0, "R", 0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E"
	DCB	0x0, "X", 0x0, "_", 0x0, "O", 0x0, "p", 0x0, "e", 0x0, "n"
	DCB	0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y"
	DCB	0x0, ":", 0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c"
	DCB	0x0, "y", 0x0, " ", 0x0, "r", 0x0, "e", 0x0, "s", 0x0, "o"
	DCB	0x0, "u", 0x0, "r", 0x0, "c", 0x0, "e", 0x0, "s", 0x0, " "
	DCB	0x0, "a", 0x0, "l", 0x0, "l", 0x0, "o", 0x0, "c", 0x0, "a"
	DCB	0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, " ", 0x0, "f"
	DCB	0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, "!"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HI@BOGPJPFG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AAI?$AAn@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "O", 0x0, "p", 0x0, "e", 0x0, "n", 0x0, "P", 0x0, "o"
	DCB	0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, ":", 0x0, "I"
	DCB	0x0, "n", 0x0, "c", 0x0, "o", 0x0, "r", 0x0, "r", 0x0, "e"
	DCB	0x0, "c", 0x0, "t", 0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n"
	DCB	0x0, "t", 0x0, "e", 0x0, "x", 0x0, "t", 0x0, " ", 0x0, "p"
	DCB	0x0, "a", 0x0, "r", 0x0, "a", 0x0, "m", 0x0, "e", 0x0, "t"
	DCB	0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@LCJDNHIB@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@| DCB "+"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "O", 0x0, "p", 0x0, "e", 0x0, "n", 0x0, "P", 0x0, "o"
	DCB	0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, "(", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SMARTREFLEX_OpenPolicy@@YAPAXPAX@Z| PROC ; SMARTREFLEX_OpenPolicy

; 591  : {

  00000		 |$LN18@SMARTREFLE@3|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M38071|
  00004	e1a04000	 mov         r4, r0

; 592  :     HANDLE                  rc = NULL;
; 593  :     SmartReflexPolicyContext_t    *pContext;
; 594  : 
; 595  :     RETAILMSG(ZONE_FUNCTION, (
; 596  :       L"+SMARTREFLEX_OpenPolicy(0x%08x)\r\n",
; 597  :       hPolicyAdapter
; 598  :       ));

  00008	e59f6098	 ldr         r6, [pc, #0x98]
  0000c	e3a05000	 mov         r5, #0
  00010	e5963440	 ldr         r3, [r6, #0x440]
  00014	e3130004	 tst         r3, #4
  00018	159f0084	 ldrne       r0, [pc, #0x84]
  0001c	11a01004	 movne       r1, r4
  00020	1b000000	 blne        NKDbgPrintfW

; 599  : 
; 600  :     // validate parameters
; 601  :     if (hPolicyAdapter != (HANDLE)&s_SmartReflexLoadPolicyInfo)

  00024	e59f3074	 ldr         r3, [pc, #0x74]
  00028	e1540003	 cmp         r4, r3
  0002c	0a000002	 beq         |$LN4@SMARTREFLE@3|

; 602  :         {
; 603  :         RETAILMSG (ZONE_ERROR, (L"ERROR: SMARTREFLEX_OpenPolicy:"
; 604  :             L"Incorrect context parameter\r\n"
; 605  :             ));

  00030	e59f0064	 ldr         r0, [pc, #0x64]

; 612  :         {
; 613  :         RETAILMSG (ZONE_WARN, (L"WARNING: SMARTREFLEX_OpenPolicy:"
; 614  :             L"Policy resources allocation failed!\r\n"
; 615  :             ));

  00034	eb000000	 bl          NKDbgPrintfW

; 624  : 
; 625  : cleanUp:

  00038	ea00000d	 b           |$cleanUp$37692|
  0003c		 |$LN4@SMARTREFLE@3|

; 606  :         goto cleanUp;
; 607  :         }
; 608  : 
; 609  :     // Create a policy context handle and return handle
; 610  :     pContext = (SmartReflexPolicyContext_t*)LocalAlloc(LPTR, sizeof(SmartReflexPolicyContext_t));

  0003c	e3a01004	 mov         r1, #4
  00040	e3a00040	 mov         r0, #0x40
  00044	eb000000	 bl          LocalAlloc
  00048	e3500000	 cmp         r0, #0

; 611  :     if (pContext == NULL)

  0004c	1a000005	 bne         |$LN2@SMARTREFLE@3|
  00050	e5963440	 ldr         r3, [r6, #0x440]

; 612  :         {
; 613  :         RETAILMSG (ZONE_WARN, (L"WARNING: SMARTREFLEX_OpenPolicy:"
; 614  :             L"Policy resources allocation failed!\r\n"
; 615  :             ));

  00054	e3130002	 tst         r3, #2
  00058	0a000005	 beq         |$cleanUp$37692|
  0005c	e59f0034	 ldr         r0, [pc, #0x34]
  00060	eb000000	 bl          NKDbgPrintfW

; 624  : 
; 625  : cleanUp:

  00064	ea000002	 b           |$cleanUp$37692|
  00068		 |$LN2@SMARTREFLE@3|

; 616  :         goto cleanUp;
; 617  :         }
; 618  : 
; 619  :     // initialize variables
; 620  :     pContext->cookie = POLICY_CONTEXT_COOKIE;

  00068	e59f3024	 ldr         r3, [pc, #0x24]

; 621  : 
; 622  :     // add to list of collection
; 623  :     rc = (HANDLE)pContext;

  0006c	e1a05000	 mov         r5, r0
  00070	e5803000	 str         r3, [r0]
  00074		 |$cleanUp$37692|
  00074	e5963440	 ldr         r3, [r6, #0x440]

; 626  :     RETAILMSG(ZONE_FUNCTION, (L"-SMARTREFLEX_OpenPolicy()\r\n"));

  00078	e3130004	 tst         r3, #4
  0007c	159f000c	 ldrne       r0, [pc, #0xC]
  00080	1b000000	 blne        NKDbgPrintfW

; 627  :     return rc;
; 628  : }

  00084	e1a00005	 mov         r0, r5
  00088	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  0008c	e12fff1e	 bx          lr
  00090		 |$LN19@SMARTREFLE@3|
  00090		 |$LN20@SMARTREFLE@3|
  00090	00000000	 DCD         |??_C@_1DI@DEIOFKBG@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00094		 |$LN21@SMARTREFLE@3|
  00094	73747278	 DCD         0x73747278
  00098		 |$LN22@SMARTREFLE@3|
  00098	00000000	 DCD         |??_C@_1IM@DJEKKHLG@?$AAW?$AAA?$AAR?$AAN?$AAI?$AAN?$AAG?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@|
  0009c		 |$LN23@SMARTREFLE@3|
  0009c	00000000	 DCD         |??_C@_1HI@BOGPJPFG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AAI?$AAn@|
  000a0		 |$LN24@SMARTREFLE@3|
  000a0	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  000a4		 |$LN25@SMARTREFLE@3|
  000a4	00000000	 DCD         |??_C@_1EE@LCJDNHIB@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN@|
  000a8		 |$LN26@SMARTREFLE@3|
  000a8	00000000	 DCD         |dpCurSettings|
  000ac		 |$M38072|

			 ENDP  ; |?SMARTREFLEX_OpenPolicy@@YAPAXPAX@Z|, SMARTREFLEX_OpenPolicy

	EXPORT	|?SMARTREFLEX_ClosePolicy@@YAHPAXIII@Z|	; SMARTREFLEX_ClosePolicy
	EXPORT	|??_C@_1HK@GDIPKJIG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AAI@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DK@FIAGOGJH@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GM@DPKGEGNM@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0@| [ DATA ] ; `string'
	IMPORT	|LocalFree|

  00000			 AREA	 |.pdata|, PDATA
|$T38101| DCD	|$LN13@SMARTREFLE@4|
	DCD	0x40002602

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HK@GDIPKJIG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AAI@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "C", 0x0, "l", 0x0, "o", 0x0, "s", 0x0, "e", 0x0, "P"
	DCB	0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, ":"
	DCB	0x0, "I", 0x0, "n", 0x0, "c", 0x0, "o", 0x0, "r", 0x0, "r"
	DCB	0x0, "e", 0x0, "c", 0x0, "t", 0x0, " ", 0x0, "c", 0x0, "o"
	DCB	0x0, "n", 0x0, "t", 0x0, "e", 0x0, "x", 0x0, "t", 0x0, " "
	DCB	0x0, "p", 0x0, "a", 0x0, "r", 0x0, "a", 0x0, "m", 0x0, "e"
	DCB	0x0, "t", 0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DK@FIAGOGJH@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "C", 0x0, "l", 0x0, "o", 0x0, "s", 0x0, "e", 0x0, "P"
	DCB	0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, "("
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GM@DPKGEGNM@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0@| DCB "+"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "C", 0x0, "l", 0x0, "o", 0x0, "s", 0x0, "e", 0x0, "P"
	DCB	0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, "("
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ",", 0x0, "0", 0x0, "x", 0x0, "d", 0x0, ",", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "2", 0x0, "x", 0x0, ","
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "2", 0x0, "x"
	DCB	0x0, " ", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SMARTREFLEX_ClosePolicy@@YAHPAXIII@Z| PROC ; SMARTREFLEX_ClosePolicy

; 643  : {

  00000		 |$LN13@SMARTREFLE@4|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M38098|
  00008	e1a06003	 mov         r6, r3
  0000c	e1a04000	 mov         r4, r0

; 644  :     SmartReflexPolicyContext_t  *pContext = (SmartReflexPolicyContext_t*)hPolicyContext;
; 645  : 
; 646  : 	UNREFERENCED_PARAMETER(dev);
; 647  : 	UNREFERENCED_PARAMETER(oldState);
; 648  : 	UNREFERENCED_PARAMETER(newState);
; 649  : 
; 650  :     RETAILMSG(ZONE_FUNCTION, (
; 651  :       L"+SMARTREFLEX_ClosePolicy(0x%08x,0xd,0x%02x,0x%02x )\r\n",
; 652  :       hPolicyContext,
; 653  :       dev,
; 654  :       oldState,
; 655  :       newState
; 656  :       ));

  00010	e59f507c	 ldr         r5, [pc, #0x7C]
  00014	e595e440	 ldr         lr, [r5, #0x440]
  00018	e31e0004	 tst         lr, #4
  0001c	159f006c	 ldrne       r0, [pc, #0x6C]
  00020	11a03002	 movne       r3, r2
  00024	11a02001	 movne       r2, r1
  00028	11a01004	 movne       r1, r4
  0002c	158d6000	 strne       r6, [sp]
  00030	1b000000	 blne        NKDbgPrintfW

; 657  : 
; 658  :     // validate parameters
; 659  :     if (pContext == NULL || pContext->cookie != POLICY_CONTEXT_COOKIE)

  00034	e3540000	 cmp         r4, #0
  00038	0a00000b	 beq         |$LN1@SMARTREFLE@4|
  0003c	e5942000	 ldr         r2, [r4]
  00040	e59f3044	 ldr         r3, [pc, #0x44]
  00044	e1520003	 cmp         r2, r3
  00048	1a000007	 bne         |$LN1@SMARTREFLE@4|

; 665  :         }
; 666  : 
; 667  :     // free resources
; 668  :     LocalFree(pContext);

  0004c	e1a00004	 mov         r0, r4
  00050	eb000000	 bl          LocalFree

; 669  : 
; 670  :     RETAILMSG(ZONE_FUNCTION, (L"-SMARTREFLEX_ClosePolicy()\r\n"));

  00054	e5953440	 ldr         r3, [r5, #0x440]
  00058	e3130004	 tst         r3, #4
  0005c	159f0024	 ldrne       r0, [pc, #0x24]
  00060	1b000000	 blne        NKDbgPrintfW

; 671  :     return TRUE;

  00064	e3a00001	 mov         r0, #1
  00068	ea000002	 b           |$LN3@SMARTREFLE@4|
  0006c		 |$LN1@SMARTREFLE@4|

; 660  :         {
; 661  :         RETAILMSG (ZONE_ERROR, (L"ERROR: SMARTREFLEX_ClosePolicy:"
; 662  :             L"Incorrect context parameter\r\n"
; 663  :             ));

  0006c	e59f0010	 ldr         r0, [pc, #0x10]
  00070	eb000000	 bl          NKDbgPrintfW

; 664  :         return FALSE;

  00074	e3a00000	 mov         r0, #0
  00078		 |$LN3@SMARTREFLE@4|

; 672  : }

  00078	e28dd004	 add         sp, sp, #4
  0007c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00080	e12fff1e	 bx          lr
  00084		 |$LN14@SMARTREFLE@4|
  00084		 |$LN15@SMARTREFLE@4|
  00084	00000000	 DCD         |??_C@_1HK@GDIPKJIG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AAI@|
  00088		 |$LN16@SMARTREFLE@4|
  00088	00000000	 DCD         |??_C@_1DK@FIAGOGJH@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  0008c		 |$LN17@SMARTREFLE@4|
  0008c	73747278	 DCD         0x73747278
  00090		 |$LN18@SMARTREFLE@4|
  00090	00000000	 DCD         |??_C@_1GM@DPKGEGNM@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0@|
  00094		 |$LN19@SMARTREFLE@4|
  00094	00000000	 DCD         |dpCurSettings|
  00098		 |$M38099|

			 ENDP  ; |?SMARTREFLEX_ClosePolicy@@YAHPAXIII@Z|, SMARTREFLEX_ClosePolicy

	EXPORT	|?SMARTREFLEX_NotifyPolicy@@YAHPAXK0I@Z| ; SMARTREFLEX_NotifyPolicy
	EXPORT	|??_C@_1DM@JIGOCN@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HM@BKMHFMGB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FC@FLMJLJFL@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAL?$AAP?$AAR?$AA?5?$AAm?$AAo@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FA@HBLKMNLH@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAL?$AAP?$AAR?$AA?5?$AAm?$AAo@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IG@ELLJNDN@?$AAW?$AAA?$AAR?$AAN?$AAI?$AAN?$AAG?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GM@EACNBHGG@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	IMPORT	|PmxUpdateConstraint|

  00000			 AREA	 |.bss|, NOINIT
|?pEnable@?1??SMARTREFLEX_NotifyPolicy@@YAHPAXK0I@Z@4PAHA| % 0x4 ; `SMARTREFLEX_NotifyPolicy'::`2'::pEnable

  00000			 AREA	 |.pdata|, PDATA
|$T38135| DCD	|$LN31@SMARTREFLE@5|
	DCD	0x40006602

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DM@JIGOCN@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "N", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "y"
	DCB	0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y"
	DCB	0x0, "(", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HM@BKMHFMGB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "N", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "y"
	DCB	0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y"
	DCB	0x0, ":", 0x0, "I", 0x0, "n", 0x0, "c", 0x0, "o", 0x0, "r"
	DCB	0x0, "r", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, " ", 0x0, "c"
	DCB	0x0, "o", 0x0, "n", 0x0, "t", 0x0, "e", 0x0, "x", 0x0, "t"
	DCB	0x0, " ", 0x0, "p", 0x0, "a", 0x0, "r", 0x0, "a", 0x0, "m"
	DCB	0x0, "e", 0x0, "t", 0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FC@FLMJLJFL@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAL?$AAP?$AAR?$AA?5?$AAm?$AAo@| DCB "S"
	DCB	0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R", 0x0, "E"
	DCB	0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_", 0x0, "N"
	DCB	0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "y", 0x0, "P"
	DCB	0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, ":"
	DCB	0x0, " ", 0x0, "L", 0x0, "P", 0x0, "R", 0x0, " ", 0x0, "m"
	DCB	0x0, "o", 0x0, "d", 0x0, "e", 0x0, " ", 0x0, "O", 0x0, "F"
	DCB	0x0, "F", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FA@HBLKMNLH@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAL?$AAP?$AAR?$AA?5?$AAm?$AAo@| DCB "S"
	DCB	0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R", 0x0, "E"
	DCB	0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_", 0x0, "N"
	DCB	0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "y", 0x0, "P"
	DCB	0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, ":"
	DCB	0x0, " ", 0x0, "L", 0x0, "P", 0x0, "R", 0x0, " ", 0x0, "m"
	DCB	0x0, "o", 0x0, "d", 0x0, "e", 0x0, " ", 0x0, "O", 0x0, "N"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IG@ELLJNDN@?$AAW?$AAA?$AAR?$AAN?$AAI?$AAN?$AAG?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc@| DCB "W"
	DCB	0x0, "A", 0x0, "R", 0x0, "N", 0x0, "I", 0x0, "N", 0x0, "G"
	DCB	0x0, ":", 0x0, " ", 0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R"
	DCB	0x0, "T", 0x0, "R", 0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E"
	DCB	0x0, "X", 0x0, "_", 0x0, "N", 0x0, "o", 0x0, "t", 0x0, "i"
	DCB	0x0, "f", 0x0, "y", 0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i"
	DCB	0x0, "c", 0x0, "y", 0x0, ":", 0x0, "I", 0x0, "n", 0x0, "c"
	DCB	0x0, "o", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "c", 0x0, "t"
	DCB	0x0, " ", 0x0, "i", 0x0, "n", 0x0, "p", 0x0, "u", 0x0, "t"
	DCB	0x0, " ", 0x0, "b", 0x0, "u", 0x0, "f", 0x0, "f", 0x0, "e"
	DCB	0x0, "r", 0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n", 0x0, "t"
	DCB	0x0, "e", 0x0, "x", 0x0, "t", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GM@EACNBHGG@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "+"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "N", 0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "y"
	DCB	0x0, "P", 0x0, "o", 0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y"
	DCB	0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ",", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, ",", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SMARTREFLEX_NotifyPolicy@@YAHPAXK0I@Z| PROC ; SMARTREFLEX_NotifyPolicy

; 688  : {

  00000		 |$LN31@SMARTREFLE@5|
  00000	e92d47f0	 stmdb       sp!, {r4 - r10, lr}
  00004	e24dd008	 sub         sp, sp, #8
  00008		 |$M38132|
  00008	e1a0a003	 mov         r10, r3
  0000c	e1a05002	 mov         r5, r2
  00010	e1a08001	 mov         r8, r1
  00014	e1a07000	 mov         r7, r0

; 689  :     BOOL rc = FALSE;
; 690  :     static BOOL * pEnable = NULL;
; 691  :     DWORD       dwOpm;
; 692  :     SmartReflexPolicyContext_t    *pContext = (SmartReflexPolicyContext_t*)hPolicyContext;
; 693  :     pEnable = (BOOL*)pParam;
; 694  : 
; 695  : 	UNREFERENCED_PARAMETER(size);
; 696  : 
; 697  :     RETAILMSG(ZONE_FUNCTION, (
; 698  :         L"+SMARTREFLEX_NotifyPolicy(0x%08x,0x%08x,0x%08x,%d )\r\n",
; 699  :         hPolicyContext,
; 700  :         msg,
; 701  :         pParam,
; 702  :         size
; 703  :         ));

  00018	e59f4174	 ldr         r4, [pc, #0x174]
  0001c	e59f916c	 ldr         r9, [pc, #0x16C]
  00020	e3a06000	 mov         r6, #0
  00024	e594e440	 ldr         lr, [r4, #0x440]
  00028	e5895000	 str         r5, [r9]
  0002c	e31e0004	 tst         lr, #4
  00030	0a000006	 beq         |$LN15@SMARTREFLE@5|
  00034	e59f0150	 ldr         r0, [pc, #0x150]
  00038	e1a03005	 mov         r3, r5
  0003c	e1a02008	 mov         r2, r8
  00040	e1a01007	 mov         r1, r7
  00044	e58da000	 str         r10, [sp]
  00048	eb000000	 bl          NKDbgPrintfW
  0004c	e5995000	 ldr         r5, [r9]
  00050		 |$LN15@SMARTREFLE@5|

; 704  : 
; 705  :     // validate parameters
; 706  :     if (pContext == NULL || pContext->cookie != POLICY_CONTEXT_COOKIE)

  00050	e3570000	 cmp         r7, #0
  00054	0a00003b	 beq         |$LN11@SMARTREFLE@5|
  00058	e5972000	 ldr         r2, [r7]
  0005c	e59f3124	 ldr         r3, [pc, #0x124]
  00060	e1520003	 cmp         r2, r3
  00064	1a000037	 bne         |$LN11@SMARTREFLE@5|

; 711  :         goto cleanUp;
; 712  :         }
; 713  : 
; 714  :     if (pEnable == NULL)

  00068	e3550000	 cmp         r5, #0
  0006c	1a000004	 bne         |$LN9@SMARTREFLE@5|
  00070	e5943440	 ldr         r3, [r4, #0x440]

; 715  :         {
; 716  :         RETAILMSG (ZONE_WARN, (L"WARNING: SMARTREFLEX_NotifyPolicy:"
; 717  :             L"Incorrect input buffer context\r\n"
; 718  :             ));

  00074	e3130002	 tst         r3, #2
  00078	0a000034	 beq         |$cleanUp$37731|
  0007c	e59f0100	 ldr         r0, [pc, #0x100]

; 774  : 
; 775  : cleanUp:

  00080	ea000031	 b           |$LN27@SMARTREFLE@5|
  00084		 |$LN9@SMARTREFLE@5|
  00084	e3a03106	 mov         r3, #6, 2
  00088	e3833801	 orr         r3, r3, #1, 16
  0008c	e1580003	 cmp         r8, r3
  00090	1a00002a	 bne         |$LN1@SMARTREFLE@5|
  00094	e5953000	 ldr         r3, [r5]
  00098	e59f50e0	 ldr         r5, [pc, #0xE0]
  0009c	e3530000	 cmp         r3, #0
  000a0	e595302c	 ldr         r3, [r5, #0x2C]
  000a4	0a000012	 beq         |$LN4@SMARTREFLE@5|

; 719  :         goto cleanUp;
; 720  :         }
; 721  : 
; 722  :     switch (msg)
; 723  :         {
; 724  :         case SMARTREFLEX_LPR_MODE:
; 725  :             if (*pEnable)
; 726  :                 {
; 727  : 
; 728  :                 if (s_SmartReflexLoadPolicyInfo.bLprModeState == FALSE)

  000a8	e3530000	 cmp         r3, #0
  000ac	1a000023	 bne         |$LN1@SMARTREFLE@5|
  000b0	e5943440	 ldr         r3, [r4, #0x440]

; 729  :                     {
; 730  :                     RETAILMSG(ZONE_INFO, (L"SMARTREFLEX_NotifyPolicy: LPR mode ON\r\n"));

  000b4	e3130008	 tst         r3, #8
  000b8	159f00bc	 ldrne       r0, [pc, #0xBC]
  000bc	1b000000	 blne        NKDbgPrintfW
  000c0	e3e03cff	 mvn         r3, #0xFF, 24

; 731  : 
; 732  :                     //  Enabling LPR, so drop DVFS constraint
; 733  :                     dwOpm = CONSTRAINT_STATE_NULL;
; 734  : 
; 735  :                     PmxUpdateConstraint(
; 736  :                         s_SmartReflexLoadPolicyInfo.hDvfsConstraint,
; 737  :                         CONSTRAINT_MSG_DVFS_REQUEST,
; 738  :                         (void*)&dwOpm,
; 739  :                         sizeof(DWORD)
; 740  :                         );

  000c4	e595001c	 ldr         r0, [r5, #0x1C]
  000c8	e22330ff	 eor         r3, r3, #0xFF
  000cc	e58d3004	 str         r3, [sp, #4]
  000d0	e3a03004	 mov         r3, #4
  000d4	e28d2004	 add         r2, sp, #4
  000d8	e3a01001	 mov         r1, #1
  000dc	eb000000	 bl          PmxUpdateConstraint

; 741  : 
; 742  :                     //  Update SmartReflex
; 743  :                     s_SmartReflexLoadPolicyInfo.bLprModeState = TRUE;

  000e0	e3a03001	 mov         r3, #1
  000e4	e585302c	 str         r3, [r5, #0x2C]

; 744  :                     s_SmartReflexLoadPolicyInfo.dwActiveDevices--;

  000e8	e5953000	 ldr         r3, [r5]
  000ec	e2433001	 sub         r3, r3, #1

; 745  :                     UpdateSmartReflex();
; 746  :                     }
; 747  :                 }
; 748  :             else

  000f0	ea000010	 b           |$LN28@SMARTREFLE@5|
  000f4		 |$LN4@SMARTREFLE@5|

; 749  :                 {
; 750  :                 if (s_SmartReflexLoadPolicyInfo.bLprModeState == TRUE)

  000f4	e3530001	 cmp         r3, #1
  000f8	1a000010	 bne         |$LN1@SMARTREFLE@5|
  000fc	e5943440	 ldr         r3, [r4, #0x440]

; 751  :                     {
; 752  :                     RETAILMSG(ZONE_INFO, (L"SMARTREFLEX_NotifyPolicy: LPR mode OFF\r\n"));

  00100	e3130008	 tst         r3, #8
  00104	159f006c	 ldrne       r0, [pc, #0x6C]
  00108	1b000000	 blne        NKDbgPrintfW

; 753  : 
; 754  :                     //  Disabling LPR, so set DVFS constraint for minimum memory bandwidth
; 755  :                     dwOpm = s_SmartReflexLoadPolicyInfo.dwLprOffOpm;

  0010c	e5952030	 ldr         r2, [r5, #0x30]

; 756  : 
; 757  :                     PmxUpdateConstraint(
; 758  :                         s_SmartReflexLoadPolicyInfo.hDvfsConstraint,
; 759  :                         CONSTRAINT_MSG_DVFS_REQUEST,
; 760  :                         (void*)&dwOpm,
; 761  :                         sizeof(DWORD)
; 762  :                         );

  00110	e595001c	 ldr         r0, [r5, #0x1C]
  00114	e3a03004	 mov         r3, #4
  00118	e58d2004	 str         r2, [sp, #4]
  0011c	e28d2004	 add         r2, sp, #4
  00120	e3a01001	 mov         r1, #1
  00124	eb000000	 bl          PmxUpdateConstraint

; 763  : 
; 764  :                     //  Update SmartReflex
; 765  :                     s_SmartReflexLoadPolicyInfo.bLprModeState = FALSE;

  00128	e3a03000	 mov         r3, #0
  0012c	e585302c	 str         r3, [r5, #0x2C]

; 766  :                     s_SmartReflexLoadPolicyInfo.dwActiveDevices++;

  00130	e5953000	 ldr         r3, [r5]
  00134	e2833001	 add         r3, r3, #1
  00138		 |$LN28@SMARTREFLE@5|
  00138	e5853000	 str         r3, [r5]

; 767  :                     UpdateSmartReflex();

  0013c	eb000000	 bl          |?UpdateSmartReflex@@YAXXZ|
  00140		 |$LN1@SMARTREFLE@5|

; 768  :                     }
; 769  :                 }
; 770  :             break;
; 771  :         }
; 772  :     // exit routine
; 773  :     rc = TRUE;

  00140	e3a06001	 mov         r6, #1
  00144	ea000001	 b           |$cleanUp$37731|
  00148		 |$LN11@SMARTREFLE@5|

; 707  :         {
; 708  :         RETAILMSG (ZONE_ERROR, (L"ERROR: SMARTREFLEX_NotifyPolicy:"
; 709  :             L"Incorrect context parameter\r\n"
; 710  :             ));

  00148	e59f0024	 ldr         r0, [pc, #0x24]
  0014c		 |$LN27@SMARTREFLE@5|
  0014c	eb000000	 bl          NKDbgPrintfW
  00150		 |$cleanUp$37731|
  00150	e5943440	 ldr         r3, [r4, #0x440]

; 776  :     RETAILMSG(ZONE_FUNCTION, (L"-SMARTREFLEX_NotifyPolicy()\r\n"));

  00154	e3130004	 tst         r3, #4
  00158	159f0010	 ldrne       r0, [pc, #0x10]
  0015c	1b000000	 blne        NKDbgPrintfW

; 777  :     return rc;
; 778  : }

  00160	e1a00006	 mov         r0, r6
  00164	e28dd008	 add         sp, sp, #8
  00168	e8bd47f0	 ldmia       sp!, {r4 - r10, lr}
  0016c	e12fff1e	 bx          lr
  00170		 |$LN32@SMARTREFLE@5|
  00170		 |$LN33@SMARTREFLE@5|
  00170	00000000	 DCD         |??_C@_1DM@JIGOCN@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00174		 |$LN34@SMARTREFLE@5|
  00174	00000000	 DCD         |??_C@_1HM@BKMHFMGB@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3@|
  00178		 |$LN35@SMARTREFLE@5|
  00178	00000000	 DCD         |??_C@_1FC@FLMJLJFL@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAL?$AAP?$AAR?$AA?5?$AAm?$AAo@|
  0017c		 |$LN36@SMARTREFLE@5|
  0017c	00000000	 DCD         |??_C@_1FA@HBLKMNLH@?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAL?$AAP?$AAR?$AA?5?$AAm?$AAo@|
  00180		 |$LN37@SMARTREFLE@5|
  00180	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  00184		 |$LN38@SMARTREFLE@5|
  00184	00000000	 DCD         |??_C@_1IG@ELLJNDN@?$AAW?$AAA?$AAR?$AAN?$AAI?$AAN?$AAG?$AA?3?$AA?5?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc@|
  00188		 |$LN39@SMARTREFLE@5|
  00188	73747278	 DCD         0x73747278
  0018c		 |$LN40@SMARTREFLE@5|
  0018c	00000000	 DCD         |??_C@_1GM@EACNBHGG@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAN?$AAo?$AAt?$AAi?$AAf?$AAy?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  00190		 |$LN41@SMARTREFLE@5|
  00190	00000000	 DCD         |?pEnable@?1??SMARTREFLEX_NotifyPolicy@@YAHPAXK0I@Z@4PAHA|
  00194		 |$LN42@SMARTREFLE@5|
  00194	00000000	 DCD         |dpCurSettings|
  00198		 |$M38133|

			 ENDP  ; |?SMARTREFLEX_NotifyPolicy@@YAHPAXK0I@Z|, SMARTREFLEX_NotifyPolicy

	EXPORT	|?SMARTREFLEX_PreDeviceStateChange@@YAHPAXIII@Z| ; SMARTREFLEX_PreDeviceStateChange
	EXPORT	|??_C@_1EM@FMLOFHEC@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAr?$AAe?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn?$AAg@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FK@IAAFBHNF@?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe?$AAf?$AAl?$AAe?$AAx?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAC?$AAO?$AAR?$AAE?$AA?5?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe?$AA?5?$AAD@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IE@GLOKMLDB@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAr?$AAe?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn?$AAg@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$T38170| DCD	|$LN24@SMARTREFLE@6|
	DCD	0x40004802

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EM@FMLOFHEC@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAr?$AAe?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn?$AAg@| DCB "-"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "P", 0x0, "r", 0x0, "e", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "S", 0x0, "t", 0x0, "a"
	DCB	0x0, "t", 0x0, "e", 0x0, "C", 0x0, "h", 0x0, "a", 0x0, "n"
	DCB	0x0, "g", 0x0, "e", 0x0, "(", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FK@IAAFBHNF@?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe?$AAf?$AAl?$AAe?$AAx?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAC?$AAO?$AAR?$AAE?$AA?5?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe?$AA?5?$AAD@| DCB "S"
	DCB	0x0, "m", 0x0, "a", 0x0, "r", 0x0, "t", 0x0, "R", 0x0, "e"
	DCB	0x0, "f", 0x0, "l", 0x0, "e", 0x0, "x", 0x0, "P", 0x0, "o"
	DCB	0x0, "l", 0x0, "i", 0x0, "c", 0x0, "y", 0x0, ":", 0x0, " "
	DCB	0x0, "C", 0x0, "O", 0x0, "R", 0x0, "E", 0x0, " ", 0x0, "A"
	DCB	0x0, "c", 0x0, "t", 0x0, "i", 0x0, "v", 0x0, "e", 0x0, " "
	DCB	0x0, "D", 0x0, "e", 0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e"
	DCB	0x0, "s", 0x0, ":", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IE@GLOKMLDB@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAr?$AAe?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn?$AAg@| DCB "+"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "P", 0x0, "r", 0x0, "e", 0x0, "D", 0x0, "e", 0x0, "v"
	DCB	0x0, "i", 0x0, "c", 0x0, "e", 0x0, "S", 0x0, "t", 0x0, "a"
	DCB	0x0, "t", 0x0, "e", 0x0, "C", 0x0, "h", 0x0, "a", 0x0, "n"
	DCB	0x0, "g", 0x0, "e", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "2", 0x0, "x", 0x0, ",", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "2", 0x0, "x", 0x0, ","
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "2", 0x0, "x"
	DCB	0x0, " ", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SMARTREFLEX_PreDeviceStateChange@@YAHPAXIII@Z| PROC ; SMARTREFLEX_PreDeviceStateChange

; 794  : {

  00000		 |$LN24@SMARTREFLE@6|
  00000	e92d47f0	 stmdb       sp!, {r4 - r10, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M38167|
  00008	e1a0a003	 mov         r10, r3
  0000c	e1a06002	 mov         r6, r2
  00010	e1a04001	 mov         r4, r1
  00014	e1a08000	 mov         r8, r0

; 795  :     RETAILMSG(ZONE_FUNCTION, (
; 796  :       L"+SMARTREFLEX_PreDeviceStateChange(0x%08x,0x%02x,0x%02x,0x%02x )\r\n",
; 797  :       hPolicyAdapter,
; 798  :       dev,
; 799  :       oldState,
; 800  :       newState
; 801  :       ));

  00018	e59f90fc	 ldr         r9, [pc, #0xFC]
  0001c	e599e440	 ldr         lr, [r9, #0x440]
  00020	e31e0004	 tst         lr, #4
  00024	159f00ec	 ldrne       r0, [pc, #0xEC]
  00028	11a03006	 movne       r3, r6
  0002c	11a02004	 movne       r2, r4
  00030	11a01008	 movne       r1, r8
  00034	158da000	 strne       r10, [sp]
  00038	1b000000	 blne        NKDbgPrintfW

; 802  : 
; 803  :     BOOL bCoreDevice = FALSE;
; 804  : 
; 805  :     // validate parameters
; 806  :     if (hPolicyAdapter != (HANDLE)&s_SmartReflexLoadPolicyInfo) return FALSE;

  0003c	e59f50d0	 ldr         r5, [pc, #0xD0]
  00040	e3a07000	 mov         r7, #0
  00044	e1580005	 cmp         r8, r5
  00048	13a00000	 movne       r0, #0
  0004c	1a00002b	 bne         |$LN11@SMARTREFLE@6|

; 807  : 
; 808  :     // record the new device state for the device
; 809  :     if (dev >= OMAP_DEVICE_GENERIC) return TRUE;

  00050	e3540050	 cmp         r4, #0x50
  00054	2a000028	 bcs         |$LN17@SMARTREFLE@6|

; 810  : 
; 811  :     switch (dev)

  00058	e3540006	 cmp         r4, #6
  0005c	3a000021	 bcc         |$LN20@SMARTREFLE@6|
  00060	e3540017	 cmp         r4, #0x17
  00064	9a00000a	 bls         |$LN6@SMARTREFLE@6|
  00068	e3540020	 cmp         r4, #0x20
  0006c	9a00001d	 bls         |$LN20@SMARTREFLE@6|
  00070	e3540023	 cmp         r4, #0x23
  00074	9a000006	 bls         |$LN6@SMARTREFLE@6|
  00078	e3540031	 cmp         r4, #0x31
  0007c	9a000019	 bls         |$LN20@SMARTREFLE@6|
  00080	e3540034	 cmp         r4, #0x34
  00084	9a000003	 bls         |$LN5@SMARTREFLE@6|
  00088	e3540048	 cmp         r4, #0x48
  0008c	0a000001	 beq         |$LN5@SMARTREFLE@6|
  00090	ea000014	 b           |$LN20@SMARTREFLE@6|
  00094		 |$LN6@SMARTREFLE@6|

; 812  :         {
; 813  :         case OMAP_DEVICE_I2C1:
; 814  :         case OMAP_DEVICE_I2C2:
; 815  :         case OMAP_DEVICE_I2C3:
; 816  :         case OMAP_DEVICE_MMC1:
; 817  :         case OMAP_DEVICE_MMC2:
; 818  :         case OMAP_DEVICE_MMC3:
; 819  :         case OMAP_DEVICE_USBTLL:
; 820  :         case OMAP_DEVICE_HDQ:
; 821  :         case OMAP_DEVICE_MCBSP1:
; 822  :         case OMAP_DEVICE_MCBSP5:
; 823  :         case OMAP_DEVICE_MCSPI1:
; 824  :         case OMAP_DEVICE_MCSPI2:
; 825  :         case OMAP_DEVICE_MCSPI3:
; 826  :         case OMAP_DEVICE_MCSPI4:
; 827  :         case OMAP_DEVICE_UART1:
; 828  :         case OMAP_DEVICE_UART2:
; 829  :         case OMAP_DEVICE_TS:
; 830  :         case OMAP_DEVICE_GPTIMER10:
; 831  :         case OMAP_DEVICE_GPTIMER11:
; 832  :         case OMAP_DEVICE_MSPRO:
; 833  :         case OMAP_DEVICE_EFUSE:
; 834  : 
; 835  :             // Core devices can effect the load on vdd2.  So
; 836  :             // a recalibration of vdd2 may be required of currently in
; 837  :             // opm0.
; 838  :             bCoreDevice = true;

  00094	e3a07001	 mov         r7, #1
  00098		 |$LN5@SMARTREFLE@6|

; 839  : 
; 840  :             // fall-through
; 841  :         case OMAP_DEVICE_MCBSP2:
; 842  :         case OMAP_DEVICE_MCBSP3:
; 843  :         case OMAP_DEVICE_MCBSP4:
; 844  :             // PER devices
; 845  : 
; 846  :             // fall-through
; 847  :         case OMAP_DEVICE_SGX:
; 848  :             if (newState < (UINT)D3 && oldState >= (UINT)D3)

  00098	e35a0003	 cmp         r10, #3
  0009c	2a000004	 bcs         |$LN19@SMARTREFLE@6|
  000a0	e3560003	 cmp         r6, #3
  000a4	3a000007	 bcc         |$LN2@SMARTREFLE@6|

; 849  :                 {
; 850  :                 //Add an Active device
; 851  :                 s_SmartReflexLoadPolicyInfo.dwActiveDevices++;

  000a8	e5953000	 ldr         r3, [r5]
  000ac	e2833001	 add         r3, r3, #1
  000b0	ea000003	 b           |$LN21@SMARTREFLE@6|
  000b4		 |$LN19@SMARTREFLE@6|

; 852  :                 }
; 853  :             else if (newState >= (UINT)D3 && oldState < (UINT)D3)

  000b4	e3560003	 cmp         r6, #3
  000b8	2a000002	 bcs         |$LN2@SMARTREFLE@6|

; 854  :                 {
; 855  :                 //Remove an Active device
; 856  :                 s_SmartReflexLoadPolicyInfo.dwActiveDevices--;

  000bc	e5953000	 ldr         r3, [r5]
  000c0	e2433001	 sub         r3, r3, #1
  000c4		 |$LN21@SMARTREFLE@6|
  000c4	e5853000	 str         r3, [r5]
  000c8		 |$LN2@SMARTREFLE@6|

; 857  :                 }
; 858  : 
; 859  :             UpdateSmartReflex();

  000c8	eb000000	 bl          |?UpdateSmartReflex@@YAXXZ|

; 860  : 
; 861  :             RETAILMSG(ZONE_INFO, (L"SmartReflexPolicy: CORE Active Devices: %d\r\n",
; 862  :                 s_SmartReflexLoadPolicyInfo.dwActiveDevices
; 863  :                 ));

  000cc	e5993440	 ldr         r3, [r9, #0x440]
  000d0	e3130008	 tst         r3, #8
  000d4	15951000	 ldrne       r1, [r5]
  000d8	159f0030	 ldrne       r0, [pc, #0x30]
  000dc	1b000000	 blne        NKDbgPrintfW

; 864  : 
; 865  :             break;
; 866  :         }
; 867  : 
; 868  :     // recalibrate new voltage levels if SmartReflex is disabled and we're at opm0
; 869  :     if (bCoreDevice == 0)

  000e0	e3570000	 cmp         r7, #0
  000e4	1a000000	 bne         |$LN1@SMARTREFLE@6|
  000e8		 |$LN20@SMARTREFLE@6|

; 870  :         {
; 871  :         SignalSensingThread();

  000e8	eb000000	 bl          |?SignalSensingThread@@YAXXZ|
  000ec		 |$LN1@SMARTREFLE@6|

; 860  : 
; 861  :             RETAILMSG(ZONE_INFO, (L"SmartReflexPolicy: CORE Active Devices: %d\r\n",
; 862  :                 s_SmartReflexLoadPolicyInfo.dwActiveDevices
; 863  :                 ));

  000ec	e5993440	 ldr         r3, [r9, #0x440]

; 872  :         }
; 873  : 
; 874  :     RETAILMSG(ZONE_FUNCTION, (L"-SMARTREFLEX_PreDeviceStateChange()\r\n"));

  000f0	e3130004	 tst         r3, #4
  000f4	159f0010	 ldrne       r0, [pc, #0x10]
  000f8	1b000000	 blne        NKDbgPrintfW
  000fc		 |$LN17@SMARTREFLE@6|

; 875  :     return TRUE;

  000fc	e3a00001	 mov         r0, #1
  00100		 |$LN11@SMARTREFLE@6|

; 876  : }

  00100	e28dd004	 add         sp, sp, #4
  00104	e8bd47f0	 ldmia       sp!, {r4 - r10, lr}
  00108	e12fff1e	 bx          lr
  0010c		 |$LN25@SMARTREFLE@6|
  0010c		 |$LN26@SMARTREFLE@6|
  0010c	00000000	 DCD         |??_C@_1EM@FMLOFHEC@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAr?$AAe?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn?$AAg@|
  00110		 |$LN27@SMARTREFLE@6|
  00110	00000000	 DCD         |??_C@_1FK@IAAFBHNF@?$AAS?$AAm?$AAa?$AAr?$AAt?$AAR?$AAe?$AAf?$AAl?$AAe?$AAx?$AAP?$AAo?$AAl?$AAi?$AAc?$AAy?$AA?3?$AA?5?$AAC?$AAO?$AAR?$AAE?$AA?5?$AAA?$AAc?$AAt?$AAi?$AAv?$AAe?$AA?5?$AAD@|
  00114		 |$LN28@SMARTREFLE@6|
  00114	00000000	 DCD         |s_SmartReflexLoadPolicyInfo|
  00118		 |$LN29@SMARTREFLE@6|
  00118	00000000	 DCD         |??_C@_1IE@GLOKMLDB@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAr?$AAe?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn?$AAg@|
  0011c		 |$LN30@SMARTREFLE@6|
  0011c	00000000	 DCD         |dpCurSettings|
  00120		 |$M38168|

			 ENDP  ; |?SMARTREFLEX_PreDeviceStateChange@@YAHPAXIII@Z|, SMARTREFLEX_PreDeviceStateChange

	EXPORT	|?SMARTREFLEX_PostDeviceStateChange@@YAHPAXIII@Z| ; SMARTREFLEX_PostDeviceStateChange
	EXPORT	|??_C@_1EO@PNOIICGB@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAo?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IG@OMOEKAOD@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAo?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn@| [ DATA ] ; `string'

  00000			 AREA	 |.pdata|, PDATA
|$T38193| DCD	|$LN9@SMARTREFLE@7|
	DCD	0x40001902

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EO@PNOIICGB@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAo?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn@| DCB "-"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "P", 0x0, "o", 0x0, "s", 0x0, "t", 0x0, "D", 0x0, "e"
	DCB	0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e", 0x0, "S", 0x0, "t"
	DCB	0x0, "a", 0x0, "t", 0x0, "e", 0x0, "C", 0x0, "h", 0x0, "a"
	DCB	0x0, "n", 0x0, "g", 0x0, "e", 0x0, "(", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IG@OMOEKAOD@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAo?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn@| DCB "+"
	DCB	0x0, "S", 0x0, "M", 0x0, "A", 0x0, "R", 0x0, "T", 0x0, "R"
	DCB	0x0, "E", 0x0, "F", 0x0, "L", 0x0, "E", 0x0, "X", 0x0, "_"
	DCB	0x0, "P", 0x0, "o", 0x0, "s", 0x0, "t", 0x0, "D", 0x0, "e"
	DCB	0x0, "v", 0x0, "i", 0x0, "c", 0x0, "e", 0x0, "S", 0x0, "t"
	DCB	0x0, "a", 0x0, "t", 0x0, "e", 0x0, "C", 0x0, "h", 0x0, "a"
	DCB	0x0, "n", 0x0, "g", 0x0, "e", 0x0, "(", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "2", 0x0, "x", 0x0, ","
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "2", 0x0, "x"
	DCB	0x0, ",", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "2"
	DCB	0x0, "x", 0x0, " ", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SMARTREFLEX_PostDeviceStateChange@@YAHPAXIII@Z| PROC ; SMARTREFLEX_PostDeviceStateChange

; 891  : {

  00000		 |$LN9@SMARTREFLE@7|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M38190|
  00008	e1a05003	 mov         r5, r3
  0000c	e1a06000	 mov         r6, r0

; 892  : 	UNREFERENCED_PARAMETER(hPolicyAdapter);
; 893  : 	UNREFERENCED_PARAMETER(dev);
; 894  : 	UNREFERENCED_PARAMETER(oldState);
; 895  : 	UNREFERENCED_PARAMETER(newState);
; 896  : 
; 897  :     RETAILMSG(ZONE_FUNCTION, (
; 898  :       L"+SMARTREFLEX_PostDeviceStateChange(0x%08x,0x%02x,0x%02x,0x%02x )\r\n",
; 899  :       hPolicyAdapter,
; 900  :       dev,
; 901  :       oldState,
; 902  :       newState
; 903  :       ));

  00010	e59f4048	 ldr         r4, [pc, #0x48]
  00014	e594e440	 ldr         lr, [r4, #0x440]
  00018	e31e0004	 tst         lr, #4
  0001c	0a000006	 beq         |$LN3@SMARTREFLE@7|
  00020	e59f0034	 ldr         r0, [pc, #0x34]
  00024	e1a03002	 mov         r3, r2
  00028	e1a02001	 mov         r2, r1
  0002c	e1a01006	 mov         r1, r6
  00030	e58d5000	 str         r5, [sp]
  00034	eb000000	 bl          NKDbgPrintfW
  00038	e594e440	 ldr         lr, [r4, #0x440]
  0003c		 |$LN3@SMARTREFLE@7|

; 904  : 
; 905  :     RETAILMSG(ZONE_FUNCTION, (L"-SMARTREFLEX_PostDeviceStateChange()\r\n"));

  0003c	e31e0004	 tst         lr, #4
  00040	159f0010	 ldrne       r0, [pc, #0x10]
  00044	1b000000	 blne        NKDbgPrintfW

; 906  :     return TRUE;

  00048	e3a00001	 mov         r0, #1

; 907  : }

  0004c	e28dd004	 add         sp, sp, #4
  00050	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00054	e12fff1e	 bx          lr
  00058		 |$LN10@SMARTREFLE@7|
  00058		 |$LN11@SMARTREFLE@7|
  00058	00000000	 DCD         |??_C@_1EO@PNOIICGB@?$AA?9?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAo?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn@|
  0005c		 |$LN12@SMARTREFLE@7|
  0005c	00000000	 DCD         |??_C@_1IG@OMOEKAOD@?$AA?$CL?$AAS?$AAM?$AAA?$AAR?$AAT?$AAR?$AAE?$AAF?$AAL?$AAE?$AAX?$AA_?$AAP?$AAo?$AAs?$AAt?$AAD?$AAe?$AAv?$AAi?$AAc?$AAe?$AAS?$AAt?$AAa?$AAt?$AAe?$AAC?$AAh?$AAa?$AAn@|
  00060		 |$LN13@SMARTREFLE@7|
  00060	00000000	 DCD         |dpCurSettings|
  00064		 |$M38191|

			 ENDP  ; |?SMARTREFLEX_PostDeviceStateChange@@YAHPAXIII@Z|, SMARTREFLEX_PostDeviceStateChange

	END
