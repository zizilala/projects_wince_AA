; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\PM\DEVICEMEDIATOR\devicemediator.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|??0DeviceBase@@QAA@XZ|			; DeviceBase::DeviceBase
	EXPORT	|??_7DeviceBase@@6B@| [ DATA ]		; DeviceBase::`vftable'
	EXPORT	|?Uninitialize@DeviceBase@@UAAHXZ|	; DeviceBase::Uninitialize
	EXPORT	|?Initialize@DeviceBase@@UAAHPBG@Z|	; DeviceBase::Initialize
	IMPORT	|??_EDeviceBase@@UAAPAXI@Z|, WEAK |??_GDeviceBase@@UAAPAXI@Z| ; DeviceBase::`vector deleting destructor', DeviceBase::`scalar deleting destructor'
	IMPORT	|_purecall|
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicebase.h

  00000			 AREA	 |.pdata|, PDATA
|$T33223| DCD	|$LN5@DeviceBase|
	DCD	0x40000700

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7DeviceBase@@6B@| DCD |??_EDeviceBase@@UAAPAXI@Z|	; DeviceBase::`vftable'
	DCD	|?Uninitialize@DeviceBase@@UAAHXZ|
	DCD	|?Initialize@DeviceBase@@UAAHPBG@Z|
	DCD	|_purecall|
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0DeviceBase@@QAA@XZ| PROC		; DeviceBase::DeviceBase

; 52   :         {

  00000		 |$LN5@DeviceBase|
  00000		 |$M33220|
  00000	e59f3010	 ldr         r3, [pc, #0x10]
  00004	e3a02000	 mov         r2, #0
  00008	e580200c	 str         r2, [r0, #0xC]
  0000c	e5803000	 str         r3, [r0]

; 53   :         m_szDeviceName[0] = NULL;

  00010	e1c021b0	 strh        r2, [r0, #0x10]

; 54   :         }

  00014	e12fff1e	 bx          lr
  00018		 |$LN6@DeviceBase|
  00018		 |$LN7@DeviceBase|
  00018	00000000	 DCD         |??_7DeviceBase@@6B@|
  0001c		 |$M33221|

			 ENDP  ; |??0DeviceBase@@QAA@XZ|, DeviceBase::DeviceBase

	EXPORT	|??1DeviceBase@@UAA@XZ|			; DeviceBase::~DeviceBase

  00000			 AREA	 |.pdata|, PDATA
|$T33233| DCD	|$LN5@DeviceBase@2|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1DeviceBase@@UAA@XZ| PROC		; DeviceBase::~DeviceBase

; 57   :         {

  00000		 |$LN5@DeviceBase@2|
  00000		 |$M33230|
  00000	e59f3004	 ldr         r3, [pc, #4]
  00004	e5803000	 str         r3, [r0]

; 58   :         };

  00008	e12fff1e	 bx          lr
  0000c		 |$LN6@DeviceBase@2|
  0000c		 |$LN7@DeviceBase@2|
  0000c	00000000	 DCD         |??_7DeviceBase@@6B@|
  00010		 |$M33231|

			 ENDP  ; |??1DeviceBase@@UAA@XZ|, DeviceBase::~DeviceBase

	EXPORT	|?GetDeviceName@DeviceBase@@QBAPBGXZ|	; DeviceBase::GetDeviceName

  00000			 AREA	 |.pdata|, PDATA
|$T33245| DCD	|$LN5@GetDeviceN|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetDeviceName@DeviceBase@@QBAPBGXZ| PROC ; DeviceBase::GetDeviceName

; 65   :         { 

  00000		 |$LN5@GetDeviceN|
  00000		 |$M33242|

; 66   :         return m_szDeviceName; 

  00000	e2800010	 add         r0, r0, #0x10

; 67   :         }

  00004	e12fff1e	 bx          lr
  00008		 |$M33243|

			 ENDP  ; |?GetDeviceName@DeviceBase@@QBAPBGXZ|, DeviceBase::GetDeviceName

	EXPORT	|?GetDeviceHandle@DeviceBase@@QBAPAXXZ|	; DeviceBase::GetDeviceHandle

  00000			 AREA	 |.pdata|, PDATA
|$T33255| DCD	|$LN5@GetDeviceH|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetDeviceHandle@DeviceBase@@QBAPAXXZ| PROC ; DeviceBase::GetDeviceHandle

; 70   :         {

  00000		 |$LN5@GetDeviceH|
  00000		 |$M33252|

; 71   :         return m_hDevice;

  00000	e590000c	 ldr         r0, [r0, #0xC]

; 72   :         }

  00004	e12fff1e	 bx          lr
  00008		 |$M33253|

			 ENDP  ; |?GetDeviceHandle@DeviceBase@@QBAPAXXZ|, DeviceBase::GetDeviceHandle

	EXPORT	|??8DeviceBase@@QBAHPBG@Z|		; DeviceBase::operator==
	IMPORT	|_wcsicmp|

  00000			 AREA	 |.pdata|, PDATA
|$T33271| DCD	|$LN11@operator|
	DCD	0x40000d01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??8DeviceBase@@QBAHPBG@Z| PROC	; DeviceBase::operator==

; 79   :         {

  00000		 |$LN11@operator|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M33268|

; 80   :         if (m_szDeviceName == NULL || szDeviceName == NULL) return FALSE;

  00004	e2900010	 adds        r0, r0, #0x10
  00008	0a000006	 beq         |$LN1@operator|
  0000c	e3510000	 cmp         r1, #0
  00010	0a000004	 beq         |$LN1@operator|

; 81   :         return _tcsicmp(GetDeviceName(), szDeviceName) == 0;

  00014	eb000000	 bl          _wcsicmp
  00018	e3500000	 cmp         r0, #0
  0001c	03a00001	 moveq       r0, #1

; 82   :         }

  00020	049de004	 ldreq       lr, [sp], #4
  00024	012fff1e	 bxeq        lr
  00028		 |$LN1@operator|

; 80   :         if (m_szDeviceName == NULL || szDeviceName == NULL) return FALSE;

  00028	e3a00000	 mov         r0, #0

; 82   :         }

  0002c	e49de004	 ldr         lr, [sp], #4
  00030	e12fff1e	 bx          lr
  00034		 |$M33269|

			 ENDP  ; |??8DeviceBase@@QBAHPBG@Z|, DeviceBase::operator==


  00000			 AREA	 |.pdata|, PDATA
|$T33280| DCD	|$LN5@Uninitiali|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Uninitialize@DeviceBase@@UAAHXZ| PROC ; DeviceBase::Uninitialize

; 90   :         {

  00000		 |$LN5@Uninitiali|
  00000		 |$M33277|

; 91   :         return TRUE;

  00000	e3a00001	 mov         r0, #1

; 92   :         }

  00004	e12fff1e	 bx          lr
  00008		 |$M33278|

			 ENDP  ; |?Uninitialize@DeviceBase@@UAAHXZ|, DeviceBase::Uninitialize

	IMPORT	|wcscpy|
	IMPORT	|wcslen|

  00000			 AREA	 |.pdata|, PDATA
|$T33293| DCD	|$LN6@Initialize|
	DCD	0x40000f01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Initialize@DeviceBase@@UAAHPBG@Z| PROC ; DeviceBase::Initialize

; 95   :         {

  00000		 |$LN6@Initialize|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M33290|
  00004	e1a04001	 mov         r4, r1
  00008	e1a05000	 mov         r5, r0

; 96   :         if (_tcslen(szDeviceName) >= sizeof(m_szDeviceName) / sizeof(m_szDeviceName[0])) return FALSE;

  0000c	e1a00004	 mov         r0, r4
  00010	eb000000	 bl          wcslen
  00014	e3500080	 cmp         r0, #0x80
  00018	23a00000	 movcs       r0, #0

; 99   :         }

  0001c	28bd4030	 ldmcsia     sp!, {r4, r5, lr}
  00020	212fff1e	 bxcs        lr

; 97   :         _tcscpy(m_szDeviceName, szDeviceName);

  00024	e1a01004	 mov         r1, r4
  00028	e2850010	 add         r0, r5, #0x10
  0002c	eb000000	 bl          wcscpy

; 98   :         return TRUE;

  00030	e3a00001	 mov         r0, #1

; 99   :         }

  00034	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00038	e12fff1e	 bx          lr
  0003c		 |$M33291|

			 ENDP  ; |?Initialize@DeviceBase@@UAAHPBG@Z|, DeviceBase::Initialize

	IMPORT	|??3@YAXPAX@Z|				; operator delete

  00000			 AREA	 |.pdata|, PDATA
|$T33307| DCD	|$LN8@scalar|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GDeviceBase@@UAAPAXI@Z| PROC	; DeviceBase::`scalar deleting destructor'
  00000		 |$LN8@scalar|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M33304|
  00004	e1a04000	 mov         r4, r0
  00008	e59f3014	 ldr         r3, [pc, #0x14]
  0000c	e3110001	 tst         r1, #1
  00010	e5843000	 str         r3, [r4]
  00014	1b000000	 blne        |??3@YAXPAX@Z|
  00018	e1a00004	 mov         r0, r4
  0001c	e8bd4010	 ldmia       sp!, {r4, lr}
  00020	e12fff1e	 bx          lr
  00024		 |$LN9@scalar|
  00024		 |$LN10@scalar|
  00024	00000000	 DCD         |??_7DeviceBase@@6B@|
  00028		 |$M33305|

			 ENDP  ; |??_GDeviceBase@@UAAPAXI@Z|, DeviceBase::`scalar deleting destructor'

	EXPORT	|?GetContextListId@ContextList@@QBAKXZ|	; ContextList::GetContextListId
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\contextlist.h

  00000			 AREA	 |.pdata|, PDATA
|$T33319| DCD	|$LN5@GetContext|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetContextListId@ContextList@@QBAKXZ| PROC ; ContextList::GetContextListId

; 52   :         {

  00000		 |$LN5@GetContext|
  00000		 |$M33316|

; 53   :         return m_idContextList;

  00000	e590000c	 ldr         r0, [r0, #0xC]

; 54   :         }

  00004	e12fff1e	 bx          lr
  00008		 |$M33317|

			 ENDP  ; |?GetContextListId@ContextList@@QBAKXZ|, ContextList::GetContextListId

	EXPORT	|??0DeviceMediator@@IAA@XZ|		; DeviceMediator::DeviceMediator
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.h

  00000			 AREA	 |.pdata|, PDATA
|$T33329| DCD	|$LN5@DeviceMedi|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0DeviceMediator@@IAA@XZ| PROC	; DeviceMediator::DeviceMediator

; 60   :         {

  00000		 |$LN5@DeviceMedi|
  00000		 |$M33326|
  00000	e3a03000	 mov         r3, #0
  00004	e5803014	 str         r3, [r0, #0x14]
  00008	e5803018	 str         r3, [r0, #0x18]

; 61   :         }

  0000c	e12fff1e	 bx          lr
  00010		 |$M33327|

			 ENDP  ; |??0DeviceMediator@@IAA@XZ|, DeviceMediator::DeviceMediator

	EXPORT	|?Lock@DeviceMediator@@IAAXXZ|		; DeviceMediator::Lock
	IMPORT	|EnterCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T33337| DCD	|$LN5@Lock|
	DCD	0x40000401
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Lock@DeviceMediator@@IAAXXZ| PROC	; DeviceMediator::Lock

; 64   :         { 

  00000		 |$LN5@Lock|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M33334|

; 65   :         ::EnterCriticalSection(&m_cs); 

  00004	eb000000	 bl          EnterCriticalSection

; 66   :         }

  00008	e49de004	 ldr         lr, [sp], #4
  0000c	e12fff1e	 bx          lr
  00010		 |$M33335|

			 ENDP  ; |?Lock@DeviceMediator@@IAAXXZ|, DeviceMediator::Lock

	EXPORT	|?Unlock@DeviceMediator@@IAAXXZ|	; DeviceMediator::Unlock
	IMPORT	|LeaveCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T33345| DCD	|$LN5@Unlock|
	DCD	0x40000401
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Unlock@DeviceMediator@@IAAXXZ| PROC	; DeviceMediator::Unlock

; 69   :         { 

  00000		 |$LN5@Unlock|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M33342|

; 70   :         ::LeaveCriticalSection(&m_cs); 

  00004	eb000000	 bl          LeaveCriticalSection

; 71   :         }

  00008	e49de004	 ldr         lr, [sp], #4
  0000c	e12fff1e	 bx          lr
  00010		 |$M33343|

			 ENDP  ; |?Unlock@DeviceMediator@@IAAXXZ|, DeviceMediator::Unlock

	EXPORT	|??0StreamDevice@@QAA@XZ|		; StreamDevice::StreamDevice
	EXPORT	|??_7StreamDevice@@6B@| [ DATA ]	; StreamDevice::`vftable'
	EXPORT	|?Uninitialize@StreamDevice@@UAAHXZ|	; StreamDevice::Uninitialize
	EXPORT	|?Initialize@StreamDevice@@UAAHPBG@Z|	; StreamDevice::Initialize
	EXPORT	|?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z| ; StreamDevice::SendIoControl
	IMPORT	|??_EStreamDevice@@UAAPAXI@Z|, WEAK |??_GStreamDevice@@UAAPAXI@Z| ; StreamDevice::`vector deleting destructor', StreamDevice::`scalar deleting destructor'
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicebase.h

  00000			 AREA	 |.pdata|, PDATA
|$T33358| DCD	|$LN7@StreamDevi|
	DCD	0x40000700

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7StreamDevice@@6B@| DCD |??_EStreamDevice@@UAAPAXI@Z| ; StreamDevice::`vftable'
	DCD	|?Uninitialize@StreamDevice@@UAAHXZ|
	DCD	|?Initialize@StreamDevice@@UAAHPBG@Z|
	DCD	|?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z|
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\streamdevice.h

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0StreamDevice@@QAA@XZ| PROC		; StreamDevice::StreamDevice

; 46   :         {

  00000		 |$LN7@StreamDevi|
  00000		 |$M33355|
  00000	e59f3010	 ldr         r3, [pc, #0x10]
  00004	e3a02000	 mov         r2, #0
  00008	e580200c	 str         r2, [r0, #0xC]
  0000c	e5803000	 str         r3, [r0]
  00010	e1c021b0	 strh        r2, [r0, #0x10]

; 47   :         }

  00014	e12fff1e	 bx          lr
  00018		 |$LN8@StreamDevi|
  00018		 |$LN9@StreamDevi|
  00018	00000000	 DCD         |??_7StreamDevice@@6B@|
  0001c		 |$M33356|

			 ENDP  ; |??0StreamDevice@@QAA@XZ|, StreamDevice::StreamDevice

	IMPORT	|CloseHandle|
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicebase.h

  00000			 AREA	 |.pdata|, PDATA
|$T33373| DCD	|$LN8@Uninitiali@2|
	DCD	0x40000c01
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\streamdevice.h

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Uninitialize@StreamDevice@@UAAHXZ| PROC ; StreamDevice::Uninitialize

; 56   :         {

  00000		 |$LN8@Uninitiali@2|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M33370|
  00004	e1a04000	 mov         r4, r0

; 57   :         DeviceBase::Uninitialize();
; 58   :         if (m_hDevice != NULL) 

  00008	e594300c	 ldr         r3, [r4, #0xC]
  0000c	e3530000	 cmp         r3, #0
  00010	0a000003	 beq         |$LN1@Uninitiali@2|

; 59   :             {
; 60   :             CloseHandle(m_hDevice);

  00014	e1a00003	 mov         r0, r3
  00018	eb000000	 bl          CloseHandle

; 61   :             m_hDevice = NULL;

  0001c	e3a03000	 mov         r3, #0
  00020	e584300c	 str         r3, [r4, #0xC]
  00024		 |$LN1@Uninitiali@2|

; 62   :             }
; 63   :         return TRUE;

  00024	e3a00001	 mov         r0, #1

; 64   :         }

  00028	e8bd4010	 ldmia       sp!, {r4, lr}
  0002c	e12fff1e	 bx          lr
  00030		 |$M33371|

			 ENDP  ; |?Uninitialize@StreamDevice@@UAAHXZ|, StreamDevice::Uninitialize

	IMPORT	|CreateFileW|
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicebase.h

  00000			 AREA	 |.pdata|, PDATA
|$T33393| DCD	|$LN13@Initialize@2|
	DCD	0x40001e02
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\streamdevice.h

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Initialize@StreamDevice@@UAAHPBG@Z| PROC ; StreamDevice::Initialize

; 68   :         {

  00000		 |$LN13@Initialize@2|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004	e24dd00c	 sub         sp, sp, #0xC
  00008		 |$M33390|
  00008	e1a05001	 mov         r5, r1
  0000c	e1a04000	 mov         r4, r0

; 69   :         DeviceBase::Initialize(szDeviceName);

  00010	e1a00005	 mov         r0, r5
  00014	eb000000	 bl          wcslen
  00018	e3500080	 cmp         r0, #0x80
  0001c	31a01005	 movcc       r1, r5
  00020	32840010	 addcc       r0, r4, #0x10
  00024	3b000000	 blcc        wcscpy

; 70   :         m_hDevice = ::CreateFile(szDeviceName, GENERIC_EXECUTE, 
; 71   :                         DEVACCESS_PMEXT_MODE, NULL, 
; 72   :                         OPEN_EXISTING, 0, NULL
; 73   :                         );

  00028	e3a03003	 mov         r3, #3
  0002c	e58d3000	 str         r3, [sp]
  00030	e3a06000	 mov         r6, #0
  00034	e3a03000	 mov         r3, #0
  00038	e3a02102	 mov         r2, #2, 2
  0003c	e3a01202	 mov         r1, #2, 4
  00040	e1a00005	 mov         r0, r5
  00044	e58d6008	 str         r6, [sp, #8]
  00048	e58d6004	 str         r6, [sp, #4]
  0004c	eb000000	 bl          CreateFileW

; 74   : 
; 75   :         if (m_hDevice == INVALID_HANDLE_VALUE)

  00050	e3700001	 cmn         r0, #1
  00054	e584000c	 str         r0, [r4, #0xC]

; 76   :             {
; 77   :             DeviceBase::Uninitialize();
; 78   :             m_hDevice = NULL;

  00058	0584600c	 streq       r6, [r4, #0xC]

; 79   :             }
; 80   :         
; 81   :         return m_hDevice != NULL;

  0005c	e594300c	 ldr         r3, [r4, #0xC]
  00060	e3530000	 cmp         r3, #0
  00064	13a00001	 movne       r0, #1
  00068	03a00000	 moveq       r0, #0

; 82   :         }

  0006c	e28dd00c	 add         sp, sp, #0xC
  00070	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00074	e12fff1e	 bx          lr
  00078		 |$M33391|

			 ENDP  ; |?Initialize@StreamDevice@@UAAHPBG@Z|, StreamDevice::Initialize

	IMPORT	|DeviceIoControl|
	IMPORT	|__C_specific_handler|

  00000			 AREA	 |.pdata|, PDATA
|$T33420| DCD	|$LN17@SendIoCont|
	DCD	0xc0001704

  00000			 AREA	 |.pdata|, PDATA
|$T33422| DCD	|$LN5@SendIoCont|
	DCD	0x40000502

  00000			 AREA	 |.xdata|, DATA
|$T33418| DCD	0x1
	DCD	|$LN9@SendIoCont|
	DCD	|$LN10@SendIoCont|
	DCD	|$LN5@SendIoCont|
	DCD	|$LN6@SendIoCont|
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T33418|

  00008		 |?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z| PROC ; StreamDevice::SendIoControl

; 89   :         {

  00008		 |$LN17@SendIoCont|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d5870	 stmdb       sp!, {r4 - r6, r11, r12, lr}
  00010	e28db018	 add         r11, sp, #0x18
  00014	e24dd018	 sub         sp, sp, #0x18
  00018		 |$LN15@SendIoCont|
  00018		 |$LN9@SendIoCont|

; 90   :         BOOL rc = FALSE;
; 91   :         __try 
; 92   :             {            
; 93   :             rc = DeviceIoControl(m_hDevice, dwIoControlCode, lpInBuf, 
; 94   :                     nInBufSize, lpOutBuf, nOutBufSize, lpBytesReturned, NULL
; 95   :                     );

  00018	e59be008	 ldr         lr, [r11, #8]
  0001c	e59b4004	 ldr         r4, [r11, #4]
  00020	e59b5000	 ldr         r5, [r11]
  00024	e590000c	 ldr         r0, [r0, #0xC]
  00028	e3a06000	 mov         r6, #0
  0002c	e58de008	 str         lr, [sp, #8]
  00030	e58d4004	 str         r4, [sp, #4]
  00034	e58d5000	 str         r5, [sp]
  00038	e58d600c	 str         r6, [sp, #0xC]
  0003c	eb000000	 bl          DeviceIoControl
  00040	e50b0020	 str         r0, [r11, #-0x20]
  00044		 |$LN10@SendIoCont|

; 96   :             }

  00044	ea000003	 b           |$LN2@SendIoCont|
  00048		 |$LN6@SendIoCont|

; 98   :             {            
; 99   :             rc = FALSE;

  00048	e3a00000	 mov         r0, #0
  0004c	e50b0020	 str         r0, [r11, #-0x20]
  00050	ea000000	 b           |$LN2@SendIoCont|
  00054		 |$LN14@SendIoCont|

; 100  :             }
; 101  :         return rc;

  00054	e51b001c	 ldr         r0, [r11, #-0x1C]
  00058		 |$LN2@SendIoCont|

; 102  :         }

  00058	e24bd018	 sub         sp, r11, #0x18
  0005c	e89d6870	 ldmia       sp, {r4 - r6, r11, sp, lr}
  00060	e12fff1e	 bx          lr

			 ENDP  ; |?SendIoControl@StreamDevice@@UAAHKPAXK0KPAK@Z|, StreamDevice::SendIoControl

  00064		 |$LN5@SendIoCont|
  00064		 |$LN16@SendIoCont|

; 97   :         __except(EXCEPTION_EXECUTE_HANDLER) 

  00064	e52de004	 str         lr, [sp, #-4]!
  00068	e24dd010	 sub         sp, sp, #0x10
  0006c		 |$LN8@SendIoCont|
  0006c		 |$LN19@SendIoCont|
  0006c	e3a00001	 mov         r0, #1
  00070		 |$LN7@SendIoCont|
  00070	e28dd010	 add         sp, sp, #0x10
  00074	e49df004	 ldr         pc, [sp], #4
  00078		 |$LN20@SendIoCont|
  00078		 |$LN18@SendIoCont|
	EXPORT	|??1StreamDevice@@UAA@XZ|		; StreamDevice::~StreamDevice

  00000			 AREA	 |.pdata|, PDATA
|$T33437| DCD	|$LN7@StreamDevi@2|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1StreamDevice@@UAA@XZ| PROC		; StreamDevice::~StreamDevice
  00000		 |$LN7@StreamDevi@2|
  00000		 |$M33434|
  00000	e59f3004	 ldr         r3, [pc, #4]
  00004	e5803000	 str         r3, [r0]
  00008	e12fff1e	 bx          lr
  0000c		 |$LN8@StreamDevi@2|
  0000c		 |$LN9@StreamDevi@2|
  0000c	00000000	 DCD         |??_7DeviceBase@@6B@|
  00010		 |$M33435|

			 ENDP  ; |??1StreamDevice@@UAA@XZ|, StreamDevice::~StreamDevice

	EXPORT	|??0ContextList@@QAA@XZ|		; ContextList::ContextList
	EXPORT	|??_7ContextList@@6B@| [ DATA ]		; ContextList::`vftable'

  00000			 AREA	 |.pdata|, PDATA
|$T33449| DCD	|$LN5@ContextLis|
	DCD	0x40000500

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7ContextList@@6B@| DCD |_purecall|			; ContextList::`vftable'
	DCD	|_purecall|
	DCD	|_purecall|
	DCD	|_purecall|
	DCD	|_purecall|
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0ContextList@@QAA@XZ| PROC		; ContextList::ContextList
  00000		 |$LN5@ContextLis|
  00000		 |$M33446|
  00000	e1a02000	 mov         r2, r0
  00004	e59f3004	 ldr         r3, [pc, #4]
  00008	e5823000	 str         r3, [r2]
  0000c	e12fff1e	 bx          lr
  00010		 |$LN6@ContextLis|
  00010		 |$LN7@ContextLis|
  00010	00000000	 DCD         |??_7ContextList@@6B@|
  00014		 |$M33447|

			 ENDP  ; |??0ContextList@@QAA@XZ|, ContextList::ContextList

	EXPORT	|??0DeviceList@@QAA@XZ|			; DeviceList::DeviceList
	EXPORT	|??_7DeviceList@@6B@| [ DATA ]		; DeviceList::`vftable'
	IMPORT	|?Uninitialize@DeviceList@@UAAHXZ|	; DeviceList::Uninitialize
	IMPORT	|?Initialize@DeviceList@@UAAHXZ|	; DeviceList::Initialize
	IMPORT	|?InsertDevice@DeviceList@@UAAHPBGPAVDeviceBase@@PAUHKEY__@@@Z| ; DeviceList::InsertDevice
	IMPORT	|?RemoveDevice@DeviceList@@UAAHPBGPAVDeviceBase@@@Z| ; DeviceList::RemoveDevice
	IMPORT	|?SendIoControl@DeviceList@@UAAHKKPAXK0KPAK@Z| ; DeviceList::SendIoControl
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\dvfslist.h

  00000			 AREA	 |.pdata|, PDATA
|$T33464| DCD	|$LN7@DeviceList|
	DCD	0x40000600

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7DeviceList@@6B@| DCD |?Uninitialize@DeviceList@@UAAHXZ| ; DeviceList::`vftable'
	DCD	|?Initialize@DeviceList@@UAAHXZ|
	DCD	|?InsertDevice@DeviceList@@UAAHPBGPAVDeviceBase@@PAUHKEY__@@@Z|
	DCD	|?RemoveDevice@DeviceList@@UAAHPBGPAVDeviceBase@@@Z|
	DCD	|?SendIoControl@DeviceList@@UAAHKKPAXK0KPAK@Z|
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicelist.h

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0DeviceList@@QAA@XZ| PROC		; DeviceList::DeviceList

; 51   :     DeviceList()

  00000		 |$LN7@DeviceList|
  00000		 |$M33461|
  00000	e59f300c	 ldr         r3, [pc, #0xC]

; 52   :         {
; 53   :         m_idContextList = DEVICEMEDIATOR_DEVICE_LIST;

  00004	e3a02001	 mov         r2, #1
  00008	e580200c	 str         r2, [r0, #0xC]
  0000c	e5803000	 str         r3, [r0]

; 54   :         }

  00010	e12fff1e	 bx          lr
  00014		 |$LN8@DeviceList|
  00014		 |$LN9@DeviceList|
  00014	00000000	 DCD         |??_7DeviceList@@6B@|
  00018		 |$M33462|

			 ENDP  ; |??0DeviceList@@QAA@XZ|, DeviceList::DeviceList

	EXPORT	|?DeleteDeviceMediator@DeviceMediator@@SAXPAV1@@Z| ; DeviceMediator::DeleteDeviceMediator
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.cpp

  00000			 AREA	 |.pdata|, PDATA
|$T33473| DCD	|$LN5@DeleteDevi|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?DeleteDeviceMediator@DeviceMediator@@SAXPAV1@@Z| PROC ; DeviceMediator::DeleteDeviceMediator

; 51   : {

  00000		 |$LN5@DeleteDevi|
  00000		 |$M33470|

; 52   :     // for right now don't delete device mediator
; 53   :     UNREFERENCED_PARAMETER(pDeviceMediaton);
; 54   : }

  00000	e12fff1e	 bx          lr
  00004		 |$M33471|

			 ENDP  ; |?DeleteDeviceMediator@DeviceMediator@@SAXPAV1@@Z|, DeviceMediator::DeleteDeviceMediator

	EXPORT	|?Uninitialize@DeviceMediator@@IAAHXZ|	; DeviceMediator::Uninitialize
	IMPORT	|DeleteCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T33488| DCD	|$LN7@Uninitiali@3|
	DCD	0x40000f01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Uninitialize@DeviceMediator@@IAAHXZ| PROC ; DeviceMediator::Uninitialize

; 95   : {

  00000		 |$LN7@Uninitiali@3|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M33485|
  00004	e1a04000	 mov         r4, r0

; 96   :     ::DeleteCriticalSection(&m_cs);

  00008	eb000000	 bl          DeleteCriticalSection

; 97   : 
; 98   :     // delete dummy stream device
; 99   :     delete m_pDeviceBaseHead;

  0000c	e5943014	 ldr         r3, [r4, #0x14]
  00010	e1b00003	 movs        r0, r3
  00014	15903000	 ldrne       r3, [r0]
  00018	13a01001	 movne       r1, #1
  0001c	15933000	 ldrne       r3, [r3]
  00020	11a0e00f	 movne       lr, pc
  00024	112fff13	 bxne        r3

; 100  :     m_pDeviceBaseHead = NULL;

  00028	e3a03000	 mov         r3, #0
  0002c	e5843014	 str         r3, [r4, #0x14]

; 101  :     return TRUE;

  00030	e3a00001	 mov         r0, #1

; 102  : }

  00034	e8bd4010	 ldmia       sp!, {r4, lr}
  00038	e12fff1e	 bx          lr
  0003c		 |$M33486|

			 ENDP  ; |?Uninitialize@DeviceMediator@@IAAHXZ|, DeviceMediator::Uninitialize

	EXPORT	|__$ArrayPad$| [ DATA ]
	EXPORT	|?InsertDevice@DeviceMediator@@QAAHPBGPAVDeviceBase@@@Z| ; DeviceMediator::InsertDevice
	IMPORT	|RegCloseKey|
	IMPORT	|RegOpenKeyExW|
	IMPORT	|GetDeviceInformationByFileHandle|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|__security_cookie|
	IMPORT	|__security_check_cookie|
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.h

  00000			 AREA	 |.pdata|, PDATA
|$T33539| DCD	|$LN36@InsertDevi|
	DCD	0xc0006503

  00000			 AREA	 |.xdata|, DATA
|$T33535| DCD	0xffffffd8
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__GSHandlerCheck|
  00004	00000000	 DCD         |$T33535|

  00008		 |?InsertDevice@DeviceMediator@@QAAHPBGPAVDeviceBase@@@Z| PROC ; DeviceMediator::InsertDevice

; 110  : {

  00008		 |$LN36@InsertDevi|
  00008	e92d4ff0	 stmdb       sp!, {r4 - r11, lr}
  0000c	e59fc184	 ldr         r12, [pc, #0x184]
  00010	e08dd00c	 add         sp, sp, r12
  00014		 |$M33536|
  00014	e1a07002	 mov         r7, r2
  00018	e1a09001	 mov         r9, r1
  0001c	e1a06000	 mov         r6, r0
  00020	e59f316c	 ldr         r3, [pc, #0x16C]
  00024	e5933000	 ldr         r3, [r3]
  00028	e58d3848	 str         r3, [sp, #0x848]

; 111  :     BOOL rc = FALSE;
; 112  :     HKEY hKey = NULL;
; 113  :     DEVMGR_DEVICE_INFORMATION di;
; 114  :     IOCTL_TIPMX_CONTEXTPATH_OUT outData;
; 115  : 
; 116  :     // get information about the driver
; 117  :     di.dwSize = sizeof(di);
; 118  :     if (GetDeviceInformationByFileHandle(pDevice->GetDeviceHandle(), &di) == TRUE)

  0002c	e597000c	 ldr         r0, [r7, #0xC]
  00030	e3a03000	 mov         r3, #0
  00034	e3a02e63	 mov         r2, #0x63, 28
  00038	e28d1f86	 add         r1, sp, #0x86, 30
  0003c	e3a08000	 mov         r8, #0
  00040	e58d300c	 str         r3, [sp, #0xC]
  00044	e58d2218	 str         r2, [sp, #0x218]
  00048	eb000000	 bl          GetDeviceInformationByFileHandle
  0004c	e3500001	 cmp         r0, #1

; 119  :         {
; 120  :             RegOpenKeyEx(HKEY_LOCAL_MACHINE, di.szDeviceKey, 0, 0, &hKey);

  00050	e3a02000	 mov         r2, #0
  00054	1a000006	 bne         |$LN12@InsertDevi|
  00058	e28d300c	 add         r3, sp, #0xC
  0005c	e58d3000	 str         r3, [sp]
  00060	e3a03000	 mov         r3, #0
  00064	e28d1e23	 add         r1, sp, #0x23, 28
  00068	e3a0010a	 mov         r0, #0xA, 2
  0006c	eb000000	 bl          RegOpenKeyExW

; 121  :         }
; 122  :     else if (pDevice->SendIoControl(IOCTL_TIPMX_CONTEXTPATH, NULL, 0, &outData, 

  00070	ea000019	 b           |$LN9@InsertDevi|
  00074		 |$LN12@InsertDevi|

; 123  :                 sizeof(outData), NULL) == TRUE)

  00074	e5973000	 ldr         r3, [r7]
  00078	e3a01112	 mov         r1, #0x12, 2
  0007c	e3a0b000	 mov         r11, #0
  00080	e593500c	 ldr         r5, [r3, #0xC]
  00084	e3a0af82	 mov         r10, #0x82, 30
  00088	e28d4010	 add         r4, sp, #0x10
  0008c	e3a03000	 mov         r3, #0
  00090	e3811b41	 orr         r1, r1, #0x41, 22
  00094	e1a00007	 mov         r0, r7
  00098	e58db008	 str         r11, [sp, #8]
  0009c	e58da004	 str         r10, [sp, #4]
  000a0	e58d4000	 str         r4, [sp]
  000a4	e1a0e00f	 mov         lr, pc
  000a8	e12fff15	 bx          r5
  000ac	e3500001	 cmp         r0, #1
  000b0	1a000009	 bne         |$LN9@InsertDevi|

; 124  :         {
; 125  :         if (_tcslen(outData.szContext) > 0)

  000b4	e28d0010	 add         r0, sp, #0x10
  000b8	eb000000	 bl          wcslen
  000bc	e3500000	 cmp         r0, #0

; 126  :             {
; 127  :             RegOpenKeyEx(HKEY_LOCAL_MACHINE, outData.szContext, 0, 0, &hKey);

  000c0	128d300c	 addne       r3, sp, #0xC
  000c4	158d3000	 strne       r3, [sp]
  000c8	13a03000	 movne       r3, #0
  000cc	13a02000	 movne       r2, #0
  000d0	128d1010	 addne       r1, sp, #0x10
  000d4	13a0010a	 movne       r0, #0xA, 2
  000d8	1b000000	 blne        RegOpenKeyExW
  000dc		 |$LN9@InsertDevi|

; 128  :             }
; 129  :         }
; 130  : 
; 131  :     // if a valid context key is retrieved get information from registry
; 132  :     // and insert device driver wrapper if a list is using it.
; 133  :     if (hKey != NULL)

  000dc	e59d300c	 ldr         r3, [sp, #0xC]
  000e0	e3530000	 cmp         r3, #0
  000e4	0a000022	 beq         |$LN8@InsertDevi|

; 134  :         {
; 135  :         ContextList *pContextList = m_pContextListHead;

  000e8	e5965018	 ldr         r5, [r6, #0x18]
  000ec		 |$LL7@InsertDevi|

; 136  :         do
; 137  :             {
; 138  :             rc |= pContextList->InsertDevice(szDeviceName, pDevice, hKey);

  000ec	e5951000	 ldr         r1, [r5]
  000f0	e1a02007	 mov         r2, r7
  000f4	e1a00005	 mov         r0, r5
  000f8	e5914008	 ldr         r4, [r1, #8]
  000fc	e1a01009	 mov         r1, r9
  00100	e1a0e00f	 mov         lr, pc
  00104	e12fff14	 bx          r4

; 139  :             pContextList = (ContextList*)pContextList->Flink;

  00108	e5953004	 ldr         r3, [r5, #4]
  0010c	e1808008	 orr         r8, r0, r8
  00110	e3530000	 cmp         r3, #0
  00114	12435004	 subne       r5, r3, #4

; 140  :             }
; 141  :             while (pContextList != m_pContextListHead);

  00118	e5963018	 ldr         r3, [r6, #0x18]
  0011c	03a05000	 moveq       r5, #0
  00120	e1550003	 cmp         r5, r3
  00124	159d300c	 ldrne       r3, [sp, #0xC]
  00128	1affffef	 bne         |$LL7@InsertDevi|

; 142  : 
; 143  :         // if there is a list wanting the device then add it the list
; 144  :         if (rc != FALSE)

  0012c	e3580000	 cmp         r8, #0
  00130	0a00000d	 beq         |$LN27@InsertDevi|

; 145  :             {
; 146  :             Lock();

  00134	e1a00006	 mov         r0, r6
  00138	eb000000	 bl          EnterCriticalSection

; 147  : #pragma warning(push)
; 148  : #pragma warning(disable:4127)
; 149  :             InsertHeadList(m_pDeviceBaseHead, pDevice);

  0013c	e5963014	 ldr         r3, [r6, #0x14]
  00140	e2872004	 add         r2, r7, #4

; 150  : #pragma warning(pop)
; 151  :             Unlock();

  00144	e1a00006	 mov         r0, r6
  00148	e3530000	 cmp         r3, #0
  0014c	12831004	 addne       r1, r3, #4
  00150	03a01000	 moveq       r1, #0
  00154	e5913000	 ldr         r3, [r1]
  00158	e5871008	 str         r1, [r7, #8]
  0015c	e5873004	 str         r3, [r7, #4]
  00160	e5832004	 str         r2, [r3, #4]
  00164	e5812000	 str         r2, [r1]
  00168	eb000000	 bl          LeaveCriticalSection
  0016c		 |$LN27@InsertDevi|

; 152  :             }
; 153  : 
; 154  :         RegCloseKey(hKey);

  0016c	e59d000c	 ldr         r0, [sp, #0xC]
  00170	eb000000	 bl          RegCloseKey
  00174		 |$LN8@InsertDevi|

; 155  :         }
; 156  : 
; 157  :     return rc;

  00174	e59d0848	 ldr         r0, [sp, #0x848]
  00178	eb000000	 bl          __security_check_cookie

; 158  : }

  0017c	e1a00008	 mov         r0, r8
  00180	e3a0cb02	 mov         r12, #2, 22
  00184	e38cc04c	 orr         r12, r12, #0x4C
  00188	e08dd00c	 add         sp, sp, r12
  0018c	e8bd4ff0	 ldmia       sp!, {r4 - r11, lr}
  00190	e12fff1e	 bx          lr
  00194		 |$LN37@InsertDevi|
  00194		 |$LN38@InsertDevi|
  00194	00000000	 DCD         |__security_cookie|
  00198		 |$LN39@InsertDevi|
  00198	fffff7b4	 DCD         0xfffff7b4
  0019c		 |$M33537|

			 ENDP  ; |?InsertDevice@DeviceMediator@@QAAHPBGPAVDeviceBase@@@Z|, DeviceMediator::InsertDevice

	EXPORT	|?FindDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z| ; DeviceMediator::FindDevice
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.h

  00000			 AREA	 |.pdata|, PDATA
|$T33587| DCD	|$LN30@FindDevice|
	DCD	0x40002201
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?FindDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z| PROC ; DeviceMediator::FindDevice

; 165  : {

  00000		 |$LN30@FindDevice|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004		 |$M33584|
  00004	e1a07001	 mov         r7, r1
  00008	e1a06000	 mov         r6, r0

; 166  :     Lock();

  0000c	eb000000	 bl          EnterCriticalSection

; 167  :     DeviceBase *pDevice = NULL;
; 168  :     DeviceBase *pCurrent = (DeviceBase*)m_pDeviceBaseHead->Flink;

  00010	e5962014	 ldr         r2, [r6, #0x14]
  00014	e3a05000	 mov         r5, #0
  00018	e5923004	 ldr         r3, [r2, #4]
  0001c	e3530000	 cmp         r3, #0
  00020	12434004	 subne       r4, r3, #4
  00024	03a04000	 moveq       r4, #0

; 169  :     while (pCurrent != m_pDeviceBaseHead)

  00028	e1540002	 cmp         r4, r2
  0002c	0a000010	 beq         |$LN2@FindDevice|
  00030		 |$LL3@FindDevice|

; 170  :         {
; 171  :         if (*pCurrent == szDeviceName)

  00030	e2940010	 adds        r0, r4, #0x10
  00034	0a000005	 beq         |$LN12@FindDevice|
  00038	e3570000	 cmp         r7, #0
  0003c	0a000003	 beq         |$LN12@FindDevice|
  00040	e1a01007	 mov         r1, r7
  00044	eb000000	 bl          _wcsicmp
  00048	e3500000	 cmp         r0, #0
  0004c	0a000007	 beq         |$LN23@FindDevice|
  00050		 |$LN12@FindDevice|

; 174  :             break;
; 175  :             }
; 176  :         pCurrent = (DeviceBase*)pCurrent->Flink;

  00050	e5943004	 ldr         r3, [r4, #4]
  00054	e3530000	 cmp         r3, #0
  00058	12434004	 subne       r4, r3, #4
  0005c	e5963014	 ldr         r3, [r6, #0x14]
  00060	03a04000	 moveq       r4, #0
  00064	e1540003	 cmp         r4, r3
  00068	1afffff0	 bne         |$LL3@FindDevice|

; 169  :     while (pCurrent != m_pDeviceBaseHead)

  0006c	ea000000	 b           |$LN2@FindDevice|
  00070		 |$LN23@FindDevice|

; 172  :             {
; 173  :             pDevice = pCurrent;

  00070	e1a05004	 mov         r5, r4
  00074		 |$LN2@FindDevice|

; 177  :         }
; 178  : 
; 179  :     Unlock();

  00074	e1a00006	 mov         r0, r6
  00078	eb000000	 bl          LeaveCriticalSection

; 180  :     return pDevice;
; 181  : }

  0007c	e1a00005	 mov         r0, r5
  00080	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  00084	e12fff1e	 bx          lr
  00088		 |$M33585|

			 ENDP  ; |?FindDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z|, DeviceMediator::FindDevice

	EXPORT	|?RemoveDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z| ; DeviceMediator::RemoveDevice
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.h

  00000			 AREA	 |.pdata|, PDATA
|$T33612| DCD	|$LN22@RemoveDevi|
	DCD	0x40002801
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?RemoveDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z| PROC ; DeviceMediator::RemoveDevice

; 189  : {

  00000		 |$LN22@RemoveDevi|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004		 |$M33609|
  00004	e1a07001	 mov         r7, r1
  00008	e1a05000	 mov         r5, r0

; 190  :     DeviceBase *pDevice;
; 191  : 
; 192  :     // check for valid items
; 193  :     if (*szDeviceName == NULL) return NULL;

  0000c	e1d730b0	 ldrh        r3, [r7]
  00010	e3530000	 cmp         r3, #0
  00014	03a04000	 moveq       r4, #0
  00018	0a00001d	 beq         |$LN9@RemoveDevi|

; 194  : 
; 195  :     Lock();

  0001c	e1a00005	 mov         r0, r5
  00020	eb000000	 bl          EnterCriticalSection

; 196  :     pDevice = FindDevice(szDeviceName);

  00024	e1a01007	 mov         r1, r7
  00028	e1a00005	 mov         r0, r5
  0002c	eb000000	 bl          |?FindDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z|
  00030	e1b04000	 movs        r4, r0

; 197  :     if (pDevice != NULL)

  00034	0a000014	 beq         |$LN1@RemoveDevi|

; 198  :         {
; 199  :         ContextList *pContextList = m_pContextListHead;

  00038	e5956018	 ldr         r6, [r5, #0x18]
  0003c		 |$LL6@RemoveDevi|

; 200  :         do
; 201  :             {
; 202  :             pContextList->RemoveDevice(szDeviceName, pDevice);

  0003c	e5963000	 ldr         r3, [r6]
  00040	e1a02004	 mov         r2, r4
  00044	e1a01007	 mov         r1, r7
  00048	e593300c	 ldr         r3, [r3, #0xC]
  0004c	e1a00006	 mov         r0, r6
  00050	e1a0e00f	 mov         lr, pc
  00054	e12fff13	 bx          r3

; 203  :             pContextList = (ContextList*)pContextList->Flink;

  00058	e5963004	 ldr         r3, [r6, #4]
  0005c	e3530000	 cmp         r3, #0
  00060	12436004	 subne       r6, r3, #4

; 204  :             }
; 205  :             while (pContextList != m_pContextListHead);

  00064	e5953018	 ldr         r3, [r5, #0x18]
  00068	03a06000	 moveq       r6, #0
  0006c	e1560003	 cmp         r6, r3
  00070	1afffff1	 bne         |$LL6@RemoveDevi|

; 206  : #pragma warning(push)
; 207  : #pragma warning(disable:4127)
; 208  :         RemoveEntryList(pDevice);

  00074	e5942008	 ldr         r2, [r4, #8]
  00078	e5943004	 ldr         r3, [r4, #4]
  0007c	e5823000	 str         r3, [r2]
  00080	e5942004	 ldr         r2, [r4, #4]
  00084	e5943008	 ldr         r3, [r4, #8]
  00088	e5823004	 str         r3, [r2, #4]
  0008c		 |$LN1@RemoveDevi|

; 209  : #pragma warning(pop)
; 210  :         }
; 211  :     Unlock();

  0008c	e1a00005	 mov         r0, r5
  00090	eb000000	 bl          LeaveCriticalSection

; 212  :     
; 213  :     return pDevice;

  00094		 |$LN9@RemoveDevi|

; 214  : }

  00094	e1a00004	 mov         r0, r4
  00098	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  0009c	e12fff1e	 bx          lr
  000a0		 |$M33610|

			 ENDP  ; |?RemoveDevice@DeviceMediator@@QAAPAVDeviceBase@@PBG@Z|, DeviceMediator::RemoveDevice

	EXPORT	|?SendMessageW@DeviceMediator@@QAAHIIKPAXK0KPAK@Z| ; DeviceMediator::SendMessageW
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.h

  00000			 AREA	 |.pdata|, PDATA
|$T33641| DCD	|$LN19@SendMessag|
	DCD	0x40002a02
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SendMessageW@DeviceMediator@@QAAHIIKPAXK0KPAK@Z| PROC ; DeviceMediator::SendMessageW

; 229  : {

  00000		 |$LN19@SendMessag|
  00000	e92d4ff0	 stmdb       sp!, {r4 - r11, lr}
  00004	e24dd010	 sub         sp, sp, #0x10
  00008		 |$M33638|
  00008	e1a0a003	 mov         r10, r3
  0000c	e1a0b002	 mov         r11, r2
  00010	e1a06001	 mov         r6, r1
  00014	e1a09000	 mov         r9, r0

; 230  :     BOOL rc = FALSE;
; 231  :     
; 232  :     // find list
; 233  :     Lock();

  00018	e3a05000	 mov         r5, #0
  0001c	eb000000	 bl          EnterCriticalSection

; 234  :     ContextList *pContextList = m_pContextListHead;

  00020	e5994018	 ldr         r4, [r9, #0x18]
  00024	e1a00004	 mov         r0, r4
  00028		 |$LL4@SendMessag|

; 235  :     do
; 236  :         {
; 237  :         if (pContextList->GetContextListId() == listId)

  00028	e590e00c	 ldr         lr, [r0, #0xC]
  0002c	e15e0006	 cmp         lr, r6
  00030	0a000006	 beq         |$LN16@SendMessag|

; 247  :              break;
; 248  :             }
; 249  :         pContextList = (ContextList*)pContextList->Flink;

  00034	e590e004	 ldr         lr, [r0, #4]
  00038	e35e0000	 cmp         lr, #0
  0003c	124e0004	 subne       r0, lr, #4
  00040	03a00000	 moveq       r0, #0

; 250  :         }
; 251  :         while (pContextList != m_pContextListHead);

  00044	e1500004	 cmp         r0, r4
  00048	1afffff6	 bne         |$LL4@SendMessag|
  0004c	ea00000f	 b           |$LN2@SendMessag|
  00050		 |$LN16@SendMessag|

; 238  :             {
; 239  :              rc = pContextList->SendIoControl(dwParam, 
; 240  :                     dwIoControlCode, 
; 241  :                     lpInBuf, 
; 242  :                     nInBufSize, 
; 243  :                     lpOutBuf, 
; 244  :                     nOutBufSize, 
; 245  :                     lpBytesReturned
; 246  :                     );

  00050	e5903000	 ldr         r3, [r0]
  00054	e59d4044	 ldr         r4, [sp, #0x44]
  00058	e59d5040	 ldr         r5, [sp, #0x40]
  0005c	e59d603c	 ldr         r6, [sp, #0x3C]
  00060	e59d7038	 ldr         r7, [sp, #0x38]
  00064	e5938010	 ldr         r8, [r3, #0x10]
  00068	e59d3034	 ldr         r3, [sp, #0x34]
  0006c	e1a0200a	 mov         r2, r10
  00070	e1a0100b	 mov         r1, r11
  00074	e58d400c	 str         r4, [sp, #0xC]
  00078	e58d5008	 str         r5, [sp, #8]
  0007c	e58d6004	 str         r6, [sp, #4]
  00080	e58d7000	 str         r7, [sp]
  00084	e1a0e00f	 mov         lr, pc
  00088	e12fff18	 bx          r8
  0008c	e1a05000	 mov         r5, r0
  00090		 |$LN2@SendMessag|

; 252  :     Unlock();

  00090	e1a00009	 mov         r0, r9
  00094	eb000000	 bl          LeaveCriticalSection

; 253  :     
; 254  :     return rc;
; 255  : }

  00098	e1a00005	 mov         r0, r5
  0009c	e28dd010	 add         sp, sp, #0x10
  000a0	e8bd4ff0	 ldmia       sp!, {r4 - r11, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$M33639|

			 ENDP  ; |?SendMessageW@DeviceMediator@@QAAHIIKPAXK0KPAK@Z|, DeviceMediator::SendMessageW


  00000			 AREA	 |.pdata|, PDATA
|$T33660| DCD	|$LN10@scalar@2|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GStreamDevice@@UAAPAXI@Z| PROC	; StreamDevice::`scalar deleting destructor'
  00000		 |$LN10@scalar@2|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M33657|
  00004	e1a04000	 mov         r4, r0
  00008	e59f3014	 ldr         r3, [pc, #0x14]
  0000c	e3110001	 tst         r1, #1
  00010	e5843000	 str         r3, [r4]
  00014	1b000000	 blne        |??3@YAXPAX@Z|
  00018	e1a00004	 mov         r0, r4
  0001c	e8bd4010	 ldmia       sp!, {r4, lr}
  00020	e12fff1e	 bx          lr
  00024		 |$LN11@scalar@2|
  00024		 |$LN12@scalar@2|
  00024	00000000	 DCD         |??_7DeviceBase@@6B@|
  00028		 |$M33658|

			 ENDP  ; |??_GStreamDevice@@UAAPAXI@Z|, StreamDevice::`scalar deleting destructor'

	EXPORT	|??0DVFSList@@QAA@XZ|			; DVFSList::DVFSList
	EXPORT	|??_7DVFSList@@6B@| [ DATA ]		; DVFSList::`vftable'
	IMPORT	|?Uninitialize@DVFSList@@UAAHXZ|	; DVFSList::Uninitialize
	IMPORT	|?Initialize@DVFSList@@UAAHXZ|		; DVFSList::Initialize
	IMPORT	|?InsertDevice@DVFSList@@UAAHPBGPAVDeviceBase@@PAUHKEY__@@@Z| ; DVFSList::InsertDevice
	IMPORT	|?RemoveDevice@DVFSList@@UAAHPBGPAVDeviceBase@@@Z| ; DVFSList::RemoveDevice
	IMPORT	|?SendIoControl@DVFSList@@UAAHKKPAXK0KPAK@Z| ; DVFSList::SendIoControl
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\dvfslist.h

  00000			 AREA	 |.pdata|, PDATA
|$T33675| DCD	|$LN7@DVFSList|
	DCD	0x40000800

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7DVFSList@@6B@| DCD |?Uninitialize@DVFSList@@UAAHXZ| ; DVFSList::`vftable'
	DCD	|?Initialize@DVFSList@@UAAHXZ|
	DCD	|?InsertDevice@DVFSList@@UAAHPBGPAVDeviceBase@@PAUHKEY__@@@Z|
	DCD	|?RemoveDevice@DVFSList@@UAAHPBGPAVDeviceBase@@@Z|
	DCD	|?SendIoControl@DVFSList@@UAAHKKPAXK0KPAK@Z|
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0DVFSList@@QAA@XZ| PROC		; DVFSList::DVFSList

; 83   :         {

  00000		 |$LN7@DVFSList|
  00000		 |$M33672|
  00000	e59f3014	 ldr         r3, [pc, #0x14]
  00004	e3a02000	 mov         r2, #0

; 84   :         m_idContextList = DEVICEMEDIATOR_DVFS_LIST;

  00008	e3a01002	 mov         r1, #2
  0000c	e5803000	 str         r3, [r0]
  00010	e5802024	 str         r2, [r0, #0x24]
  00014	e580100c	 str         r1, [r0, #0xC]

; 85   :         }

  00018	e12fff1e	 bx          lr
  0001c		 |$LN8@DVFSList|
  0001c		 |$LN9@DVFSList|
  0001c	00000000	 DCD         |??_7DVFSList@@6B@|
  00020		 |$M33673|

			 ENDP  ; |??0DVFSList@@QAA@XZ|, DVFSList::DVFSList

	EXPORT	|?Initialize@DeviceMediator@@IAAHXZ|	; DeviceMediator::Initialize
	IMPORT	|??2@YAPAXI@Z|				; operator new
	IMPORT	|InitializeCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T33739| DCD	|$LN38@Initialize@3|
	DCD	0x40004401
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Initialize@DeviceMediator@@IAAHXZ| PROC ; DeviceMediator::Initialize

; 59   : {

  00000		 |$LN38@Initialize@3|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M33736|
  00004	e1a04000	 mov         r4, r0

; 60   :     BOOL rc = FALSE;
; 61   :     ContextList *pDVFSContextList;
; 62   :     ContextList *pDeviceContextList;
; 63   :     
; 64   :     ::InitializeCriticalSection(&m_cs);    

  00008	e3a05000	 mov         r5, #0
  0000c	eb000000	 bl          InitializeCriticalSection

; 65   :     m_pContextListHead = NULL;

  00010	e3a06000	 mov         r6, #0

; 66   : 
; 67   :     // initialize device base list.  Need 1 dummy stream device in the list
; 68   :     DeviceBase* pDevice = new StreamDevice();

  00014	e3a00e11	 mov         r0, #0x11, 28
  00018	e5846018	 str         r6, [r4, #0x18]
  0001c	eb000000	 bl          |??2@YAPAXI@Z|
  00020	e3500000	 cmp         r0, #0
  00024	159f30e0	 ldrne       r3, [pc, #0xE0]
  00028	1580600c	 strne       r6, [r0, #0xC]
  0002c	11c061b0	 strneh      r6, [r0, #0x10]
  00030	15803000	 strne       r3, [r0]
  00034	03a00000	 moveq       r0, #0

; 69   :     if (pDevice == NULL) goto cleanUp;

  00038	e3500000	 cmp         r0, #0
  0003c	0a00002d	 beq         |$cleanUp$33019|

; 70   :     InitializeListHead(pDevice);

  00040	e2803004	 add         r3, r0, #4
  00044	e5803008	 str         r3, [r0, #8]
  00048	e5803004	 str         r3, [r0, #4]

; 71   :     m_pDeviceBaseHead = pDevice;

  0004c	e5840014	 str         r0, [r4, #0x14]

; 72   : 
; 73   :     // instantiate DVFS device list
; 74   :     pDVFSContextList = new DVFSList();

  00050	e3a00028	 mov         r0, #0x28
  00054	eb000000	 bl          |??2@YAPAXI@Z|
  00058	e3500000	 cmp         r0, #0
  0005c	159f30a4	 ldrne       r3, [pc, #0xA4]
  00060	13a02002	 movne       r2, #2
  00064	15806024	 strne       r6, [r0, #0x24]
  00068	15803000	 strne       r3, [r0]
  0006c	1580200c	 strne       r2, [r0, #0xC]
  00070	03a00000	 moveq       r0, #0

; 75   :     InitializeListHead(pDVFSContextList);

  00074	e3500000	 cmp         r0, #0
  00078	12803004	 addne       r3, r0, #4
  0007c	03a03000	 moveq       r3, #0
  00080	e5803008	 str         r3, [r0, #8]
  00084	e5803004	 str         r3, [r0, #4]

; 76   :     m_pContextListHead = pDVFSContextList;

  00088	e5840018	 str         r0, [r4, #0x18]

; 77   :     pDVFSContextList->Initialize();

  0008c	e5903000	 ldr         r3, [r0]
  00090	e5933004	 ldr         r3, [r3, #4]
  00094	e1a0e00f	 mov         lr, pc
  00098	e12fff13	 bx          r3

; 78   : 
; 79   :     // initialize the device list
; 80   :     pDeviceContextList = new DeviceList();

  0009c	e3a00024	 mov         r0, #0x24
  000a0	eb000000	 bl          |??2@YAPAXI@Z|
  000a4	e3500000	 cmp         r0, #0
  000a8	159f3054	 ldrne       r3, [pc, #0x54]
  000ac	13a02001	 movne       r2, #1
  000b0	1580200c	 strne       r2, [r0, #0xC]
  000b4	15803000	 strne       r3, [r0]

; 81   : #pragma warning(push)
; 82   : #pragma warning(disable:4127)
; 83   :     InsertTailList(m_pContextListHead, pDeviceContextList);

  000b8	e5943018	 ldr         r3, [r4, #0x18]
  000bc	03a00000	 moveq       r0, #0
  000c0	e2802004	 add         r2, r0, #4
  000c4	e3530000	 cmp         r3, #0
  000c8	12831004	 addne       r1, r3, #4
  000cc	03a01000	 moveq       r1, #0
  000d0	e5913004	 ldr         r3, [r1, #4]
  000d4	e5801004	 str         r1, [r0, #4]
  000d8	e5803008	 str         r3, [r0, #8]
  000dc	e5832000	 str         r2, [r3]
  000e0	e5812004	 str         r2, [r1, #4]

; 84   : #pragma warning(pop)
; 85   :     pDeviceContextList->Initialize();

  000e4	e5903000	 ldr         r3, [r0]
  000e8	e5933004	 ldr         r3, [r3, #4]
  000ec	e1a0e00f	 mov         lr, pc
  000f0	e12fff13	 bx          r3

; 86   :         
; 87   :     rc = TRUE;

  000f4	e3a05001	 mov         r5, #1
  000f8		 |$cleanUp$33019|

; 88   : cleanUp:
; 89   :     return rc;
; 90   : }

  000f8	e1a00005	 mov         r0, r5
  000fc	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00100	e12fff1e	 bx          lr
  00104		 |$LN39@Initialize@3|
  00104		 |$LN40@Initialize@3|
  00104	00000000	 DCD         |??_7DeviceList@@6B@|
  00108		 |$LN41@Initialize@3|
  00108	00000000	 DCD         |??_7DVFSList@@6B@|
  0010c		 |$LN42@Initialize@3|
  0010c	00000000	 DCD         |??_7StreamDevice@@6B@|
  00110		 |$M33737|

			 ENDP  ; |?Initialize@DeviceMediator@@IAAHXZ|, DeviceMediator::Initialize

	EXPORT	|?CreateDeviceMediator@DeviceMediator@@SAPAV1@XZ| ; DeviceMediator::CreateDeviceMediator
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.h

  00000			 AREA	 |.bss|, NOINIT
|?_pDeviceMediator@?1??CreateDeviceMediator@DeviceMediator@@SAPAV2@XZ@4PAV2@A| % 0x4 ; `DeviceMediator::CreateDeviceMediator'::`2'::_pDeviceMediator

  00000			 AREA	 |.pdata|, PDATA
|$T33760| DCD	|$LN12@CreateDevi|
	DCD	0x40001401
; Function compile flags: /Ogspy
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\pm\devicemediator\devicemediator.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?CreateDeviceMediator@DeviceMediator@@SAPAV1@XZ| PROC ; DeviceMediator::CreateDeviceMediator

; 31   : {

  00000		 |$LN12@CreateDevi|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M33757|

; 32   :     static DeviceMediator *_pDeviceMediator = NULL;
; 33   : 
; 34   :     // device mediator is a singleton
; 35   :     if (_pDeviceMediator == NULL)

  00004	e59f4040	 ldr         r4, [pc, #0x40]
  00008	e5940000	 ldr         r0, [r4]
  0000c	e3500000	 cmp         r0, #0
  00010	1a00000b	 bne         |$LN1@CreateDevi|

; 36   :         {
; 37   :         _pDeviceMediator = new DeviceMediator();

  00014	e3a0001c	 mov         r0, #0x1C
  00018	eb000000	 bl          |??2@YAPAXI@Z|
  0001c	e3500000	 cmp         r0, #0
  00020	13a03000	 movne       r3, #0
  00024	15803014	 strne       r3, [r0, #0x14]
  00028	15803018	 strne       r3, [r0, #0x18]
  0002c	03a00000	 moveq       r0, #0
  00030	e5840000	 str         r0, [r4]

; 38   : 
; 39   :         if (_pDeviceMediator)

  00034	e3500000	 cmp         r0, #0
  00038	0a000001	 beq         |$LN1@CreateDevi|

; 40   :             _pDeviceMediator->Initialize();

  0003c	eb000000	 bl          |?Initialize@DeviceMediator@@IAAHXZ|
  00040	e5940000	 ldr         r0, [r4]
  00044		 |$LN1@CreateDevi|

; 41   :         }
; 42   :     return _pDeviceMediator;
; 43   : }

  00044	e8bd4010	 ldmia       sp!, {r4, lr}
  00048	e12fff1e	 bx          lr
  0004c		 |$LN13@CreateDevi|
  0004c		 |$LN14@CreateDevi|
  0004c	00000000	 DCD         |?_pDeviceMediator@?1??CreateDeviceMediator@DeviceMediator@@SAPAV2@XZ@4PAV2@A|
  00050		 |$M33758|

			 ENDP  ; |?CreateDeviceMediator@DeviceMediator@@SAPAV1@XZ|, DeviceMediator::CreateDeviceMediator

	END
