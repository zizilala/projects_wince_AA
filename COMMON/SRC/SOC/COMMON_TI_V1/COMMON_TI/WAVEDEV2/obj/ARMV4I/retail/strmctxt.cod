; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\WAVEDEV2\strmctxt.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.rdata|, DATA, READONLY
|GainMap| DCW	0xf1ad
	DCW	0xe429
	DCW	0xd765
	DCW	0xcb59
	DCW	0xbff9
	DCW	0xb53b
	DCW	0xab18
	DCW	0xa186
	DCW	0x987d
	DCW	0x8ff5
	DCW	0x87e8
	DCW	0x804d
	DCW	0x7920
	DCW	0x7259
	DCW	0x6bf4
	DCW	0x65ea
	DCW	0x6036
	DCW	0x5ad5
	DCW	0x55c0
	DCW	0x50f4
	DCW	0x4c6d
	DCW	0x4826
	DCW	0x441d
	DCW	0x404d
	DCW	0x3cb5
	DCW	0x394f
	DCW	0x361a
	DCW	0x3314
	DCW	0x3038
	DCW	0x2d86
	DCW	0x2afa
	DCW	0x2892
	DCW	0x264d
	DCW	0x2429
	DCW	0x2223
	DCW	0x203a
	DCW	0x1e6c
	DCW	0x1cb9
	DCW	0x1b1d
	DCW	0x1999
	DCW	0x182a
	DCW	0x16d0
	DCW	0x158a
	DCW	0x1455
	DCW	0x1332
	DCW	0x121f
	DCW	0x111c
	DCW	0x1027
	DCW	0xf3f
	DCW	0xe65
	DCW	0xd97
	DCW	0xcd4
	DCW	0xc1c
	DCW	0xb6f
	DCW	0xacb
	DCW	0xa31
	DCW	0x99f
	DCW	0x915
	DCW	0x893
	DCW	0x818
	DCW	0x7a4
	DCW	0x737
	DCW	0x6cf
	DCW	0x66e
	DCW	0x612
	DCW	0x5bb
	DCW	0x569
	DCW	0x51b
	DCW	0x4d2
	DCW	0x48d
	DCW	0x44c
	DCW	0x40e
	DCW	0x3d4
	DCW	0x39d
	DCW	0x369
	DCW	0x339
	DCW	0x30a
	DCW	0x2df
	DCW	0x2b6
	DCW	0x28f
	DCW	0x26a
	DCW	0x248
	DCW	0x227
	DCW	0x208
	DCW	0x1eb
	DCW	0x1cf
	DCW	0x1b6
	DCW	0x19d
	DCW	0x186
	DCW	0x170
	DCW	0x15b
	DCW	0x148
	DCW	0x136
	DCW	0x124
	DCW	0x114
	DCW	0x104
	DCW	0xf6
	DCW	0xe8
	DCW	0xdb
	DCW	0xcf
	DCW	0xc3
	DCW	0xb8
	DCW	0xae
	DCW	0xa4
	DCW	0x9b
	DCW	0x92
	DCW	0x8a
	DCW	0x82
	DCW	0x7b
	DCW	0x74
	DCW	0x6e
	DCW	0x67
	DCW	0x62
	DCW	0x5c
	DCW	0x57
	DCW	0x52
	DCW	0x4d
	DCW	0x49
	DCW	0x45
	DCW	0x41
	DCW	0x3d
	DCW	0x3a
	DCW	0x37
	DCW	0x34
	DCW	0x31
	DCW	0x2e
	DCW	0x2b
	DCW	0x29
	DCW	0x27
	DCW	0x24
	DCW	0x22
	DCW	0x20
	DCW	0x1f
	DCW	0x1d
	DCW	0x1b
	DCW	0x1a
	DCW	0x18
	DCW	0x17
	DCW	0x15
	DCW	0x14
	DCW	0x13
	DCW	0x12
	DCW	0x11
	DCW	0x10
	DCW	0xf
	DCW	0xe
	DCW	0xd
	DCW	0xd
	DCW	0xc
	DCW	0xb
	DCW	0xb
	DCW	0xa
	DCW	0x9
	DCW	0x9
	DCW	0x8
	DCW	0x8
	DCW	0x7
	DCW	0x7
	DCW	0x6
	DCW	0x6
	DCW	0x6
	DCW	0x5
	DCW	0x5
	DCW	0x5
	DCW	0x4
	DCW	0x4
	DCW	0x4
	DCW	0x4
	DCW	0x3
	DCW	0x3
	DCW	0x3
	DCW	0x3
	DCW	0x3
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	EXPORT	|??0StreamContext@@QAA@XZ|		; StreamContext::StreamContext
	EXPORT	|??_7StreamContext@@6B@| [ DATA ]	; StreamContext::`vftable'
	EXPORT	|?Open@StreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z| ; StreamContext::Open
	EXPORT	|?Close@StreamContext@@UAAKXZ|		; StreamContext::Close
	EXPORT	|?GetPos@StreamContext@@UAAKPAUmmtime_tag@@@Z| ; StreamContext::GetPos
	EXPORT	|?Run@StreamContext@@UAAKXZ|		; StreamContext::Run
	EXPORT	|?Stop@StreamContext@@UAAKXZ|		; StreamContext::Stop
	EXPORT	|?Reset@StreamContext@@UAAKXZ|		; StreamContext::Reset
	EXPORT	|?DoCallbackReturnBuffer@StreamContext@@UAAXPAUwavehdr_tag@@@Z| ; StreamContext::DoCallbackReturnBuffer
	EXPORT	|?DoCallbackStreamOpened@StreamContext@@UAAXXZ| ; StreamContext::DoCallbackStreamOpened
	EXPORT	|?DoCallbackStreamClosed@StreamContext@@UAAXXZ| ; StreamContext::DoCallbackStreamClosed
	EXPORT	|?QueueBuffer@StreamContext@@UAAKPAUwavehdr_tag@@@Z| ; StreamContext::QueueBuffer
	EXPORT	|?GainChange@StreamContext@@UAAXXZ|	; StreamContext::GainChange
	EXPORT	|?IsExclusive@StreamContext@@UAAHXZ|	; StreamContext::IsExclusive
	IMPORT	|??_EStreamContext@@UAAPAXI@Z|, WEAK |??_GStreamContext@@UAAPAXI@Z| ; StreamContext::`vector deleting destructor', StreamContext::`scalar deleting destructor'
	IMPORT	|_purecall|
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\wavedev2\strmctxt.cpp

  00000			 AREA	 |.pdata|, PDATA
|$T35619| DCD	|$LN5@StreamCont|
	DCD	0x40000500

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_7StreamContext@@6B@| DCD |??_EStreamContext@@UAAPAXI@Z| ; StreamContext::`vftable'
	DCD	|?Open@StreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z|
	DCD	|?Close@StreamContext@@UAAKXZ|
	DCD	|?GetPos@StreamContext@@UAAKPAUmmtime_tag@@@Z|
	DCD	|?Run@StreamContext@@UAAKXZ|
	DCD	|?Stop@StreamContext@@UAAKXZ|
	DCD	|?Reset@StreamContext@@UAAKXZ|
	DCD	|_purecall|
	DCD	|_purecall|
	DCD	|?DoCallbackReturnBuffer@StreamContext@@UAAXPAUwavehdr_tag@@@Z|
	DCD	|?DoCallbackStreamOpened@StreamContext@@UAAXXZ|
	DCD	|?DoCallbackStreamClosed@StreamContext@@UAAXXZ|
	DCD	|?QueueBuffer@StreamContext@@UAAKPAUwavehdr_tag@@@Z|
	DCD	|?GainChange@StreamContext@@UAAXXZ|
	DCD	|?IsExclusive@StreamContext@@UAAHXZ|
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??0StreamContext@@QAA@XZ| PROC	; StreamContext::StreamContext

; 39   : {

  00000		 |$LN5@StreamCont|
  00000		 |$M35616|
  00000	e1a02000	 mov         r2, r0
  00004	e59f3004	 ldr         r3, [pc, #4]

; 40   : };

  00008	e5823000	 str         r3, [r2]
  0000c	e12fff1e	 bx          lr
  00010		 |$LN6@StreamCont|
  00010		 |$LN7@StreamCont|
  00010	00000000	 DCD         |??_7StreamContext@@6B@|
  00014		 |$M35617|

			 ENDP  ; |??0StreamContext@@QAA@XZ|, StreamContext::StreamContext

	EXPORT	|??1StreamContext@@UAA@XZ|		; StreamContext::~StreamContext

  00000			 AREA	 |.pdata|, PDATA
|$T35629| DCD	|$LN5@StreamCont@2|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??1StreamContext@@UAA@XZ| PROC	; StreamContext::~StreamContext

; 43   : {

  00000		 |$LN5@StreamCont@2|
  00000		 |$M35626|
  00000	e59f3004	 ldr         r3, [pc, #4]
  00004	e5803000	 str         r3, [r0]

; 44   : };

  00008	e12fff1e	 bx          lr
  0000c		 |$LN6@StreamCont@2|
  0000c		 |$LN7@StreamCont@2|
  0000c	00000000	 DCD         |??_7StreamContext@@6B@|
  00010		 |$M35627|

			 ENDP  ; |??1StreamContext@@UAA@XZ|, StreamContext::~StreamContext

	EXPORT	|?StillPlaying@StreamContext@@QAAHXZ|	; StreamContext::StillPlaying

  00000			 AREA	 |.pdata|, PDATA
|$T35643| DCD	|$LN7@StillPlayi|
	DCD	0x40000500
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?StillPlaying@StreamContext@@QAAHXZ| PROC ; StreamContext::StillPlaying

; 47   : {

  00000		 |$LN7@StillPlayi|
  00000		 |$M35640|

; 48   :     return (m_lpWaveHdrHead!=NULL);

  00000	e5903038	 ldr         r3, [r0, #0x38]
  00004	e3530000	 cmp         r3, #0
  00008	13a00001	 movne       r0, #1
  0000c	03a00000	 moveq       r0, #0

; 49   : }

  00010	e12fff1e	 bx          lr
  00014		 |$M35641|

			 ENDP  ; |?StillPlaying@StreamContext@@QAAHXZ|, StreamContext::StillPlaying

	EXPORT	|?GetByteCount@StreamContext@@QAAKXZ|	; StreamContext::GetByteCount

  00000			 AREA	 |.pdata|, PDATA
|$T35653| DCD	|$LN5@GetByteCou|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetByteCount@StreamContext@@QAAKXZ| PROC ; StreamContext::GetByteCount

; 52   : {

  00000		 |$LN5@GetByteCou|
  00000		 |$M35650|

; 53   :     return m_dwByteCount;

  00000	e590004c	 ldr         r0, [r0, #0x4C]

; 54   : }

  00004	e12fff1e	 bx          lr
  00008		 |$M35651|

			 ENDP  ; |?GetByteCount@StreamContext@@QAAKXZ|, StreamContext::GetByteCount

	EXPORT	|?GetWaveFormat@StreamContext@@QAAPAUtWAVEFORMATEX@@XZ| ; StreamContext::GetWaveFormat

  00000			 AREA	 |.pdata|, PDATA
|$T35663| DCD	|$LN5@GetWaveFor|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetWaveFormat@StreamContext@@QAAPAUtWAVEFORMATEX@@XZ| PROC ; StreamContext::GetWaveFormat

; 57   : {

  00000		 |$LN5@GetWaveFor|
  00000		 |$M35660|

; 58   :     return &m_WaveFormat;

  00000	e2800024	 add         r0, r0, #0x24

; 59   : }

  00004	e12fff1e	 bx          lr
  00008		 |$M35661|

			 ENDP  ; |?GetWaveFormat@StreamContext@@QAAPAUtWAVEFORMATEX@@XZ|, StreamContext::GetWaveFormat

	EXPORT	|?GetDeviceContext@StreamContext@@QAAPAVDeviceContext@@XZ| ; StreamContext::GetDeviceContext

  00000			 AREA	 |.pdata|, PDATA
|$T35673| DCD	|$LN5@GetDeviceC|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetDeviceContext@StreamContext@@QAAPAVDeviceContext@@XZ| PROC ; StreamContext::GetDeviceContext

; 62   : {

  00000		 |$LN5@GetDeviceC|
  00000		 |$M35670|

; 63   :     return m_pDeviceContext;

  00000	e5900050	 ldr         r0, [r0, #0x50]

; 64   : }

  00004	e12fff1e	 bx          lr
  00008		 |$M35671|

			 ENDP  ; |?GetDeviceContext@StreamContext@@QAAPAVDeviceContext@@XZ|, StreamContext::GetDeviceContext

	EXPORT	|?DoDriverCallback@StreamContext@@QAAXIKK@Z| ; StreamContext::DoDriverCallback

  00000			 AREA	 |.pdata|, PDATA
|$T35684| DCD	|$LN5@DoDriverCa|
	DCD	0x40000e02
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?DoDriverCallback@StreamContext@@QAAXIKK@Z| PROC ; StreamContext::DoDriverCallback

; 67   : {

  00000		 |$LN5@DoDriverCa|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M35681|
  00008	e1a05003	 mov         r5, r3
  0000c	e1a03002	 mov         r3, r2
  00010	e1a0e000	 mov         lr, r0

; 68   :     m_pfnCallback(m_hWave,msg,m_dwInstance,dwParam1,dwParam2);

  00014	e59e2020	 ldr         r2, [lr, #0x20]
  00018	e59e0018	 ldr         r0, [lr, #0x18]
  0001c	e59e401c	 ldr         r4, [lr, #0x1C]
  00020	e58d5000	 str         r5, [sp]
  00024	e1a0e00f	 mov         lr, pc
  00028	e12fff14	 bx          r4

; 69   : }

  0002c	e28dd004	 add         sp, sp, #4
  00030	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00034	e12fff1e	 bx          lr
  00038		 |$M35682|

			 ENDP  ; |?DoDriverCallback@StreamContext@@QAAXIKK@Z|, StreamContext::DoDriverCallback


  00000			 AREA	 |.pdata|, PDATA
|$T35696| DCD	|$LN7@DoCallback|
	DCD	0x40001002
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?DoCallbackReturnBuffer@StreamContext@@UAAXPAUwavehdr_tag@@@Z| PROC ; StreamContext::DoCallbackReturnBuffer

; 72   : {

  00000		 |$LN7@DoCallback|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M35693|
  00008	e1a03001	 mov         r3, r1
  0000c	e1a01000	 mov         r1, r0

; 73   :     DoDriverCallback(WOM_DONE,(DWORD)lpHdr,0);

  00010	e5912020	 ldr         r2, [r1, #0x20]
  00014	e5910018	 ldr         r0, [r1, #0x18]
  00018	e591401c	 ldr         r4, [r1, #0x1C]
  0001c	e3a01c03	 mov         r1, #3, 24
  00020	e3a05000	 mov         r5, #0
  00024	e38110bd	 orr         r1, r1, #0xBD
  00028	e58d5000	 str         r5, [sp]
  0002c	e1a0e00f	 mov         lr, pc
  00030	e12fff14	 bx          r4

; 74   : }

  00034	e28dd004	 add         sp, sp, #4
  00038	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0003c	e12fff1e	 bx          lr
  00040		 |$M35694|

			 ENDP  ; |?DoCallbackReturnBuffer@StreamContext@@UAAXPAUwavehdr_tag@@@Z|, StreamContext::DoCallbackReturnBuffer


  00000			 AREA	 |.pdata|, PDATA
|$T35707| DCD	|$LN7@DoCallback@2|
	DCD	0x40001002
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?DoCallbackStreamOpened@StreamContext@@UAAXXZ| PROC ; StreamContext::DoCallbackStreamOpened

; 77   : {

  00000		 |$LN7@DoCallback@2|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M35704|
  00008	e1a03000	 mov         r3, r0

; 78   :     DoDriverCallback(WOM_OPEN,0,0);

  0000c	e5932020	 ldr         r2, [r3, #0x20]
  00010	e5930018	 ldr         r0, [r3, #0x18]
  00014	e593401c	 ldr         r4, [r3, #0x1C]
  00018	e3a03c03	 mov         r3, #3, 24
  0001c	e3a05000	 mov         r5, #0
  00020	e38310bb	 orr         r1, r3, #0xBB
  00024	e3a03000	 mov         r3, #0
  00028	e58d5000	 str         r5, [sp]
  0002c	e1a0e00f	 mov         lr, pc
  00030	e12fff14	 bx          r4

; 79   : }

  00034	e28dd004	 add         sp, sp, #4
  00038	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0003c	e12fff1e	 bx          lr
  00040		 |$M35705|

			 ENDP  ; |?DoCallbackStreamOpened@StreamContext@@UAAXXZ|, StreamContext::DoCallbackStreamOpened


  00000			 AREA	 |.pdata|, PDATA
|$T35718| DCD	|$LN7@DoCallback@3|
	DCD	0x40000f02
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?DoCallbackStreamClosed@StreamContext@@UAAXXZ| PROC ; StreamContext::DoCallbackStreamClosed

; 82   : {

  00000		 |$LN7@DoCallback@3|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M35715|
  00008	e1a03000	 mov         r3, r0

; 83   :     DoDriverCallback(WOM_CLOSE,0,0);

  0000c	e5932020	 ldr         r2, [r3, #0x20]
  00010	e5930018	 ldr         r0, [r3, #0x18]
  00014	e593401c	 ldr         r4, [r3, #0x1C]
  00018	e3a05000	 mov         r5, #0
  0001c	e58d5000	 str         r5, [sp]
  00020	e3a03000	 mov         r3, #0
  00024	e3a01fef	 mov         r1, #0xEF, 30
  00028	e1a0e00f	 mov         lr, pc
  0002c	e12fff14	 bx          r4

; 84   : }

  00030	e28dd004	 add         sp, sp, #4
  00034	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00038	e12fff1e	 bx          lr
  0003c		 |$M35716|

			 ENDP  ; |?DoCallbackStreamClosed@StreamContext@@UAAXXZ|, StreamContext::DoCallbackStreamClosed

	EXPORT	|?ReturnBuffer@StreamContext@@QAAXPAUwavehdr_tag@@@Z| ; StreamContext::ReturnBuffer

  00000			 AREA	 |.pdata|, PDATA
|$T35727| DCD	|$LN5@ReturnBuff|
	DCD	0x40000c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?ReturnBuffer@StreamContext@@QAAXPAUwavehdr_tag@@@Z| PROC ; StreamContext::ReturnBuffer

; 88   : {

  00000		 |$LN5@ReturnBuff|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35724|
  00004	e1a02001	 mov         r2, r1

; 89   :     lpHdr->dwFlags &= ~WHDR_INQUEUE;

  00008	e5923010	 ldr         r3, [r2, #0x10]

; 90   :     lpHdr->dwFlags |= WHDR_DONE;
; 91   :     DoCallbackReturnBuffer(lpHdr);

  0000c	e3c33010	 bic         r3, r3, #0x10
  00010	e3833001	 orr         r3, r3, #1
  00014	e5823010	 str         r3, [r2, #0x10]
  00018	e5903000	 ldr         r3, [r0]
  0001c	e5933024	 ldr         r3, [r3, #0x24]
  00020	e1a0e00f	 mov         lr, pc
  00024	e12fff13	 bx          r3

; 92   : }

  00028	e49de004	 ldr         lr, [sp], #4
  0002c	e12fff1e	 bx          lr
  00030		 |$M35725|

			 ENDP  ; |?ReturnBuffer@StreamContext@@QAAXPAUwavehdr_tag@@@Z|, StreamContext::ReturnBuffer

	EXPORT	|?GetGain@StreamContext@@QAAKXZ|	; StreamContext::GetGain

  00000			 AREA	 |.pdata|, PDATA
|$T35737| DCD	|$LN5@GetGain|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetGain@StreamContext@@QAAKXZ| PROC	; StreamContext::GetGain

; 95   : {

  00000		 |$LN5@GetGain|
  00000		 |$M35734|

; 96   :     return m_dwGain;

  00000	e5900058	 ldr         r0, [r0, #0x58]

; 97   : }

  00004	e12fff1e	 bx          lr
  00008		 |$M35735|

			 ENDP  ; |?GetGain@StreamContext@@QAAKXZ|, StreamContext::GetGain

	EXPORT	|?SetGain@StreamContext@@QAAKK@Z|	; StreamContext::SetGain

  00000			 AREA	 |.pdata|, PDATA
|$T35748| DCD	|$LN5@SetGain|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SetGain@StreamContext@@QAAKK@Z| PROC	; StreamContext::SetGain

; 100  : {

  00000		 |$LN5@SetGain|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35745|
  00004	e1a02000	 mov         r2, r0

; 101  :     m_dwGain = dwGain;
; 102  :     GainChange();

  00008	e5923000	 ldr         r3, [r2]
  0000c	e5821058	 str         r1, [r2, #0x58]
  00010	e5933034	 ldr         r3, [r3, #0x34]
  00014	e1a0e00f	 mov         lr, pc
  00018	e12fff13	 bx          r3

; 103  :     return MMSYSERR_NOERROR;

  0001c	e3a00000	 mov         r0, #0

; 104  : }

  00020	e49de004	 ldr         lr, [sp], #4
  00024	e12fff1e	 bx          lr
  00028		 |$M35746|

			 ENDP  ; |?SetGain@StreamContext@@QAAKK@Z|, StreamContext::SetGain

	EXPORT	|?SetSecondaryGainClass@StreamContext@@QAAKK@Z| ; StreamContext::SetSecondaryGainClass

  00000			 AREA	 |.pdata|, PDATA
|$T35759| DCD	|$LN6@SetSeconda|
	DCD	0x40000f01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SetSecondaryGainClass@StreamContext@@QAAKK@Z| PROC ; StreamContext::SetSecondaryGainClass

; 107  : {

  00000		 |$LN6@SetSeconda|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35756|
  00004	e1a02000	 mov         r2, r0

; 108  :     if (GainClass>=SECONDARYGAINCLASSMAX)

  00008	e3510004	 cmp         r1, #4

; 109  :     {
; 110  :         return MMSYSERR_ERROR;

  0000c	23a00001	 movcs       r0, #1

; 115  : }

  00010	249de004	 ldrcs       lr, [sp], #4
  00014	212fff1e	 bxcs        lr

; 111  :     }
; 112  :     m_SecondaryGainClass=GainClass;
; 113  :     GainChange();

  00018	e5923000	 ldr         r3, [r2]
  0001c	e1a00002	 mov         r0, r2
  00020	e5933034	 ldr         r3, [r3, #0x34]
  00024	e582105c	 str         r1, [r2, #0x5C]
  00028	e1a0e00f	 mov         lr, pc
  0002c	e12fff13	 bx          r3

; 114  :     return MMSYSERR_NOERROR;

  00030	e3a00000	 mov         r0, #0

; 115  : }

  00034	e49de004	 ldr         lr, [sp], #4
  00038	e12fff1e	 bx          lr
  0003c		 |$M35757|

			 ENDP  ; |?SetSecondaryGainClass@StreamContext@@QAAKK@Z|, StreamContext::SetSecondaryGainClass


  00000			 AREA	 |.pdata|, PDATA
|$T35768| DCD	|$LN5@IsExclusiv|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?IsExclusive@StreamContext@@UAAHXZ| PROC ; StreamContext::IsExclusive

; 130  : {

  00000		 |$LN5@IsExclusiv|
  00000		 |$M35765|

; 131  :     return FALSE;

  00000	e3a00000	 mov         r0, #0

; 132  : }

  00004	e12fff1e	 bx          lr
  00008		 |$M35766|

			 ENDP  ; |?IsExclusive@StreamContext@@UAAHXZ|, StreamContext::IsExclusive

	IMPORT	|?GetDefaultStreamGain@DeviceContext@@QAAKXZ| ; DeviceContext::GetDefaultStreamGain
	IMPORT	|memcpy|

  00000			 AREA	 |.pdata|, PDATA
|$T35790| DCD	|$LN11@Open|
	DCD	0x40005a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Open@StreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z| PROC ; StreamContext::Open

; 135  : {

  00000		 |$LN11@Open|
  00000	e92d47f0	 stmdb       sp!, {r4 - r10, lr}
  00004		 |$M35787|
  00004	e1a07003	 mov         r7, r3
  00008	e1a08002	 mov         r8, r2
  0000c	e1a0a001	 mov         r10, r1
  00010	e1a09000	 mov         r9, r0

; 136  :     DWORD mmRet = MMSYSERR_NOERROR;
; 137  : 
; 138  :     m_RefCount = 1;

  00014	e3a03001	 mov         r3, #1
  00018	e589300c	 str         r3, [r9, #0xC]

; 139  :     m_pDeviceContext = pDeviceContext;

  0001c	e589a050	 str         r10, [r9, #0x50]

; 140  :     m_pfnCallback = (DRVCALLBACK *)lpWOD->dwCallback;

  00020	e5d86008	 ldrb        r6, [r8, #8]
  00024	e5d8e009	 ldrb        lr, [r8, #9]
  00028	e5d8400a	 ldrb        r4, [r8, #0xA]
  0002c	e5d8500b	 ldrb        r5, [r8, #0xB]
  00030	e186e40e	 orr         lr, r6, lr, lsl #8
  00034	e18ee804	 orr         lr, lr, r4, lsl #16
  00038	e18eec05	 orr         lr, lr, r5, lsl #24
  0003c	e589e01c	 str         lr, [r9, #0x1C]

; 141  :     m_dwInstance  = lpWOD->dwInstance;

  00040	e5d8600c	 ldrb        r6, [r8, #0xC]
  00044	e5d8e00d	 ldrb        lr, [r8, #0xD]
  00048	e5d8400e	 ldrb        r4, [r8, #0xE]
  0004c	e5d8500f	 ldrb        r5, [r8, #0xF]
  00050	e186e40e	 orr         lr, r6, lr, lsl #8
  00054	e18ee804	 orr         lr, lr, r4, lsl #16
  00058	e18eec05	 orr         lr, lr, r5, lsl #24
  0005c	e589e020	 str         lr, [r9, #0x20]

; 142  :     m_hWave       = lpWOD->hWave;

  00060	e5d8e000	 ldrb        lr, [r8]
  00064	e5d83001	 ldrb        r3, [r8, #1]
  00068	e5d82002	 ldrb        r2, [r8, #2]
  0006c	e5d81003	 ldrb        r1, [r8, #3]
  00070	e18e3403	 orr         r3, lr, r3, lsl #8
  00074	e1833802	 orr         r3, r3, r2, lsl #16
  00078	e1833c01	 orr         r3, r3, r1, lsl #24

; 143  :     m_dwFlags     = dwFlags;
; 144  :     m_bRunning    = FALSE;

  0007c	e3a04000	 mov         r4, #0
  00080	e5893018	 str         r3, [r9, #0x18]
  00084	e5897014	 str         r7, [r9, #0x14]
  00088	e5894010	 str         r4, [r9, #0x10]

; 145  :     m_bForceSpeaker = FALSE;

  0008c	e5894068	 str         r4, [r9, #0x68]

; 146  : 
; 147  :     // If it's a PCMWAVEFORMAT struct, it's smaller than a WAVEFORMATEX struct (it doesn't have the cbSize field),
; 148  :     // so don't copy too much or we risk a fault if the structure is located on the end of a page.
; 149  :     // All other non-PCM wave formats share the WAVEFORMATEX base structure
; 150  :     // Note: I don't keep around anything after the cbSize of the WAVEFORMATEX struct so that I don't need to
; 151  :     // worry about allocating additional space. If we need to keep this info around in the future, we can either
; 152  :     // allocate it dynamically here, or keep the information in any derived format-specific classes.
; 153  :     DWORD dwSize;
; 154  :     WAVEFORMATEX *pwfx = lpWOD->lpFormat;

  00090	e5d80004	 ldrb        r0, [r8, #4]
  00094	e5d83005	 ldrb        r3, [r8, #5]
  00098	e5d82006	 ldrb        r2, [r8, #6]
  0009c	e5d81007	 ldrb        r1, [r8, #7]
  000a0	e1803403	 orr         r3, r0, r3, lsl #8
  000a4	e1833802	 orr         r3, r3, r2, lsl #16
  000a8	e1831c01	 orr         r1, r3, r1, lsl #24

; 155  :     if (pwfx->wFormatTag == WAVE_FORMAT_PCM)

  000ac	e5d12000	 ldrb        r2, [r1]
  000b0	e5d13001	 ldrb        r3, [r1, #1]

; 156  :     {
; 157  :         dwSize = sizeof(PCMWAVEFORMAT);
; 158  :         m_WaveFormat.cbSize = 0;
; 159  :     }
; 160  :     else
; 161  :     {
; 162  :         dwSize = sizeof(WAVEFORMATEX);
; 163  :     }
; 164  : 
; 165  :     memcpy(&m_WaveFormat,pwfx,dwSize);

  000b4	e2890024	 add         r0, r9, #0x24
  000b8	e1823403	 orr         r3, r2, r3, lsl #8
  000bc	e3530001	 cmp         r3, #1
  000c0	03a02010	 moveq       r2, #0x10
  000c4	13a02012	 movne       r2, #0x12
  000c8	05c94034	 streqb      r4, [r9, #0x34]
  000cc	05c94035	 streqb      r4, [r9, #0x35]
  000d0	eb000000	 bl          memcpy

; 166  : 
; 167  :     m_lpWaveHdrHead    = NULL;
; 168  :     m_lpWaveHdrTail    = NULL;
; 169  :     m_lpWaveHdrCurrent = NULL;
; 170  :     m_lpCurrData       = NULL;
; 171  :     m_lpCurrDataEnd    = NULL;
; 172  :     m_dwByteCount      = 0;
; 173  :     m_dwLoopCount = 0;
; 174  : 
; 175  :     m_SecondaryGainClass=0;
; 176  :     SetGain(pDeviceContext->GetDefaultStreamGain()); // Set gain to default value

  000d4	e1a0000a	 mov         r0, r10
  000d8	e5894038	 str         r4, [r9, #0x38]
  000dc	e5894040	 str         r4, [r9, #0x40]
  000e0	e589403c	 str         r4, [r9, #0x3C]
  000e4	e5894044	 str         r4, [r9, #0x44]
  000e8	e5894048	 str         r4, [r9, #0x48]
  000ec	e589404c	 str         r4, [r9, #0x4C]
  000f0	e5894054	 str         r4, [r9, #0x54]
  000f4	e589405c	 str         r4, [r9, #0x5C]
  000f8	eb000000	 bl          |?GetDefaultStreamGain@DeviceContext@@QAAKXZ|
  000fc	e5993000	 ldr         r3, [r9]
  00100	e1a02000	 mov         r2, r0
  00104	e1a00009	 mov         r0, r9
  00108	e5933034	 ldr         r3, [r3, #0x34]
  0010c	e5892058	 str         r2, [r9, #0x58]
  00110	e1a0e00f	 mov         lr, pc
  00114	e12fff13	 bx          r3

; 177  : 
; 178  :     ResetBaseInfo(); // Set base sample rate if needed

  00118	e5993000	 ldr         r3, [r9]
  0011c	e1a00009	 mov         r0, r9
  00120	e5933020	 ldr         r3, [r3, #0x20]
  00124	e1a0e00f	 mov         lr, pc
  00128	e12fff13	 bx          r3

; 179  : 
; 180  :     // DEBUGMSG(1, (TEXT("Opening stream 0x%x\r\n"),this));
; 181  : 
; 182  :     // Add stream to list. This will start playback.
; 183  : 
; 184  :     mmRet = pDeviceContext->NewStream(this);

  0012c	e59a3000	 ldr         r3, [r10]
  00130	e1a01009	 mov         r1, r9
  00134	e1a0000a	 mov         r0, r10
  00138	e5933004	 ldr         r3, [r3, #4]
  0013c	e1a0e00f	 mov         lr, pc
  00140	e12fff13	 bx          r3
  00144	e1b04000	 movs        r4, r0

; 185  :     if (mmRet != MMSYSERR_NOERROR)
; 186  :     {
; 187  :         goto Exit;
; 188  :     }
; 189  : 
; 190  :     DoCallbackStreamOpened();

  00148	05993000	 ldreq       r3, [r9]
  0014c	01a00009	 moveq       r0, r9
  00150	05933028	 ldreq       r3, [r3, #0x28]
  00154	01a0e00f	 moveq       lr, pc
  00158	012fff13	 bxeq        r3
  0015c		 |$Exit$35313|

; 191  : 
; 192  : Exit:
; 193  :     return mmRet;
; 194  : }

  0015c	e1a00004	 mov         r0, r4
  00160	e8bd47f0	 ldmia       sp!, {r4 - r10, lr}
  00164	e12fff1e	 bx          lr
  00168		 |$M35788|

			 ENDP  ; |?Open@StreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z|, StreamContext::Open

	EXPORT	|?AddRef@StreamContext@@QAAJXZ|		; StreamContext::AddRef

  00000			 AREA	 |.pdata|, PDATA
|$T35800| DCD	|$LN5@AddRef|
	DCD	0x40000500
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?AddRef@StreamContext@@QAAJXZ| PROC	; StreamContext::AddRef

; 214  : {

  00000		 |$LN5@AddRef|
  00000		 |$M35797|
  00000	e1a02000	 mov         r2, r0

; 215  :     LONG RefCount = ++m_RefCount;

  00004	e592300c	 ldr         r3, [r2, #0xC]
  00008	e2830001	 add         r0, r3, #1
  0000c	e582000c	 str         r0, [r2, #0xC]

; 216  : //    DEBUGMSG(1, (TEXT("AddRef stream 0x%x, RefCount=%d\r\n"),this,RefCount));
; 217  :     return RefCount;
; 218  : }

  00010	e12fff1e	 bx          lr
  00014		 |$M35798|

			 ENDP  ; |?AddRef@StreamContext@@QAAJXZ|, StreamContext::AddRef

	EXPORT	|?Release@StreamContext@@QAAJXZ|	; StreamContext::Release
	IMPORT	|?DeleteStream@DeviceContext@@QAAXPAVStreamContext@@@Z| ; DeviceContext::DeleteStream

  00000			 AREA	 |.pdata|, PDATA
|$T35815| DCD	|$LN8@Release|
	DCD	0x40001301
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Release@StreamContext@@QAAJXZ| PROC	; StreamContext::Release

; 222  : {

  00000		 |$LN8@Release|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M35812|
  00004	e1a04000	 mov         r4, r0

; 223  :     LONG RefCount = --m_RefCount;

  00008	e594300c	 ldr         r3, [r4, #0xC]
  0000c	e2433001	 sub         r3, r3, #1
  00010	e584300c	 str         r3, [r4, #0xC]
  00014	e1b05003	 movs        r5, r3

; 224  : 
; 225  : //    DEBUGMSG(1, (TEXT("Releasing stream 0x%x, RefCount=%d\r\n"),this,RefCount));
; 226  :     if (RefCount==0)

  00018	1a000008	 bne         |$LN4@Release|

; 227  :     {
; 228  :         // DEBUGMSG(1, (TEXT("Deleting stream 0x%x\r\n"),this));
; 229  :         // Only remove stream from list when all refcounts are gone.
; 230  :         m_pDeviceContext->DeleteStream(this);

  0001c	e5940050	 ldr         r0, [r4, #0x50]
  00020	e1a01004	 mov         r1, r4
  00024	eb000000	 bl          |?DeleteStream@DeviceContext@@QAAXPAVStreamContext@@@Z|

; 231  :         delete this;

  00028	e5943000	 ldr         r3, [r4]
  0002c	e3a01001	 mov         r1, #1
  00030	e1a00004	 mov         r0, r4
  00034	e5933000	 ldr         r3, [r3]
  00038	e1a0e00f	 mov         lr, pc
  0003c	e12fff13	 bx          r3
  00040		 |$LN4@Release|

; 232  :     }
; 233  :     return RefCount;
; 234  : }

  00040	e1a00005	 mov         r0, r5
  00044	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00048	e12fff1e	 bx          lr
  0004c		 |$M35813|

			 ENDP  ; |?Release@StreamContext@@QAAJXZ|, StreamContext::Release


  00000			 AREA	 |.pdata|, PDATA
|$T35826| DCD	|$LN11@QueueBuffe|
	DCD	0x40002c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?QueueBuffer@StreamContext@@UAAKPAUwavehdr_tag@@@Z| PROC ; StreamContext::QueueBuffer

; 237  : {

  00000		 |$LN11@QueueBuffe|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35823|
  00004	e1a0e001	 mov         lr, r1
  00008	e1a01000	 mov         r1, r0

; 238  :     if (!(lpWaveHdr->dwFlags & WHDR_PREPARED))

  0000c	e59e3010	 ldr         r3, [lr, #0x10]
  00010	e3130002	 tst         r3, #2

; 239  :     {
; 240  :         return WAVERR_UNPREPARED;

  00014	03a00022	 moveq       r0, #0x22

; 279  : }

  00018	049de004	 ldreq       lr, [sp], #4
  0001c	012fff1e	 bxeq        lr

; 241  :     }
; 242  : 
; 243  :     lpWaveHdr->dwFlags |= WHDR_INQUEUE;
; 244  :     lpWaveHdr->dwFlags &= ~WHDR_DONE;

  00020	e3c33001	 bic         r3, r3, #1
  00024	e3833010	 orr         r3, r3, #0x10
  00028	e58e3010	 str         r3, [lr, #0x10]

; 245  :     lpWaveHdr->lpNext=NULL;

  0002c	e3a03000	 mov         r3, #0
  00030	e58e3018	 str         r3, [lr, #0x18]

; 246  :     lpWaveHdr->dwBytesRecorded=0;

  00034	e58e3008	 str         r3, [lr, #8]

; 247  : 
; 248  :     if (!m_lpWaveHdrHead)

  00038	e5913038	 ldr         r3, [r1, #0x38]
  0003c	e3530000	 cmp         r3, #0

; 249  :     {
; 250  :         m_lpWaveHdrHead = lpWaveHdr;

  00040	0581e038	 streq       lr, [r1, #0x38]

; 251  :     }
; 252  :     else
; 253  :     {
; 254  :         m_lpWaveHdrTail->lpNext=lpWaveHdr;

  00044	15913040	 ldrne       r3, [r1, #0x40]
  00048	1583e018	 strne       lr, [r3, #0x18]

; 255  :     }
; 256  : 
; 257  :     m_lpWaveHdrTail=lpWaveHdr;
; 258  : 
; 259  :     // Note: Even if head & tail are valid, current may be NULL if we're in the middle of
; 260  :     // a loop and ran out of data. So, we need to check specifically against current to
; 261  :     // decide if we need to initialize it.
; 262  :     if (!m_lpWaveHdrCurrent)

  0004c	e591303c	 ldr         r3, [r1, #0x3C]
  00050	e581e040	 str         lr, [r1, #0x40]
  00054	e3530000	 cmp         r3, #0
  00058	1a00000a	 bne         |$LN2@QueueBuffe|

; 263  :     {
; 264  :         m_lpWaveHdrCurrent = lpWaveHdr;

  0005c	e581e03c	 str         lr, [r1, #0x3C]

; 265  :         m_lpCurrData    = (PBYTE)lpWaveHdr->lpData;

  00060	e59e3000	 ldr         r3, [lr]
  00064	e5813044	 str         r3, [r1, #0x44]

; 266  :         m_lpCurrDataEnd = (PBYTE)lpWaveHdr->lpData + lpWaveHdr->dwBufferLength;

  00068	e59e2004	 ldr         r2, [lr, #4]
  0006c	e59e3000	 ldr         r3, [lr]
  00070	e0823003	 add         r3, r2, r3
  00074	e5813048	 str         r3, [r1, #0x48]

; 267  :         if (lpWaveHdr->dwFlags & WHDR_BEGINLOOP)    // if this is the start of a loop block

  00078	e59e3010	 ldr         r3, [lr, #0x10]
  0007c	e3130004	 tst         r3, #4

; 268  :         {
; 269  :             m_dwLoopCount = lpWaveHdr->dwLoops;     // save # of loops

  00080	159e3014	 ldrne       r3, [lr, #0x14]
  00084	15813054	 strne       r3, [r1, #0x54]
  00088		 |$LN2@QueueBuffe|

; 270  :         }
; 271  :     }
; 272  : 
; 273  :     if (m_bRunning)

  00088	e5913010	 ldr         r3, [r1, #0x10]
  0008c	e3530000	 cmp         r3, #0

; 274  :     {
; 275  :         m_pDeviceContext->StreamReadyToRender(this);

  00090	15910050	 ldrne       r0, [r1, #0x50]
  00094	15903000	 ldrne       r3, [r0]
  00098	15933010	 ldrne       r3, [r3, #0x10]
  0009c	11a0e00f	 movne       lr, pc
  000a0	112fff13	 bxne        r3

; 276  :     }
; 277  : 
; 278  :     return MMSYSERR_NOERROR;

  000a4	e3a00000	 mov         r0, #0

; 279  : }

  000a8	e49de004	 ldr         lr, [sp], #4
  000ac	e12fff1e	 bx          lr
  000b0		 |$M35824|

			 ENDP  ; |?QueueBuffer@StreamContext@@UAAKPAUwavehdr_tag@@@Z|, StreamContext::QueueBuffer

	EXPORT	|?GetNextBuffer@StreamContext@@QAAPAEXZ| ; StreamContext::GetNextBuffer

  00000			 AREA	 |.pdata|, PDATA
|$T35841| DCD	|$LN19@GetNextBuf|
	DCD	0x40003701
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetNextBuffer@StreamContext@@QAAPAEXZ| PROC ; StreamContext::GetNextBuffer

; 294  : {

  00000		 |$LN19@GetNextBuf|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M35838|
  00004	e1a04000	 mov         r4, r0

; 295  :     LPWAVEHDR lpOldHdr;
; 296  :     LPWAVEHDR lpNewHdr;
; 297  :  
; 298  :     // Get a pointer to the current buffer which is now done being processed
; 299  :     lpOldHdr=m_lpWaveHdrCurrent;

  00008	e594303c	 ldr         r3, [r4, #0x3C]
  0000c	e1b00003	 movs        r0, r3

; 300  : 
; 301  :     if (!lpOldHdr)
; 302  :     {
; 303  :         return NULL;

  00010	03a00000	 moveq       r0, #0

; 368  : }

  00014	08bd4010	 ldmeqia     sp!, {r4, lr}
  00018	012fff1e	 bxeq        lr

; 304  :     }
; 305  : 
; 306  :     // Are we in a loop
; 307  :     // Note: a loopcount of 1 means we're not really in a loop
; 308  :     if (m_dwLoopCount>1)

  0001c	e5942054	 ldr         r2, [r4, #0x54]
  00020	e3a0e000	 mov         lr, #0
  00024	e3520001	 cmp         r2, #1
  00028	9a00000b	 bls         |$LN11@GetNextBuf|

; 309  :     {
; 310  :         // We're in a loop!
; 311  :         if (lpOldHdr->dwFlags & WHDR_ENDLOOP)

  0002c	e5903010	 ldr         r3, [r0, #0x10]
  00030	e3130008	 tst         r3, #8
  00034	0a000005	 beq         |$LN10@GetNextBuf|

; 312  :         {
; 313  :            // In loop, last buffer
; 314  :             // If dwLoopCount was set to INFINITE, loop forever
; 315  :             // (Note: this is not explicitly in the wave driver API spec)
; 316  :             if (m_dwLoopCount!=INFINITE)

  00038	e3720001	 cmn         r2, #1

; 317  :             {
; 318  :            m_dwLoopCount--;                    // decrement loop count

  0003c	12423001	 subne       r3, r2, #1

; 319  :             }
; 320  :            lpNewHdr=m_lpWaveHdrHead;           // go back to start of loop

  00040	e5941038	 ldr         r1, [r4, #0x38]
  00044	15843054	 strne       r3, [r4, #0x54]

; 326  :         }
; 327  : 
; 328  :         lpOldHdr=NULL;

  00048	e3a00000	 mov         r0, #0

; 329  :     }
; 330  :     else

  0004c	ea00000a	 b           |$LN4@GetNextBuf|
  00050		 |$LN10@GetNextBuf|

; 321  :         }
; 322  :         else
; 323  :         {
; 324  :            // In loop, intermediate buffer
; 325  :            lpNewHdr=lpOldHdr->lpNext;          // just go to next buffer in loop block

  00050	e5901018	 ldr         r1, [r0, #0x18]

; 326  :         }
; 327  : 
; 328  :         lpOldHdr=NULL;

  00054	e3a00000	 mov         r0, #0

; 329  :     }
; 330  :     else

  00058	ea000007	 b           |$LN4@GetNextBuf|
  0005c		 |$LN11@GetNextBuf|

; 331  :     {
; 332  :         // Not in a loop; return old buffer and get new buffer
; 333  :         lpNewHdr=lpOldHdr->lpNext;

  0005c	e5903018	 ldr         r3, [r0, #0x18]
  00060	e1b01003	 movs        r1, r3

; 334  : 
; 335  :         m_lpWaveHdrHead = lpNewHdr;           // reset list head

  00064	e5841038	 str         r1, [r4, #0x38]

; 336  :         if (!lpNewHdr)
; 337  :         {
; 338  :             m_lpWaveHdrTail=NULL;             // no new buffer, reset tail to NULL

  00068	0584e040	 streq       lr, [r4, #0x40]

; 339  :         }
; 340  :         else if (lpNewHdr->dwFlags & WHDR_BEGINLOOP)    // if new buffer is start of a loop block

  0006c	15913010	 ldrne       r3, [r1, #0x10]
  00070	13130004	 tstne       r3, #4

; 341  :         {
; 342  :             m_dwLoopCount=lpNewHdr->dwLoops;  // save # of loops

  00074	15913014	 ldrne       r3, [r1, #0x14]
  00078	15843054	 strne       r3, [r4, #0x54]
  0007c		 |$LN4@GetNextBuf|

; 343  :         }
; 344  :     }
; 345  : 
; 346  :     m_lpWaveHdrCurrent=lpNewHdr;              // save current buffer pointer
; 347  : 
; 348  :     if (lpNewHdr)

  0007c	e3510000	 cmp         r1, #0
  00080	e584103c	 str         r1, [r4, #0x3C]

; 349  :     {
; 350  :         m_lpCurrData    = (PBYTE)lpNewHdr->lpData;  // reinitialize data pointer

  00084	15912000	 ldrne       r2, [r1]
  00088	15842044	 strne       r2, [r4, #0x44]

; 351  :         m_lpCurrDataEnd = m_lpCurrData + lpNewHdr->dwBufferLength;

  0008c	15913004	 ldrne       r3, [r1, #4]

; 352  :     }
; 353  :     else
; 354  :     {
; 355  :         m_lpCurrData  = NULL;

  00090	0584e044	 streq       lr, [r4, #0x44]
  00094	10833002	 addne       r3, r3, r2
  00098	15843048	 strne       r3, [r4, #0x48]

; 356  :         m_lpCurrDataEnd = NULL;

  0009c	0584e048	 streq       lr, [r4, #0x48]

; 357  :     }
; 358  : 
; 359  :     // Return the old buffer
; 360  :     // This may cause the stream to be destroyed, so make sure that any calls to this function
; 361  :     // are within an AddRef/Release block
; 362  :     if (lpOldHdr)

  000a0	e3500000	 cmp         r0, #0
  000a4	0a000009	 beq         |$LN15@GetNextBuf|

; 363  :     {
; 364  :         ReturnBuffer(lpOldHdr);

  000a8	e5903010	 ldr         r3, [r0, #0x10]
  000ac	e1a01000	 mov         r1, r0
  000b0	e3c33010	 bic         r3, r3, #0x10
  000b4	e3833001	 orr         r3, r3, #1
  000b8	e5803010	 str         r3, [r0, #0x10]
  000bc	e5943000	 ldr         r3, [r4]
  000c0	e1a00004	 mov         r0, r4
  000c4	e5933024	 ldr         r3, [r3, #0x24]
  000c8	e1a0e00f	 mov         lr, pc
  000cc	e12fff13	 bx          r3
  000d0		 |$LN15@GetNextBuf|

; 365  :     }
; 366  : 
; 367  :     return m_lpCurrData;

  000d0	e5940044	 ldr         r0, [r4, #0x44]

; 368  : }

  000d4	e8bd4010	 ldmia       sp!, {r4, lr}
  000d8	e12fff1e	 bx          lr
  000dc		 |$M35839|

			 ENDP  ; |?GetNextBuffer@StreamContext@@QAAPAEXZ|, StreamContext::GetNextBuffer

	EXPORT	|?BreakLoop@StreamContext@@QAAKXZ|	; StreamContext::BreakLoop

  00000			 AREA	 |.pdata|, PDATA
|$T35863| DCD	|$LN17@BreakLoop|
	DCD	0x40002301
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?BreakLoop@StreamContext@@QAAKXZ| PROC ; StreamContext::BreakLoop

; 372  : {

  00000		 |$LN17@BreakLoop|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M35860|
  00004	e1a04000	 mov         r4, r0

; 373  :     AddRef();

  00008	e594300c	 ldr         r3, [r4, #0xC]

; 374  : 
; 375  :     if (m_dwLoopCount>0)

  0000c	e5942054	 ldr         r2, [r4, #0x54]
  00010	e2833001	 add         r3, r3, #1
  00014	e584300c	 str         r3, [r4, #0xC]
  00018	e3520000	 cmp         r2, #0
  0001c	9a000015	 bls         |$LN2@BreakLoop|

; 376  :     {
; 377  :         m_dwLoopCount = 0;
; 378  : 
; 379  :         LPWAVEHDR lpHdr;
; 380  :         while (m_lpWaveHdrHead!=m_lpWaveHdrCurrent)

  00020	e3a05000	 mov         r5, #0
  00024	e5845054	 str         r5, [r4, #0x54]
  00028	ea00000e	 b           |$LN14@BreakLoop|
  0002c		 |$LL3@BreakLoop|

; 381  :         {
; 382  :             lpHdr = m_lpWaveHdrHead;

  0002c	e5942038	 ldr         r2, [r4, #0x38]

; 383  :             m_lpWaveHdrHead = lpHdr->lpNext;
; 384  :             if (m_lpWaveHdrHead==NULL)
; 385  :             {
; 386  :                 m_lpWaveHdrTail=NULL;
; 387  :             }
; 388  :             ReturnBuffer(lpHdr);

  00030	e1a00004	 mov         r0, r4
  00034	e5923018	 ldr         r3, [r2, #0x18]
  00038	e1a01002	 mov         r1, r2
  0003c	e3530000	 cmp         r3, #0
  00040	05845040	 streq       r5, [r4, #0x40]
  00044	e5843038	 str         r3, [r4, #0x38]
  00048	e5923010	 ldr         r3, [r2, #0x10]
  0004c	e3c33010	 bic         r3, r3, #0x10
  00050	e3833001	 orr         r3, r3, #1
  00054	e5823010	 str         r3, [r2, #0x10]
  00058	e5943000	 ldr         r3, [r4]
  0005c	e5933024	 ldr         r3, [r3, #0x24]
  00060	e1a0e00f	 mov         lr, pc
  00064	e12fff13	 bx          r3
  00068		 |$LN14@BreakLoop|
  00068	e594303c	 ldr         r3, [r4, #0x3C]
  0006c	e5942038	 ldr         r2, [r4, #0x38]
  00070	e1520003	 cmp         r2, r3
  00074	1affffec	 bne         |$LL3@BreakLoop|
  00078		 |$LN2@BreakLoop|

; 389  :         }
; 390  :     }
; 391  : 
; 392  :     Release();

  00078	e1a00004	 mov         r0, r4
  0007c	eb000000	 bl          |?Release@StreamContext@@QAAJXZ|

; 393  : 
; 394  :     return MMSYSERR_NOERROR;

  00080	e3a00000	 mov         r0, #0

; 395  : }

  00084	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00088	e12fff1e	 bx          lr
  0008c		 |$M35861|

			 ENDP  ; |?BreakLoop@StreamContext@@QAAKXZ|, StreamContext::BreakLoop

	EXPORT	|?MapGain@StreamContext@@QAAKKK@Z|	; StreamContext::MapGain
	IMPORT	|?GetSecondaryGainLimit@DeviceContext@@QAAKK@Z| ; DeviceContext::GetSecondaryGainLimit
	IMPORT	|?GetGain@DeviceContext@@QAAKXZ|	; DeviceContext::GetGain

  00000			 AREA	 |.pdata|, PDATA
|$T35881| DCD	|$LN16@MapGain|
	DCD	0x40003201
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?MapGain@StreamContext@@QAAKKK@Z| PROC ; StreamContext::MapGain

; 631  : {

  00000		 |$LN16@MapGain|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004		 |$M35878|
  00004	e1a05002	 mov         r5, r2
  00008	e1a06000	 mov         r6, r0

; 632  :     // Get correct stream gain based on channel
; 633  :     if (Channel==1)
; 634  :     {
; 635  :         StreamGain >>= 16;
; 636  :     }
; 637  :     StreamGain &= 0xFFFF;
; 638  : 
; 639  :     // Get Device gain
; 640  :     DWORD DeviceGain;
; 641  :     if (m_SecondaryGainClass >= SECONDARYDEVICEGAINCLASSMAX)

  0000c	e596305c	 ldr         r3, [r6, #0x5C]
  00010	e3550001	 cmp         r5, #1
  00014	e3a02cff	 mov         r2, #0xFF, 24
  00018	01a01821	 moveq       r1, r1, lsr #16
  0001c	e3530002	 cmp         r3, #2
  00020	e38240ff	 orr         r4, r2, #0xFF

; 642  :     {
; 643  :         DeviceGain = 0xFFFF;

  00024	21a05004	 movcs       r5, r4
  00028	e0017004	 and         r7, r1, r4
  0002c	2a000004	 bcs         |$LN9@MapGain|

; 644  :     }
; 645  :     else
; 646  :     {
; 647  :         // Apply device gain
; 648  :         DeviceGain = m_pDeviceContext->GetGain();

  00030	e5960050	 ldr         r0, [r6, #0x50]
  00034	eb000000	 bl          |?GetGain@DeviceContext@@QAAKXZ|

; 649  :         if (Channel==1)

  00038	e3550001	 cmp         r5, #1

; 650  :         {
; 651  :             DeviceGain >>= 16;

  0003c	01a00820	 moveq       r0, r0, lsr #16

; 652  :         }
; 653  :         DeviceGain &= 0xFFFF;

  00040	e0005004	 and         r5, r0, r4
  00044		 |$LN9@MapGain|

; 654  :     }
; 655  : 
; 656  :     // Get Secondary gain
; 657  :     DWORD SecondaryGain;
; 658  :     SecondaryGain = m_pDeviceContext->GetSecondaryGainLimit(m_SecondaryGainClass);

  00044	e596105c	 ldr         r1, [r6, #0x5C]
  00048	e5960050	 ldr         r0, [r6, #0x50]
  0004c	eb000000	 bl          |?GetSecondaryGainLimit@DeviceContext@@QAAKK@Z|

; 659  :     SecondaryGain &= 0xFFFF; // For now, only use lowest 16 bits for both channels

  00050	e0043000	 and         r3, r4, r0

; 660  : 
; 661  :     DWORD fGainMultiplier;
; 662  : 
; 663  :     // Special handling- if any gain is totally 0, mute the output
; 664  :     if ((StreamGain==0) || (DeviceGain==0) || (SecondaryGain==0))

  00054	e3570000	 cmp         r7, #0
  00058	0a000015	 beq         |$LN6@MapGain|
  0005c	e3550000	 cmp         r5, #0
  00060	0a000013	 beq         |$LN6@MapGain|
  00064	e3530000	 cmp         r3, #0
  00068	0a000011	 beq         |$LN6@MapGain|

; 667  :     }
; 668  :     else
; 669  :     {
; 670  :         // Now calculate attenuation of each in dB using appropriate ranges
; 671  : 
; 672  :         // Stream volume is normalized to the range from 0 to -100 dB
; 673  :         // Device and secondary gain are normalized from 0 to -35 dB
; 674  :         // These can be modified in hwctxt.h
; 675  : 
; 676  :         DWORD dBAttenStream, dBAttenDevice, dBAttenSecondary, dBAttenTotal;
; 677  : 
; 678  :         dBAttenStream    = ((0xFFFF - StreamGain)    * STREAM_ATTEN_MAX);
; 679  :         dBAttenDevice    = ((0xFFFF - DeviceGain)    * DEVICE_ATTEN_MAX );
; 680  :         dBAttenSecondary = ((0xFFFF - SecondaryGain) * CLASS_ATTEN_MAX );
; 681  : 
; 682  :         // Add together
; 683  :         dBAttenTotal = dBAttenStream + dBAttenDevice + dBAttenSecondary;
; 684  : 
; 685  :         // Multiply result by 2 for .5 dB steps in the table
; 686  :         dBAttenTotal *= 2;
; 687  : 
; 688  :         // Round up to account for rounding errors in lower 16 bits
; 689  :         dBAttenTotal += 0x8000;
; 690  : 
; 691  :         // Now shift back to the lowest 16 bits to get an index into the table
; 692  :         dBAttenTotal >>= 16;

  0006c	e0833005	 add         r3, r3, r5
  00070	e3a02046	 mov         r2, #0x46
  00074	e3e000c7	 mvn         r0, #0xC7
  00078	e0010293	 mul         r1, r3, r2
  0007c	e0030097	 mul         r3, r7, r0
  00080	e59f203c	 ldr         r2, [pc, #0x3C]
  00084	e0433001	 sub         r3, r3, r1
  00088	e0833002	 add         r3, r3, r2
  0008c	e1b02823	 movs        r2, r3, lsr #16

; 693  : 
; 694  :         // dBAttenTotal should range from 0 to something like 340 (if all terms were close to 0)
; 695  : 
; 696  :         // Special case 0 as totally muted. The table starts at -.5dB, rather than 0dB, since
; 697  :         // 0dB would take more than the 16-bits we allowed per entry.
; 698  :         if (dBAttenTotal==0)
; 699  :         {
; 700  :             fGainMultiplier = 0x10000;

  00090	03a00801	 moveq       r0, #1, 16

; 709  :         }
; 710  :     }
; 711  : 
; 712  :     return fGainMultiplier;
; 713  : }

  00094	08bd40f0	 ldmeqia     sp!, {r4 - r7, lr}
  00098	012fff1e	 bxeq        lr

; 701  :         }
; 702  :         else if (dBAttenTotal>200)

  0009c	e35200c8	 cmp         r2, #0xC8

; 703  :         {
; 704  :             fGainMultiplier = 0;
; 705  :         }
; 706  :         else
; 707  :         {
; 708  :             fGainMultiplier = (DWORD)GainMap[dBAttenTotal-1];

  000a0	959f3018	 ldrls       r3, [pc, #0x18]
  000a4	90833082	 addls       r3, r3, r2, lsl #1
  000a8	915300b2	 ldrlsh      r0, [r3, #-2]

; 709  :         }
; 710  :     }
; 711  : 
; 712  :     return fGainMultiplier;
; 713  : }

  000ac	98bd40f0	 ldmlsia     sp!, {r4 - r7, lr}
  000b0	912fff1e	 bxls        lr
  000b4		 |$LN6@MapGain|

; 665  :     {
; 666  :         fGainMultiplier = 0;

  000b4	e3a00000	 mov         r0, #0

; 709  :         }
; 710  :     }
; 711  : 
; 712  :     return fGainMultiplier;
; 713  : }

  000b8	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  000bc	e12fff1e	 bx          lr
  000c0		 |$LN17@MapGain|
  000c0		 |$LN18@MapGain|
  000c0	00000000	 DCD         |GainMap|
  000c4		 |$LN19@MapGain|
  000c4	01547eac	 DCD         0x1547eac
  000c8		 |$M35879|

			 ENDP  ; |?MapGain@StreamContext@@QAAKKK@Z|, StreamContext::MapGain

	IMPORT	|__rt_udiv|

  00000			 AREA	 |.pdata|, PDATA
|$T35898| DCD	|$LN14@GetPos|
	DCD	0x40003901
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetPos@StreamContext@@UAAKPAUmmtime_tag@@@Z| PROC ; StreamContext::GetPos

; 716  : {

  00000		 |$LN14@GetPos|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M35895|
  00004	e1a05001	 mov         r5, r1
  00008	e1a06000	 mov         r6, r0

; 717  :     switch (pmmt->wType)

  0000c	e5d54000	 ldrb        r4, [r5]
  00010	e5d53001	 ldrb        r3, [r5, #1]
  00014	e5d52002	 ldrb        r2, [r5, #2]
  00018	e5d5e003	 ldrb        lr, [r5, #3]
  0001c	e1843403	 orr         r3, r4, r3, lsl #8
  00020	e1833802	 orr         r3, r3, r2, lsl #16
  00024	e1833c0e	 orr         r3, r3, lr, lsl #24
  00028	e3530001	 cmp         r3, #1
  0002c	0a00001f	 beq         |$LN4@GetPos|
  00030	e3530002	 cmp         r3, #2
  00034	0a000012	 beq         |$LN5@GetPos|
  00038	e3530004	 cmp         r3, #4
  0003c	0a000005	 beq         |$LN1@GetPos|
  00040		 |$LN3@GetPos|

; 729  :             break;
; 730  :         }
; 731  :         // If we don't know avg bytes per sec, fall through to TIME_BYTES
; 732  : 
; 733  :     default:
; 734  :         // Anything else, return TIME_BYTES instead.
; 735  :         pmmt->wType = TIME_BYTES;

  00040	e3a03004	 mov         r3, #4
  00044	e5c53000	 strb        r3, [r5]
  00048	e3a03000	 mov         r3, #0
  0004c	e5c53001	 strb        r3, [r5, #1]
  00050	e5c53002	 strb        r3, [r5, #2]
  00054	e5c53003	 strb        r3, [r5, #3]
  00058		 |$LN1@GetPos|

; 736  : 
; 737  :         // Fall through to TIME_BYTES
; 738  :     case TIME_BYTES:
; 739  :         pmmt->u.cb = m_dwByteCount;

  00058	e596004c	 ldr         r0, [r6, #0x4C]
  0005c		 |$LN10@GetPos|
  0005c	e1a03420	 mov         r3, r0, lsr #8
  00060	e1a02820	 mov         r2, r0, lsr #16
  00064	e1a01c20	 mov         r1, r0, lsr #24
  00068	e5c50004	 strb        r0, [r5, #4]
  0006c	e5c53005	 strb        r3, [r5, #5]
  00070	e5c52006	 strb        r2, [r5, #6]
  00074	e5c51007	 strb        r1, [r5, #7]

; 740  :     }
; 741  : 
; 742  :     return MMSYSERR_NOERROR;

  00078	e3a00000	 mov         r0, #0

; 743  : }

  0007c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00080	e12fff1e	 bx          lr
  00084		 |$LN5@GetPos|

; 718  :     {
; 719  : 
; 720  :     case TIME_SAMPLES:
; 721  :         pmmt->u.sample = (m_dwByteCount * 8) /
; 722  :                          (m_WaveFormat.nChannels * m_WaveFormat.wBitsPerSample);

  00084	e5d61032	 ldrb        r1, [r6, #0x32]
  00088	e5d63033	 ldrb        r3, [r6, #0x33]
  0008c	e5d60026	 ldrb        r0, [r6, #0x26]
  00090	e5d62027	 ldrb        r2, [r6, #0x27]
  00094	e181e403	 orr         lr, r1, r3, lsl #8
  00098	e596304c	 ldr         r3, [r6, #0x4C]
  0009c	e1802402	 orr         r2, r0, r2, lsl #8
  000a0	e000029e	 mul         r0, lr, r2
  000a4	e1a01183	 mov         r1, r3, lsl #3
  000a8	eb000000	 bl          __rt_udiv

; 723  :         break;

  000ac	eaffffea	 b           |$LN10@GetPos|
  000b0		 |$LN4@GetPos|

; 724  : 
; 725  :     case TIME_MS:
; 726  :         if (m_WaveFormat.nAvgBytesPerSec != 0)

  000b0	e5d6002c	 ldrb        r0, [r6, #0x2C]
  000b4	e5d6302d	 ldrb        r3, [r6, #0x2D]
  000b8	e5d6202e	 ldrb        r2, [r6, #0x2E]
  000bc	e5d6102f	 ldrb        r1, [r6, #0x2F]
  000c0	e1803403	 orr         r3, r0, r3, lsl #8
  000c4	e1833802	 orr         r3, r3, r2, lsl #16
  000c8	e1930c01	 orrs        r0, r3, r1, lsl #24
  000cc	0affffdb	 beq         |$LN3@GetPos|

; 727  :         {
; 728  :             pmmt->u.ms = (m_dwByteCount * 1000) / m_WaveFormat.nAvgBytesPerSec;

  000d0	e596304c	 ldr         r3, [r6, #0x4C]
  000d4	e3a02ffa	 mov         r2, #0xFA, 30
  000d8	e0010293	 mul         r1, r3, r2
  000dc	eb000000	 bl          __rt_udiv
  000e0	eaffffdd	 b           |$LN10@GetPos|
  000e4		 |$M35896|

			 ENDP  ; |?GetPos@StreamContext@@UAAKPAUmmtime_tag@@@Z|, StreamContext::GetPos

	EXPORT	|?Open@WaveStreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z| ; WaveStreamContext::Open

  00000			 AREA	 |.pdata|, PDATA
|$T35917| DCD	|$LN20@Open@2|
	DCD	0x40003b01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Open@WaveStreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z| PROC ; WaveStreamContext::Open

; 746  : {

  00000		 |$LN20@Open@2|
  00000	e92d43f0	 stmdb       sp!, {r4 - r9, lr}
  00004		 |$M35914|
  00004	e1a09003	 mov         r9, r3
  00008	e1a08002	 mov         r8, r2
  0000c	e1a07000	 mov         r7, r0

; 747  :     DWORD mmRet = MMSYSERR_ERROR;
; 748  : 
; 749  :     WAVEFORMATEX *pwfx = lpWOD->lpFormat;

  00010	e5d86004	 ldrb        r6, [r8, #4]
  00014	e5d8e005	 ldrb        lr, [r8, #5]
  00018	e5d84006	 ldrb        r4, [r8, #6]
  0001c	e5d85007	 ldrb        r5, [r8, #7]
  00020	e186e40e	 orr         lr, r6, lr, lsl #8
  00024	e18ee804	 orr         lr, lr, r4, lsl #16
  00028	e18e0c05	 orr         r0, lr, r5, lsl #24

; 750  : 
; 751  :     if (pwfx->wBitsPerSample == 8)

  0002c	e5d0400e	 ldrb        r4, [r0, #0xE]
  00030	e5d0e00f	 ldrb        lr, [r0, #0xF]
  00034	e3a05000	 mov         r5, #0
  00038	e184e40e	 orr         lr, r4, lr, lsl #8
  0003c	e35e0008	 cmp         lr, #8
  00040	1a00000a	 bne         |$LN11@Open@2|

; 752  :     {
; 753  :         if (pwfx->nChannels == 1)

  00044	e5d04002	 ldrb        r4, [r0, #2]
  00048	e5d0e003	 ldrb        lr, [r0, #3]
  0004c	e184e40e	 orr         lr, r4, lr, lsl #8
  00050	e35e0001	 cmp         lr, #1

; 754  :         {
; 755  :             m_SampleType = PCM_TYPE_M8;
; 756  :             m_SampleSize = 1;

  00054	03a03001	 moveq       r3, #1
  00058	05873070	 streq       r3, [r7, #0x70]
  0005c	0587506c	 streq       r5, [r7, #0x6C]
  00060	0a00000c	 beq         |$LN6@Open@2|

; 757  :         }
; 758  :         else
; 759  :         {
; 760  :             m_SampleType = PCM_TYPE_S8;

  00064	e3a03002	 mov         r3, #2

; 761  :             m_SampleSize = 2;

  00068	e5873070	 str         r3, [r7, #0x70]

; 762  :         }
; 763  :     }
; 764  :     else

  0006c	ea000008	 b           |$LN16@Open@2|
  00070		 |$LN11@Open@2|

; 765  :     {
; 766  :         if (pwfx->nChannels == 1)

  00070	e5d02002	 ldrb        r2, [r0, #2]
  00074	e5d03003	 ldrb        r3, [r0, #3]
  00078	e1823403	 orr         r3, r2, r3, lsl #8
  0007c	e3530001	 cmp         r3, #1

; 767  :         {
; 768  :             m_SampleType = PCM_TYPE_M16;
; 769  :             m_SampleSize = 2;

  00080	03a02002	 moveq       r2, #2

; 770  :         }
; 771  :         else
; 772  :         {
; 773  :             m_SampleType = PCM_TYPE_S16;
; 774  :             m_SampleSize = 4;

  00084	13a02004	 movne       r2, #4
  00088	03a03001	 moveq       r3, #1
  0008c	e5872070	 str         r2, [r7, #0x70]
  00090	13a03003	 movne       r3, #3
  00094		 |$LN16@Open@2|
  00094	e587306c	 str         r3, [r7, #0x6C]
  00098		 |$LN6@Open@2|

; 775  :         }
; 776  :     }
; 777  : 
; 778  :     int i;
; 779  :     for (i=0;i<MAXCHANNELS;i++)

  00098	e1a03007	 mov         r3, r7
  0009c	e3a02002	 mov         r2, #2
  000a0		 |$LL5@Open@2|

; 780  :     {
; 781  :         m_PrevSamp[i] = 0;

  000a0	e5835078	 str         r5, [r3, #0x78]

; 782  :         m_CurrSamp[i] = 0;

  000a4	e5835080	 str         r5, [r3, #0x80]
  000a8	e2833004	 add         r3, r3, #4
  000ac	e2522001	 subs        r2, r2, #1
  000b0	1afffffa	 bne         |$LL5@Open@2|

; 783  :     }
; 784  : 
; 785  :     mmRet = StreamContext::Open(pDeviceContext,lpWOD,dwFlags);

  000b4	e1a03009	 mov         r3, r9
  000b8	e1a02008	 mov         r2, r8
  000bc	e1a00007	 mov         r0, r7
  000c0	eb000000	 bl          |?Open@StreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z|
  000c4	e1b04000	 movs        r4, r0

; 786  :     if (mmRet != MMSYSERR_NOERROR)
; 787  :     {
; 788  :         goto Exit;
; 789  :     }
; 790  : 
; 791  :     // Set initial sample rate
; 792  :     SetRate(0x10000);

  000c8	05973000	 ldreq       r3, [r7]
  000cc	03a01801	 moveq       r1, #1, 16
  000d0	01a00007	 moveq       r0, r7
  000d4	0593303c	 ldreq       r3, [r3, #0x3C]
  000d8	01a0e00f	 moveq       lr, pc
  000dc	012fff13	 bxeq        r3
  000e0		 |$Exit$35426|

; 793  : 
; 794  : Exit:
; 795  :     return mmRet;
; 796  : }

  000e0	e1a00004	 mov         r0, r4
  000e4	e8bd43f0	 ldmia       sp!, {r4 - r9, lr}
  000e8	e12fff1e	 bx          lr
  000ec		 |$M35915|

			 ENDP  ; |?Open@WaveStreamContext@@UAAKPAVDeviceContext@@PAUwaveopendesc_tag@@K@Z|, WaveStreamContext::Open

	EXPORT	|?GetRate@WaveStreamContext@@QAAKPAK@Z|	; WaveStreamContext::GetRate

  00000			 AREA	 |.pdata|, PDATA
|$T35928| DCD	|$LN5@GetRate|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetRate@WaveStreamContext@@QAAKPAK@Z| PROC ; WaveStreamContext::GetRate

; 799  : {

  00000		 |$LN5@GetRate|
  00000		 |$M35925|

; 800  :     *pdwMultiplier = m_dwMultiplier;

  00000	e5903074	 ldr         r3, [r0, #0x74]

; 801  :     return MMSYSERR_NOERROR;

  00004	e3a00000	 mov         r0, #0
  00008	e5813000	 str         r3, [r1]

; 802  : }

  0000c	e12fff1e	 bx          lr
  00010		 |$M35926|

			 ENDP  ; |?GetRate@WaveStreamContext@@QAAKPAK@Z|, WaveStreamContext::GetRate


  00000			 AREA	 |.pdata|, PDATA
|$T35938| DCD	|$LN6@Run|
	DCD	0x40000e01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Run@StreamContext@@UAAKXZ| PROC	; StreamContext::Run

; 805  : {

  00000		 |$LN6@Run|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35935|
  00004	e1a01000	 mov         r1, r0

; 806  :     m_bRunning=TRUE;
; 807  :     if (m_lpCurrData)

  00008	e5913044	 ldr         r3, [r1, #0x44]
  0000c	e3a02001	 mov         r2, #1
  00010	e5812010	 str         r2, [r1, #0x10]
  00014	e3530000	 cmp         r3, #0

; 808  :     {
; 809  :         m_pDeviceContext->StreamReadyToRender(this);

  00018	15910050	 ldrne       r0, [r1, #0x50]
  0001c	15903000	 ldrne       r3, [r0]
  00020	15933010	 ldrne       r3, [r3, #0x10]
  00024	11a0e00f	 movne       lr, pc
  00028	112fff13	 bxne        r3

; 810  :     }
; 811  : 
; 812  :     return MMSYSERR_NOERROR;

  0002c	e3a00000	 mov         r0, #0

; 813  : }

  00030	e49de004	 ldr         lr, [sp], #4
  00034	e12fff1e	 bx          lr
  00038		 |$M35936|

			 ENDP  ; |?Run@StreamContext@@UAAKXZ|, StreamContext::Run


  00000			 AREA	 |.pdata|, PDATA
|$T35948| DCD	|$LN5@Stop|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Stop@StreamContext@@UAAKXZ| PROC	; StreamContext::Stop

; 816  : {

  00000		 |$LN5@Stop|
  00000		 |$M35945|

; 817  :     m_bRunning=FALSE;

  00000	e3a03000	 mov         r3, #0
  00004	e5803010	 str         r3, [r0, #0x10]

; 818  :     return MMSYSERR_NOERROR;

  00008	e3a00000	 mov         r0, #0

; 819  : }

  0000c	e12fff1e	 bx          lr
  00010		 |$M35946|

			 ENDP  ; |?Stop@StreamContext@@UAAKXZ|, StreamContext::Stop


  00000			 AREA	 |.pdata|, PDATA
|$T35970| DCD	|$LN16@Reset|
	DCD	0x40002701
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Reset@StreamContext@@UAAKXZ| PROC	; StreamContext::Reset

; 822  : {

  00000		 |$LN16@Reset|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M35967|
  00004	e1a04000	 mov         r4, r0

; 823  :     AddRef();
; 824  : 
; 825  :     // Stop stream for now.
; 826  :     Stop();

  00008	e5943000	 ldr         r3, [r4]
  0000c	e594200c	 ldr         r2, [r4, #0xC]
  00010	e5931014	 ldr         r1, [r3, #0x14]
  00014	e2823001	 add         r3, r2, #1
  00018	e584300c	 str         r3, [r4, #0xC]
  0001c	e1a0e00f	 mov         lr, pc
  00020	e12fff11	 bx          r1

; 827  : 
; 828  :     m_lpWaveHdrCurrent  = NULL;
; 829  :     m_lpCurrData       = NULL;
; 830  :     m_lpCurrDataEnd    = NULL;
; 831  :     m_dwByteCount      = 0;
; 832  :     m_dwLoopCount      = 0;
; 833  : 
; 834  :     LPWAVEHDR lpHdr;
; 835  :     while (m_lpWaveHdrHead)

  00024	e3a05000	 mov         r5, #0
  00028	e584503c	 str         r5, [r4, #0x3C]
  0002c	e5845044	 str         r5, [r4, #0x44]
  00030	e5845048	 str         r5, [r4, #0x48]
  00034	e584504c	 str         r5, [r4, #0x4C]
  00038	e5845054	 str         r5, [r4, #0x54]
  0003c	ea00000e	 b           |$LN13@Reset|
  00040		 |$LL3@Reset|

; 836  :     {
; 837  :         lpHdr = m_lpWaveHdrHead;

  00040	e5942038	 ldr         r2, [r4, #0x38]

; 838  :         m_lpWaveHdrHead = lpHdr->lpNext;
; 839  :         if (m_lpWaveHdrHead==NULL)
; 840  :         {
; 841  :             m_lpWaveHdrTail=NULL;
; 842  :         }
; 843  :         ReturnBuffer(lpHdr);

  00044	e1a00004	 mov         r0, r4
  00048	e5923018	 ldr         r3, [r2, #0x18]
  0004c	e1a01002	 mov         r1, r2
  00050	e3530000	 cmp         r3, #0
  00054	05845040	 streq       r5, [r4, #0x40]
  00058	e5843038	 str         r3, [r4, #0x38]
  0005c	e5923010	 ldr         r3, [r2, #0x10]
  00060	e3c33010	 bic         r3, r3, #0x10
  00064	e3833001	 orr         r3, r3, #1
  00068	e5823010	 str         r3, [r2, #0x10]
  0006c	e5943000	 ldr         r3, [r4]
  00070	e5933024	 ldr         r3, [r3, #0x24]
  00074	e1a0e00f	 mov         lr, pc
  00078	e12fff13	 bx          r3
  0007c		 |$LN13@Reset|
  0007c	e5943038	 ldr         r3, [r4, #0x38]
  00080	e3530000	 cmp         r3, #0
  00084	1affffed	 bne         |$LL3@Reset|

; 844  :     }
; 845  : 
; 846  :     Release();

  00088	e1a00004	 mov         r0, r4
  0008c	eb000000	 bl          |?Release@StreamContext@@QAAJXZ|

; 847  : 
; 848  :     return MMSYSERR_NOERROR;

  00090	e3a00000	 mov         r0, #0

; 849  : }

  00094	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00098	e12fff1e	 bx          lr
  0009c		 |$M35968|

			 ENDP  ; |?Reset@StreamContext@@UAAKXZ|, StreamContext::Reset

	EXPORT	|?ForceSpeaker@StreamContext@@QAAKH@Z|	; StreamContext::ForceSpeaker
	IMPORT	|?ForceSpeaker@HardwareContext@@QAAKH@Z| ; HardwareContext::ForceSpeaker
	IMPORT	|?g_pHWContext@@3PAVHardwareContext@@A|	; g_pHWContext

  00000			 AREA	 |.pdata|, PDATA
|$T35984| DCD	|$LN8@ForceSpeak|
	DCD	0x40001001
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?ForceSpeaker@StreamContext@@QAAKH@Z| PROC ; StreamContext::ForceSpeaker

; 859  : {

  00000		 |$LN8@ForceSpeak|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35981|
  00004	e3510000	 cmp         r1, #0

; 860  :     // Normalize to 0 or 1
; 861  :     bForceSpeaker = (bForceSpeaker!=0);
; 862  :     if (bForceSpeaker==m_bForceSpeaker)

  00008	e5903068	 ldr         r3, [r0, #0x68]
  0000c	13a01001	 movne       r1, #1
  00010	03a01000	 moveq       r1, #0
  00014	e1510003	 cmp         r1, r3

; 863  :     {
; 864  :         return MMSYSERR_NOERROR;

  00018	03a00000	 moveq       r0, #0

; 868  : }

  0001c	049de004	 ldreq       lr, [sp], #4
  00020	012fff1e	 bxeq        lr

; 865  :     }
; 866  :     m_bForceSpeaker = bForceSpeaker;
; 867  :     return g_pHWContext->ForceSpeaker(bForceSpeaker);

  00024	e59f3010	 ldr         r3, [pc, #0x10]
  00028	e5801068	 str         r1, [r0, #0x68]
  0002c	e5930000	 ldr         r0, [r3]
  00030	eb000000	 bl          |?ForceSpeaker@HardwareContext@@QAAKH@Z|

; 868  : }

  00034	e49de004	 ldr         lr, [sp], #4
  00038	e12fff1e	 bx          lr
  0003c		 |$LN9@ForceSpeak|
  0003c		 |$LN10@ForceSpeak|
  0003c	00000000	 DCD         |?g_pHWContext@@3PAVHardwareContext@@A|
  00040		 |$M35982|

			 ENDP  ; |?ForceSpeaker@StreamContext@@QAAKH@Z|, StreamContext::ForceSpeaker

	EXPORT	|?SetRate@WaveStreamContext@@UAAKK@Z|	; WaveStreamContext::SetRate
	IMPORT	|__rt_sdiv64by64|

  00000			 AREA	 |.pdata|, PDATA
|$T35998| DCD	|$LN5@SetRate|
	DCD	0x40001801
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SetRate@WaveStreamContext@@UAAKK@Z| PROC ; WaveStreamContext::SetRate

; 871  : {

  00000		 |$LN5@SetRate|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M35995|
  00004	e1a05001	 mov         r5, r1
  00008	e1a06000	 mov         r6, r0

; 872  :     m_dwMultiplier = dwMultiplier;
; 873  : 
; 874  :     UINT64 ClientRate;
; 875  : 
; 876  :     // Init with sample rate of source data
; 877  :     ClientRate = m_WaveFormat.nSamplesPerSec;
; 878  : 
; 879  :     // Multiply by 16.16 rate multiplier.
; 880  :     ClientRate *= m_dwMultiplier;

  0000c	e5d64028	 ldrb        r4, [r6, #0x28]
  00010	e5d63029	 ldrb        r3, [r6, #0x29]
  00014	e5d6202a	 ldrb        r2, [r6, #0x2A]
  00018	e5d6e02b	 ldrb        lr, [r6, #0x2B]
  0001c	e1843403	 orr         r3, r4, r3, lsl #8
  00020	e1833802	 orr         r3, r3, r2, lsl #16
  00024	e1833c0e	 orr         r3, r3, lr, lsl #24
  00028	e0832395	 umull       r2, r3, r5, r3

; 881  : 
; 882  :     // Now shift up to 32.32 to maintain accuracy for the coming divide
; 883  :     // Result is 48.16 resulting sample rate of source data.
; 884  :     ClientRate >>= 16;
; 885  : 
; 886  :     m_ClientRate = (DWORD)ClientRate;
; 887  : 
; 888  :     m_ClientRateInv = ((UINT32)(((1i64<<32)/m_ClientRate)));

  0002c	e3a00000	 mov         r0, #0
  00030	e1a03803	 mov         r3, r3, lsl #16
  00034	e183e822	 orr         lr, r3, r2, lsr #16
  00038	e1a0200e	 mov         r2, lr
  0003c	e3a01001	 mov         r1, #1
  00040	e3a03000	 mov         r3, #0
  00044	e5865074	 str         r5, [r6, #0x74]
  00048	e586e08c	 str         lr, [r6, #0x8C]
  0004c	eb000000	 bl          __rt_sdiv64by64
  00050	e5860090	 str         r0, [r6, #0x90]

; 889  : 
; 890  :     return MMSYSERR_NOERROR;

  00054	e3a00000	 mov         r0, #0

; 891  : }

  00058	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  0005c	e12fff1e	 bx          lr
  00060		 |$M35996|

			 ENDP  ; |?SetRate@WaveStreamContext@@UAAKK@Z|, WaveStreamContext::SetRate

	EXPORT	|?Render@WaveStreamContext@@UAAPAEPAE00PAUTRANSFER_STATUS@@@Z| ; WaveStreamContext::Render
	EXPORT	|??_C@_1GI@EBFCCJC@?$AAE?$AAX?$AAC?$AAE?$AAP?$AAT?$AAI?$AAO?$AAN?$AA?5?$AAI?$AAN?$AA?5?$AAI?$AAS?$AAT?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAs?$AAt?$AAr?$AAe?$AAa?$AAm?$AA?5?$AA0?$AAx?$AA?$CF?$AAx@| [ DATA ] ; `string'
	IMPORT	|NKDbgPrintfW|
	IMPORT	|__C_specific_handler|

  00000			 AREA	 |.pdata|, PDATA
|$T36032| DCD	|$LN31@Render|
	DCD	0xc0003c05

  00000			 AREA	 |.pdata|, PDATA
|$T36034| DCD	|$LN14@Render|
	DCD	0x40000602

  00000			 AREA	 |.xdata|, DATA
|$T36030| DCD	0x1
	DCD	|$LN18@Render|
	DCD	|$LN19@Render|
	DCD	|$LN14@Render|
	DCD	|$LN15@Render|

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GI@EBFCCJC@?$AAE?$AAX?$AAC?$AAE?$AAP?$AAT?$AAI?$AAO?$AAN?$AA?5?$AAI?$AAN?$AA?5?$AAI?$AAS?$AAT?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAs?$AAt?$AAr?$AAe?$AAa?$AAm?$AA?5?$AA0?$AAx?$AA?$CF?$AAx@| DCB "E"
	DCB	0x0, "X", 0x0, "C", 0x0, "E", 0x0, "P", 0x0, "T", 0x0, "I"
	DCB	0x0, "O", 0x0, "N", 0x0, " ", 0x0, "I", 0x0, "N", 0x0, " "
	DCB	0x0, "I", 0x0, "S", 0x0, "T", 0x0, " ", 0x0, "f", 0x0, "o"
	DCB	0x0, "r", 0x0, " ", 0x0, "s", 0x0, "t", 0x0, "r", 0x0, "e"
	DCB	0x0, "a", 0x0, "m", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "x", 0x0, ",", 0x0, " ", 0x0, "b", 0x0, "u", 0x0, "f"
	DCB	0x0, "f", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "x", 0x0, "!", 0x0, "!", 0x0, "!", 0x0, "!"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T36030|

  00008		 |?Render@WaveStreamContext@@UAAPAEPAE00PAUTRANSFER_STATUS@@@Z| PROC ; WaveStreamContext::Render

; 897  : {

  00008		 |$LN31@Render|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d000f	 stmdb       sp!, {r0 - r3}
  00010	e92d5bf0	 stmdb       sp!, {r4 - r9, r11, r12, lr}
  00014	e28db024	 add         r11, sp, #0x24
  00018	e24dd008	 sub         sp, sp, #8
  0001c		 |$LN29@Render|
  0001c	e1a09003	 mov         r9, r3
  00020	e58b900c	 str         r9, [r11, #0xC]
  00024	e1a07002	 mov         r7, r2
  00028	e58b7008	 str         r7, [r11, #8]
  0002c	e1a05001	 mov         r5, r1
  00030	e58b5004	 str         r5, [r11, #4]
  00034	e1a06000	 mov         r6, r0
  00038	e58b6000	 str         r6, [r11]

; 898  :     if (!m_bRunning || !m_lpCurrData)

  0003c	e5961010	 ldr         r1, [r6, #0x10]
  00040	e3510000	 cmp         r1, #0
  00044	0a000027	 beq         |$LN9@Render|
  00048	e5961044	 ldr         r1, [r6, #0x44]
  0004c	e3510000	 cmp         r1, #0
  00050	0a000024	 beq         |$LN9@Render|
  00054	e59b8010	 ldr         r8, [r11, #0x10]
  00058		 |$LL6@Render|

; 901  :     }
; 902  : 
; 903  :     while (pBuffer < pBufferEnd)

  00058	e1550007	 cmp         r5, r7
  0005c	2a000021	 bcs         |$LN9@Render|

; 904  :     {
; 905  :         while (m_lpCurrData>=m_lpCurrDataEnd)

  00060	ea000003	 b           |$LN28@Render|
  00064		 |$LL4@Render|

; 906  :         {
; 907  :             if (!GetNextBuffer())

  00064	e1a00006	 mov         r0, r6
  00068	eb000000	 bl          |?GetNextBuffer@StreamContext@@QAAPAEXZ|
  0006c	e3500000	 cmp         r0, #0
  00070	0a00001c	 beq         |$LN9@Render|
  00074		 |$LN28@Render|
  00074	e5963048	 ldr         r3, [r6, #0x48]
  00078	e5962044	 ldr         r2, [r6, #0x44]
  0007c	e1520003	 cmp         r2, r3
  00080	2afffff7	 bcs         |$LL4@Render|
  00084		 |$LN18@Render|

; 908  :             {
; 909  :                 return pBuffer;
; 910  :             }
; 911  :         }
; 912  : 
; 913  :         _try
; 914  :         {
; 915  : 
; 916  :             pBuffer = Render2(pBuffer, pBufferEnd, pBufferLast, pTransferStatus);

  00084	e5961000	 ldr         r1, [r6]
  00088	e1a03009	 mov         r3, r9
  0008c	e1a02007	 mov         r2, r7
  00090	e5914040	 ldr         r4, [r1, #0x40]
  00094	e1a01005	 mov         r1, r5
  00098	e1a00006	 mov         r0, r6
  0009c	e58d8000	 str         r8, [sp]
  000a0	e1a0e00f	 mov         lr, pc
  000a4	e12fff14	 bx          r4
  000a8	e1a05000	 mov         r5, r0
  000ac	e58b5004	 str         r5, [r11, #4]
  000b0		 |$LN19@Render|

; 917  :         }

  000b0	eaffffe8	 b           |$LL6@Render|
  000b4		 |$LN15@Render|

; 919  :         {
; 920  :             RETAILMSG(1, (TEXT("EXCEPTION IN IST for stream 0x%x, buffer 0x%x!!!!\r\n"), this, m_lpCurrData));

  000b4	e59b6000	 ldr         r6, [r11]
  000b8	e59f004c	 ldr         r0, [pc, #0x4C]
  000bc	e5962044	 ldr         r2, [r6, #0x44]
  000c0	e1a01006	 mov         r1, r6
  000c4	eb000000	 bl          NKDbgPrintfW

; 921  :             m_lpCurrData=m_lpCurrDataEnd; // Pretend we finished reading the application buffer

  000c8	e5963048	 ldr         r3, [r6, #0x48]
  000cc	e5863044	 str         r3, [r6, #0x44]
  000d0	e59b8010	 ldr         r8, [r11, #0x10]
  000d4	e59b900c	 ldr         r9, [r11, #0xC]
  000d8	e59b7008	 ldr         r7, [r11, #8]
  000dc	e59b5004	 ldr         r5, [r11, #4]
  000e0	eaffffdc	 b           |$LL6@Render|
  000e4		 |$LN26@Render|

; 899  :     {
; 900  :         return pBuffer;

  000e4	e51b5028	 ldr         r5, [r11, #-0x28]
  000e8		 |$LN9@Render|

; 922  :         }
; 923  :     }
; 924  : 
; 925  :     return pBuffer;
; 926  : }

  000e8	e1a00005	 mov         r0, r5
  000ec	e24bd024	 sub         sp, r11, #0x24
  000f0	e89d6bf0	 ldmia       sp, {r4 - r9, r11, sp, lr}
  000f4	e12fff1e	 bx          lr

			 ENDP  ; |?Render@WaveStreamContext@@UAAPAEPAE00PAUTRANSFER_STATUS@@@Z|, WaveStreamContext::Render

  000f8		 |$LN14@Render|
  000f8		 |$LN30@Render|

; 918  :         _except (EXCEPTION_EXECUTE_HANDLER)

  000f8	e52de004	 str         lr, [sp, #-4]!
  000fc	e24dd004	 sub         sp, sp, #4
  00100		 |$LN17@Render|
  00100		 |$LN33@Render|
  00100	e3a00001	 mov         r0, #1
  00104		 |$LN16@Render|
  00104	e28dd004	 add         sp, sp, #4
  00108	e49df004	 ldr         pc, [sp], #4
  0010c		 |$LN35@Render|
  0010c		 |$LN36@Render|
  0010c	00000000	 DCD         |??_C@_1GI@EBFCCJC@?$AAE?$AAX?$AAC?$AAE?$AAP?$AAT?$AAI?$AAO?$AAN?$AA?5?$AAI?$AAN?$AA?5?$AAI?$AAS?$AAT?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAs?$AAt?$AAr?$AAe?$AAa?$AAm?$AA?5?$AA0?$AAx?$AA?$CF?$AAx@|
  00110		 |$LN34@Render|
  00110		 |$LN32@Render|
	EXPORT	|?ClearBuffer@StreamContext@@SAXPAE0@Z|	; StreamContext::ClearBuffer
	IMPORT	|memset|

  00000			 AREA	 |.pdata|, PDATA
|$T36050| DCD	|$LN5@ClearBuffe|
	DCD	0x40000601
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?ClearBuffer@StreamContext@@SAXPAE0@Z| PROC ; StreamContext::ClearBuffer

; 929  : {

  00000		 |$LN5@ClearBuffe|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M36047|

; 930  :     memset(pStart,0,pEnd-pStart);

  00004	e0412000	 sub         r2, r1, r0
  00008	e3a01000	 mov         r1, #0
  0000c	eb000000	 bl          memset

; 931  : }

  00010	e49de004	 ldr         lr, [sp], #4
  00014	e12fff1e	 bx          lr
  00018		 |$M36048|

			 ENDP  ; |?ClearBuffer@StreamContext@@SAXPAE0@Z|, StreamContext::ClearBuffer

	EXPORT	|?GetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| ; StreamContext::GetProperty
	IMPORT	|?GetProperty@DeviceContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| ; DeviceContext::GetProperty

  00000			 AREA	 |.pdata|, PDATA
|$T36061| DCD	|$LN5@GetPropert|
	DCD	0x40000501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| PROC ; StreamContext::GetProperty

; 934  : {

  00000		 |$LN5@GetPropert|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M36058|

; 935  :     // For anything we don't recognize, pass it on to the device context.
; 936  :     return m_pDeviceContext->GetProperty(pPropInfo);

  00004	e5900050	 ldr         r0, [r0, #0x50]
  00008	eb000000	 bl          |?GetProperty@DeviceContext@@QAAKPAUtag_WAVEPROPINFO@@@Z|

; 937  : }

  0000c	e49de004	 ldr         lr, [sp], #4
  00010	e12fff1e	 bx          lr
  00014		 |$M36059|

			 ENDP  ; |?GetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z|, StreamContext::GetProperty

	EXPORT	|?SetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| ; StreamContext::SetProperty
	IMPORT	|?SetProperty@DeviceContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| ; DeviceContext::SetProperty

  00000			 AREA	 |.pdata|, PDATA
|$T36072| DCD	|$LN5@SetPropert|
	DCD	0x40000501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| PROC ; StreamContext::SetProperty

; 940  : {

  00000		 |$LN5@SetPropert|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M36069|

; 941  :     // For anything we don't recognize, pass it on to the device context.
; 942  :     return m_pDeviceContext->SetProperty(pPropInfo);

  00004	e5900050	 ldr         r0, [r0, #0x50]
  00008	eb000000	 bl          |?SetProperty@DeviceContext@@QAAKPAUtag_WAVEPROPINFO@@@Z|

; 943  : }

  0000c	e49de004	 ldr         lr, [sp], #4
  00010	e12fff1e	 bx          lr
  00014		 |$M36070|

			 ENDP  ; |?SetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z|, StreamContext::SetProperty

	IMPORT	|??3@YAXPAX@Z|				; operator delete

  00000			 AREA	 |.pdata|, PDATA
|$T36086| DCD	|$LN8@scalar|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |??_GStreamContext@@UAAPAXI@Z| PROC	; StreamContext::`scalar deleting destructor'
  00000		 |$LN8@scalar|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M36083|
  00004	e1a04000	 mov         r4, r0
  00008	e59f3014	 ldr         r3, [pc, #0x14]
  0000c	e3110001	 tst         r1, #1
  00010	e5843000	 str         r3, [r4]
  00014	1b000000	 blne        |??3@YAXPAX@Z|
  00018	e1a00004	 mov         r0, r4
  0001c	e8bd4010	 ldmia       sp!, {r4, lr}
  00020	e12fff1e	 bx          lr
  00024		 |$LN9@scalar|
  00024		 |$LN10@scalar|
  00024	00000000	 DCD         |??_7StreamContext@@6B@|
  00028		 |$M36084|

			 ENDP  ; |??_GStreamContext@@UAAPAXI@Z|, StreamContext::`scalar deleting destructor'


  00000			 AREA	 |.pdata|, PDATA
|$T36099| DCD	|$LN10@GainChange|
	DCD	0x40000f01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GainChange@StreamContext@@UAAXXZ| PROC ; StreamContext::GainChange

; 118  : {

  00000		 |$LN10@GainChange|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M36096|
  00004	e1a04000	 mov         r4, r0

; 119  :     for (int i=0; i<2; i++)

  00008	e3a05000	 mov         r5, #0
  0000c	e1a06004	 mov         r6, r4
  00010		 |$LL3@GainChange|

; 120  :     {
; 121  : #if (MONO_GAIN)
; 122  :         m_fxpGain[i] = MapGain(m_dwGain,0);
; 123  : #else
; 124  :         m_fxpGain[i] = MapGain(m_dwGain,i);

  00010	e5941058	 ldr         r1, [r4, #0x58]
  00014	e1a02005	 mov         r2, r5
  00018	e1a00004	 mov         r0, r4
  0001c	eb000000	 bl          |?MapGain@StreamContext@@QAAKKK@Z|
  00020	e2855001	 add         r5, r5, #1
  00024	e5860060	 str         r0, [r6, #0x60]
  00028	e2866004	 add         r6, r6, #4
  0002c	e3550002	 cmp         r5, #2
  00030	bafffff6	 blt         |$LL3@GainChange|

; 125  : #endif
; 126  :     }
; 127  : }

  00034	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00038	e12fff1e	 bx          lr
  0003c		 |$M36097|

			 ENDP  ; |?GainChange@StreamContext@@UAAXXZ|, StreamContext::GainChange


  00000			 AREA	 |.pdata|, PDATA
|$T36126| DCD	|$LN16@Close|
	DCD	0x40001801
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Close@StreamContext@@UAAKXZ| PROC	; StreamContext::Close

; 197  : {

  00000		 |$LN16@Close|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M36123|
  00004	e1a04000	 mov         r4, r0

; 198  :     if (StillPlaying())

  00008	e5943038	 ldr         r3, [r4, #0x38]
  0000c	e3530000	 cmp         r3, #0

; 199  :     {
; 200  :         return WAVERR_STILLPLAYING;

  00010	13a00021	 movne       r0, #0x21

; 210  : }

  00014	18bd4010	 ldmneia     sp!, {r4, lr}
  00018	112fff1e	 bxne        lr

; 201  :     }
; 202  : 
; 203  :     // Be sure to turn off speaker if we turned it on.
; 204  :     ForceSpeaker(FALSE);

  0001c	e5943068	 ldr         r3, [r4, #0x68]
  00020	e3530000	 cmp         r3, #0
  00024	159f3030	 ldrne       r3, [pc, #0x30]
  00028	13a02000	 movne       r2, #0
  0002c	15842068	 strne       r2, [r4, #0x68]
  00030	15930000	 ldrne       r0, [r3]
  00034	13a01000	 movne       r1, #0
  00038	1b000000	 blne        |?ForceSpeaker@HardwareContext@@QAAKH@Z|

; 205  : 
; 206  :     // DEBUGMSG(1, (TEXT("Closing stream 0x%x\r\n"),this));
; 207  :     DoCallbackStreamClosed();

  0003c	e5943000	 ldr         r3, [r4]
  00040	e1a00004	 mov         r0, r4
  00044	e593302c	 ldr         r3, [r3, #0x2C]
  00048	e1a0e00f	 mov         lr, pc
  0004c	e12fff13	 bx          r3

; 208  : 
; 209  :     return MMSYSERR_NOERROR;

  00050	e3a00000	 mov         r0, #0

; 210  : }

  00054	e8bd4010	 ldmia       sp!, {r4, lr}
  00058	e12fff1e	 bx          lr
  0005c		 |$LN17@Close|
  0005c		 |$LN18@Close|
  0005c	00000000	 DCD         |?g_pHWContext@@3PAVHardwareContext@@A|
  00060		 |$M36124|

			 ENDP  ; |?Close@StreamContext@@UAAKXZ|, StreamContext::Close

	END
