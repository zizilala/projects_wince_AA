; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\BUS\WRAPPER\Stream.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|?Release@RefCount_t@@QAAJXZ|		; RefCount_t::Release
	IMPORT	|InterlockedDecrement|
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\bus\inc\driver.hxx

  00000			 AREA	 |.pdata|, PDATA
|$T35752| DCD	|$LN8@Release|
	DCD	0x40001101
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Release@RefCount_t@@QAAJXZ| PROC	; RefCount_t::Release

; 59   :         ) {

  00000		 |$LN8@Release|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M35749|
  00004	e1a04000	 mov         r4, r0

; 60   :         LONG count = InterlockedDecrement(&m_refCount);

  00008	e2840004	 add         r0, r4, #4
  0000c	eb000000	 bl          InterlockedDecrement
  00010	e1a05000	 mov         r5, r0

; 61   :         if (count <= 0) delete this;

  00014	e3550000	 cmp         r5, #0
  00018	ca000006	 bgt         |$LN4@Release|
  0001c	e3540000	 cmp         r4, #0
  00020	15943000	 ldrne       r3, [r4]
  00024	13a01001	 movne       r1, #1
  00028	11a00004	 movne       r0, r4
  0002c	15933000	 ldrne       r3, [r3]
  00030	11a0e00f	 movne       lr, pc
  00034	112fff13	 bxne        r3
  00038		 |$LN4@Release|

; 62   :         return count;
; 63   :         };

  00038	e1a00005	 mov         r0, r5
  0003c	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00040	e12fff1e	 bx          lr
  00044		 |$M35750|

			 ENDP  ; |?Release@RefCount_t@@QAAJXZ|, RefCount_t::Release

	EXPORT	|Init|
	IMPORT	|?CreateDevice@Driver_t@@SAPAV1@XZ|	; Driver_t::CreateDevice
; File c:\wince600\platform\common\src\soc\common_ti_v1\common_ti\bus\wrapper\stream.cpp

  00000			 AREA	 |.pdata|, PDATA
|$T35764| DCD	|$LN6@Init|
	DCD	0x40001501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |Init|	 PROC

; 24   : {

  00000		 |$LN6@Init|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M35761|
  00004	e1a05001	 mov         r5, r1
  00008	e1a06000	 mov         r6, r0

; 25   :     Driver_t *pDevice;
; 26   : 
; 27   :     // Create bus driver
; 28   :     pDevice = Driver_t::CreateDevice();

  0000c	eb000000	 bl          |?CreateDevice@Driver_t@@SAPAV1@XZ|
  00010	e1b04000	 movs        r4, r0

; 29   :     if ((pDevice != NULL) && !pDevice->Init(activeRegName, pBusContext))

  00014	0a00000b	 beq         |$LN1@Init|
  00018	e5943000	 ldr         r3, [r4]
  0001c	e1a02005	 mov         r2, r5
  00020	e1a01006	 mov         r1, r6
  00024	e5933004	 ldr         r3, [r3, #4]
  00028	e1a00004	 mov         r0, r4
  0002c	e1a0e00f	 mov         lr, pc
  00030	e12fff13	 bx          r3
  00034	e3500000	 cmp         r0, #0
  00038	1a000002	 bne         |$LN1@Init|

; 30   :         {
; 31   :         pDevice->Release();

  0003c	e1a00004	 mov         r0, r4
  00040	eb000000	 bl          |?Release@RefCount_t@@QAAJXZ|

; 32   :         pDevice = NULL;

  00044	e3a04000	 mov         r4, #0
  00048		 |$LN1@Init|

; 33   :         }
; 34   :     return reinterpret_cast<DWORD>(pDevice);
; 35   : }

  00048	e1a00004	 mov         r0, r4
  0004c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00050	e12fff1e	 bx          lr
  00054		 |$M35762|

			 ENDP  ; |Init|

	EXPORT	|Deinit|

  00000			 AREA	 |.pdata|, PDATA
|$T35775| DCD	|$LN5@Deinit|
	DCD	0x40000c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |Deinit| PROC

; 44   : {

  00000		 |$LN5@Deinit|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M35772|
  00004	e1a05000	 mov         r5, r0

; 45   :     BOOL rc = FALSE;
; 46   :     Driver_t *pDevice = reinterpret_cast<Driver_t*>(context);
; 47   :     rc = pDevice->Deinit();

  00008	e5953000	 ldr         r3, [r5]
  0000c	e5933008	 ldr         r3, [r3, #8]
  00010	e1a0e00f	 mov         lr, pc
  00014	e12fff13	 bx          r3
  00018	e1a04000	 mov         r4, r0

; 48   :     pDevice->Release();

  0001c	e1a00005	 mov         r0, r5
  00020	eb000000	 bl          |?Release@RefCount_t@@QAAJXZ|

; 49   :     return rc;
; 50   : }

  00024	e1a00004	 mov         r0, r4
  00028	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0002c	e12fff1e	 bx          lr
  00030		 |$M35773|

			 ENDP  ; |Deinit|

	EXPORT	|PowerUp|

  00000			 AREA	 |.pdata|, PDATA
|$T35783| DCD	|$LN5@PowerUp|
	DCD	0x40000701
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |PowerUp| PROC

; 59   : {

  00000		 |$LN5@PowerUp|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35780|

; 60   :     Driver_t *pDevice = reinterpret_cast<Driver_t*>(context);
; 61   :     pDevice->PowerUp();

  00004	e5903000	 ldr         r3, [r0]
  00008	e5933010	 ldr         r3, [r3, #0x10]
  0000c	e1a0e00f	 mov         lr, pc
  00010	e12fff13	 bx          r3

; 62   : }

  00014	e49de004	 ldr         lr, [sp], #4
  00018	e12fff1e	 bx          lr
  0001c		 |$M35781|

			 ENDP  ; |PowerUp|

	EXPORT	|PowerDown|

  00000			 AREA	 |.pdata|, PDATA
|$T35791| DCD	|$LN5@PowerDown|
	DCD	0x40000701
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |PowerDown| PROC

; 71   : {

  00000		 |$LN5@PowerDown|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35788|

; 72   :     Driver_t *pDevice = reinterpret_cast<Driver_t*>(context);
; 73   :     pDevice->PowerDown();

  00004	e5903000	 ldr         r3, [r0]
  00008	e5933014	 ldr         r3, [r3, #0x14]
  0000c	e1a0e00f	 mov         lr, pc
  00010	e12fff13	 bx          r3

; 74   : }

  00014	e49de004	 ldr         lr, [sp], #4
  00018	e12fff1e	 bx          lr
  0001c		 |$M35789|

			 ENDP  ; |PowerDown|

	EXPORT	|Open|

  00000			 AREA	 |.pdata|, PDATA
|$T35803| DCD	|$LN5@Open|
	DCD	0x40000701
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |Open|	 PROC

; 85   : {

  00000		 |$LN5@Open|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M35800|

; 86   :     Driver_t* pDevice = reinterpret_cast<Driver_t*>(context);
; 87   :     DriverContext_t* pContext = pDevice->Open(accessCode, shareMode);
; 88   :     return reinterpret_cast<DWORD>(pContext);

  00004	e5903000	 ldr         r3, [r0]
  00008	e5933018	 ldr         r3, [r3, #0x18]
  0000c	e1a0e00f	 mov         lr, pc
  00010	e12fff13	 bx          r3

; 89   : }

  00014	e49de004	 ldr         lr, [sp], #4
  00018	e12fff1e	 bx          lr
  0001c		 |$M35801|

			 ENDP  ; |Open|

	EXPORT	|Close|

  00000			 AREA	 |.pdata|, PDATA
|$T35814| DCD	|$LN5@Close|
	DCD	0x40000c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |Close| PROC

; 98   : {

  00000		 |$LN5@Close|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M35811|
  00004	e1a05000	 mov         r5, r0

; 99   :     BOOL rc = FALSE;
; 100  :     DriverContext_t* pContext = reinterpret_cast<DriverContext_t*>(context);
; 101  :     rc = pContext->Close();

  00008	e5953000	 ldr         r3, [r5]
  0000c	e5933010	 ldr         r3, [r3, #0x10]
  00010	e1a0e00f	 mov         lr, pc
  00014	e12fff13	 bx          r3
  00018	e1a04000	 mov         r4, r0

; 102  :     pContext->Release();

  0001c	e1a00005	 mov         r0, r5
  00020	eb000000	 bl          |?Release@RefCount_t@@QAAJXZ|

; 103  :     return rc;
; 104  : }

  00024	e1a00004	 mov         r0, r4
  00028	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0002c	e12fff1e	 bx          lr
  00030		 |$M35812|

			 ENDP  ; |Close|

	EXPORT	|IOControl|

  00000			 AREA	 |.pdata|, PDATA
|$T35827| DCD	|$LN5@IOControl|
	DCD	0x40000f02
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |IOControl| PROC

; 119  : {

  00000		 |$LN5@IOControl|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004	e24dd00c	 sub         sp, sp, #0xC
  00008		 |$M35824|

; 120  :     DriverContext_t* pContext = reinterpret_cast<DriverContext_t*>(context);
; 121  :     return pContext->IOControl(
; 122  :         code, pInBuffer, inSize, pOutBuffer, outSize, pOutSize
; 123  :         );

  00008	e590e000	 ldr         lr, [r0]
  0000c	e59d4028	 ldr         r4, [sp, #0x28]
  00010	e59d5024	 ldr         r5, [sp, #0x24]
  00014	e59d6020	 ldr         r6, [sp, #0x20]
  00018	e59e7018	 ldr         r7, [lr, #0x18]
  0001c	e58d4008	 str         r4, [sp, #8]
  00020	e58d5004	 str         r5, [sp, #4]
  00024	e58d6000	 str         r6, [sp]
  00028	e1a0e00f	 mov         lr, pc
  0002c	e12fff17	 bx          r7

; 124  : }

  00030	e28dd00c	 add         sp, sp, #0xC
  00034	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  00038	e12fff1e	 bx          lr
  0003c		 |$M35825|

			 ENDP  ; |IOControl|

	END
