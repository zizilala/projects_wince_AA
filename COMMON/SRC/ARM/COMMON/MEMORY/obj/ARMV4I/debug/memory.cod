; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\COMMON\SRC\ARM\COMMON\MEMORY\memory.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|??_C@_1DE@DAHNLBLJ@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAA?$AAt?$AAo?$AAV?$AAA?$AA?$CI?$AAv?$AAa?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CO@JEIJEAKF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAA?$AAt?$AAo?$AAV?$AAA?$AA?$CI?$AA0?$AAx?$AA?$CF?$AAx?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|OALPAtoVA|
	IMPORT	|NKPhysToVirt|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|dpCurSettings|

  00000			 AREA	 |.pdata|, PDATA
|$T41149| DCD	|$LN9@OALPAtoVA|
	DCD	0x40004a04
; File c:\wince600\platform\common\src\arm\common\memory\memory.c

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DE@DAHNLBLJ@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAA?$AAt?$AAo?$AAV?$AAA?$AA?$CI?$AAv?$AAa?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "A", 0x0, "t"
	DCB	0x0, "o", 0x0, "V", 0x0, "A", 0x0, "(", 0x0, "v", 0x0, "a"
	DCB	0x0, " ", 0x0, "=", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CO@JEIJEAKF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAA?$AAt?$AAo?$AAV?$AAA?$AA?$CI?$AA0?$AAx?$AA?$CF?$AAx?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "P", 0x0, "A", 0x0, "t"
	DCB	0x0, "o", 0x0, "V", 0x0, "A", 0x0, "(", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Odtp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |OALPAtoVA| PROC

; 31   : {

  00000		 |$LN9@OALPAtoVA|
  00000	e1a0c00d	 mov         r12, sp
  00004	e92d0003	 stmdb       sp!, {r0, r1}
  00008	e92d5000	 stmdb       sp!, {r12, lr}
  0000c	e24dd018	 sub         sp, sp, #0x18
  00010		 |$M41146|

; 32   :     UINT32 offset;
; 33   :     UINT8 *va = NULL;

  00010	e3a03000	 mov         r3, #0
  00014	e58d3000	 str         r3, [sp]

; 34   : 
; 35   :     OALMSG(OAL_MEMORY&&OAL_FUNC, (L"+OALPAtoVA(0x%x, %d)\r\n", pa, cached));

  00018	e59f3100	 ldr         r3, [pc, #0x100]
  0001c	e5933440	 ldr         r3, [r3, #0x440]
  00020	e3130c02	 tst         r3, #2, 24
  00024	0a00000a	 beq         |$LN3@OALPAtoVA|
  00028	e59f30f0	 ldr         r3, [pc, #0xF0]
  0002c	e5933440	 ldr         r3, [r3, #0x440]
  00030	e3130004	 tst         r3, #4
  00034	0a000006	 beq         |$LN3@OALPAtoVA|
  00038	e59d2024	 ldr         r2, [sp, #0x24]
  0003c	e59d1020	 ldr         r1, [sp, #0x20]
  00040	e59f00dc	 ldr         r0, [pc, #0xDC]
  00044	eb000000	 bl          NKDbgPrintfW
  00048	e3a03001	 mov         r3, #1
  0004c	e58d300c	 str         r3, [sp, #0xC]
  00050	ea000001	 b           |$LN4@OALPAtoVA|
  00054		 |$LN3@OALPAtoVA|
  00054	e3a03000	 mov         r3, #0
  00058	e58d300c	 str         r3, [sp, #0xC]
  0005c		 |$LN4@OALPAtoVA|

; 36   : 
; 37   :     offset = pa & (PAGE_SIZE - 1);

  0005c	e3e03b0d	 mvn         r3, #0xD, 22
  00060	e22330fb	 eor         r3, r3, #0xFB
  00064	e5933000	 ldr         r3, [r3]
  00068	e2432001	 sub         r2, r3, #1
  0006c	e59d3020	 ldr         r3, [sp, #0x20]
  00070	e0033002	 and         r3, r3, r2
  00074	e58d3004	 str         r3, [sp, #4]

; 38   :     pa &= ~(PAGE_SIZE - 1);

  00078	e3e03b0d	 mvn         r3, #0xD, 22
  0007c	e22330fb	 eor         r3, r3, #0xFB
  00080	e5933000	 ldr         r3, [r3]
  00084	e2433001	 sub         r3, r3, #1
  00088	e1e02003	 mvn         r2, r3
  0008c	e59d3020	 ldr         r3, [sp, #0x20]
  00090	e0033002	 and         r3, r3, r2
  00094	e58d3020	 str         r3, [sp, #0x20]

; 39   :     va = NKPhysToVirt( pa >> 8, cached );

  00098	e59d1024	 ldr         r1, [sp, #0x24]
  0009c	e59d3020	 ldr         r3, [sp, #0x20]
  000a0	e1a00423	 mov         r0, r3, lsr #8
  000a4	eb000000	 bl          NKPhysToVirt
  000a8	e58d0010	 str         r0, [sp, #0x10]
  000ac	e59d3010	 ldr         r3, [sp, #0x10]
  000b0	e58d3000	 str         r3, [sp]

; 40   :     va += offset;

  000b4	e59d2000	 ldr         r2, [sp]
  000b8	e59d3004	 ldr         r3, [sp, #4]
  000bc	e0823003	 add         r3, r2, r3
  000c0	e58d3000	 str         r3, [sp]

; 41   : 
; 42   :     // Indicate the virtual address
; 43   :     OALMSG(OAL_MEMORY&&OAL_FUNC, (L"-OALPAtoVA(va = 0x%08x)\r\n", va));

  000c4	e59f3054	 ldr         r3, [pc, #0x54]
  000c8	e5933440	 ldr         r3, [r3, #0x440]
  000cc	e3130c02	 tst         r3, #2, 24
  000d0	0a000009	 beq         |$LN5@OALPAtoVA|
  000d4	e59f3044	 ldr         r3, [pc, #0x44]
  000d8	e5933440	 ldr         r3, [r3, #0x440]
  000dc	e3130004	 tst         r3, #4
  000e0	0a000005	 beq         |$LN5@OALPAtoVA|
  000e4	e59d1000	 ldr         r1, [sp]
  000e8	e59f002c	 ldr         r0, [pc, #0x2C]
  000ec	eb000000	 bl          NKDbgPrintfW
  000f0	e3a03001	 mov         r3, #1
  000f4	e58d3014	 str         r3, [sp, #0x14]
  000f8	ea000001	 b           |$LN6@OALPAtoVA|
  000fc		 |$LN5@OALPAtoVA|
  000fc	e3a03000	 mov         r3, #0
  00100	e58d3014	 str         r3, [sp, #0x14]
  00104		 |$LN6@OALPAtoVA|

; 44   :     return va;

  00104	e59d3000	 ldr         r3, [sp]
  00108	e58d3008	 str         r3, [sp, #8]

; 45   : }

  0010c	e59d0008	 ldr         r0, [sp, #8]
  00110	e28dd018	 add         sp, sp, #0x18
  00114	e89d6000	 ldmia       sp, {sp, lr}
  00118	e12fff1e	 bx          lr
  0011c		 |$LN10@OALPAtoVA|
  0011c		 |$LN11@OALPAtoVA|
  0011c	00000000	 DCD         |??_C@_1DE@DAHNLBLJ@?$AA?9?$AAO?$AAA?$AAL?$AAP?$AAA?$AAt?$AAo?$AAV?$AAA?$AA?$CI?$AAv?$AAa?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00120		 |$LN12@OALPAtoVA|
  00120	00000000	 DCD         |dpCurSettings|
  00124		 |$LN13@OALPAtoVA|
  00124	00000000	 DCD         |??_C@_1CO@JEIJEAKF@?$AA?$CL?$AAO?$AAA?$AAL?$AAP?$AAA?$AAt?$AAo?$AAV?$AAA?$AA?$CI?$AA0?$AAx?$AA?$CF?$AAx?$AA?0?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00128		 |$M41147|

			 ENDP  ; |OALPAtoVA|

	EXPORT	|??_C@_1DA@BBOHBBNH@?$AA?9?$AAO?$AAA?$AAL?$AAV?$AAA?$AAt?$AAo?$AAP?$AAA?$AA?$CI?$AAp?$AAa?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CK@LKNIEAFP@?$AA?$CL?$AAO?$AAA?$AAL?$AAV?$AAA?$AAt?$AAo?$AAP?$AAA?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|OALVAtoPA|
	IMPORT	|NKVirtToPhys|

  00008			 AREA	 |.pdata|, PDATA
|$T41163| DCD	|$LN11@OALVAtoPA|
	DCD	0x40004e04

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DA@BBOHBBNH@?$AA?9?$AAO?$AAA?$AAL?$AAV?$AAA?$AAt?$AAo?$AAP?$AAA?$AA?$CI?$AAp?$AAa?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "V", 0x0, "A", 0x0, "t"
	DCB	0x0, "o", 0x0, "P", 0x0, "A", 0x0, "(", 0x0, "p", 0x0, "a"
	DCB	0x0, " ", 0x0, "=", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@LKNIEAFP@?$AA?$CL?$AAO?$AAA?$AAL?$AAV?$AAA?$AAt?$AAo?$AAP?$AAA?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "O", 0x0, "A", 0x0, "L", 0x0, "V", 0x0, "A", 0x0, "t"
	DCB	0x0, "o", 0x0, "P", 0x0, "A", 0x0, "(", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Odtp

  00128			 AREA	 |.text|, CODE, ARM

  00128		 |OALVAtoPA| PROC

; 55   : {

  00128		 |$LN11@OALVAtoPA|
  00128	e1a0c00d	 mov         r12, sp
  0012c	e92d0001	 stmdb       sp!, {r0}
  00130	e92d5000	 stmdb       sp!, {r12, lr}
  00134	e24dd01c	 sub         sp, sp, #0x1C
  00138		 |$M41160|

; 56   :     UINT32 va = (UINT32)pVA;

  00138	e59d3024	 ldr         r3, [sp, #0x24]
  0013c	e58d3000	 str         r3, [sp]

; 57   :     UINT32 offset;
; 58   :     UINT32 pa;
; 59   : 
; 60   :     OALMSG(OAL_MEMORY&&OAL_FUNC, (L"+OALVAtoPA(0x%08x)\r\n", pVA));

  00140	e59f3110	 ldr         r3, [pc, #0x110]
  00144	e5933440	 ldr         r3, [r3, #0x440]
  00148	e3130c02	 tst         r3, #2, 24
  0014c	0a000009	 beq         |$LN5@OALVAtoPA|
  00150	e59f3100	 ldr         r3, [pc, #0x100]
  00154	e5933440	 ldr         r3, [r3, #0x440]
  00158	e3130004	 tst         r3, #4
  0015c	0a000005	 beq         |$LN5@OALVAtoPA|
  00160	e59d1024	 ldr         r1, [sp, #0x24]
  00164	e59f00f0	 ldr         r0, [pc, #0xF0]
  00168	eb000000	 bl          NKDbgPrintfW
  0016c	e3a03001	 mov         r3, #1
  00170	e58d3010	 str         r3, [sp, #0x10]
  00174	ea000001	 b           |$LN6@OALVAtoPA|
  00178		 |$LN5@OALVAtoPA|
  00178	e3a03000	 mov         r3, #0
  0017c	e58d3010	 str         r3, [sp, #0x10]
  00180		 |$LN6@OALVAtoPA|

; 61   : 
; 62   :     offset = va & (PAGE_SIZE - 1);

  00180	e3e03b0d	 mvn         r3, #0xD, 22
  00184	e22330fb	 eor         r3, r3, #0xFB
  00188	e5933000	 ldr         r3, [r3]
  0018c	e2432001	 sub         r2, r3, #1
  00190	e59d3000	 ldr         r3, [sp]
  00194	e0033002	 and         r3, r3, r2
  00198	e58d3008	 str         r3, [sp, #8]

; 63   :     va &= ~(PAGE_SIZE - 1);

  0019c	e3e03b0d	 mvn         r3, #0xD, 22
  001a0	e22330fb	 eor         r3, r3, #0xFB
  001a4	e5933000	 ldr         r3, [r3]
  001a8	e2433001	 sub         r3, r3, #1
  001ac	e1e02003	 mvn         r2, r3
  001b0	e59d3000	 ldr         r3, [sp]
  001b4	e0033002	 and         r3, r3, r2
  001b8	e58d3000	 str         r3, [sp]

; 64   :     
; 65   :     pa = (UINT32)NKVirtToPhys( (LPCVOID)va );

  001bc	e59d0000	 ldr         r0, [sp]
  001c0	eb000000	 bl          NKVirtToPhys
  001c4	e58d0014	 str         r0, [sp, #0x14]
  001c8	e59d3014	 ldr         r3, [sp, #0x14]
  001cc	e58d3004	 str         r3, [sp, #4]

; 66   : 
; 67   :     if (INVALID_PHYSICAL_ADDRESS == pa) {

  001d0	e59d3004	 ldr         r3, [sp, #4]
  001d4	e3730001	 cmn         r3, #1
  001d8	1a000002	 bne         |$LN2@OALVAtoPA|

; 68   :         pa = 0;     // BUGBUG: 0 can be a valid physical address...,

  001dc	e3a03000	 mov         r3, #0
  001e0	e58d3004	 str         r3, [sp, #4]

; 69   :                     // BUGBUG: We should remove this line and change all calls to OALVAtoPA
; 70   :                     // BUGBUG: to check INVALID_PHYSICAL_ADDRESS instead of 0.
; 71   :     } else {

  001e4	ea000004	 b           |$LN1@OALVAtoPA|
  001e8		 |$LN2@OALVAtoPA|

; 72   :         pa = (pa << 8) + offset;

  001e8	e59d3004	 ldr         r3, [sp, #4]
  001ec	e1a02403	 mov         r2, r3, lsl #8
  001f0	e59d3008	 ldr         r3, [sp, #8]
  001f4	e0823003	 add         r3, r2, r3
  001f8	e58d3004	 str         r3, [sp, #4]
  001fc		 |$LN1@OALVAtoPA|

; 73   :     }
; 74   : 
; 75   :     // Indicate physical address 
; 76   :     OALMSG(OAL_MEMORY&&OAL_FUNC, (L"-OALVAtoPA(pa = 0x%x)\r\n", pa));

  001fc	e59f3054	 ldr         r3, [pc, #0x54]
  00200	e5933440	 ldr         r3, [r3, #0x440]
  00204	e3130c02	 tst         r3, #2, 24
  00208	0a000009	 beq         |$LN7@OALVAtoPA|
  0020c	e59f3044	 ldr         r3, [pc, #0x44]
  00210	e5933440	 ldr         r3, [r3, #0x440]
  00214	e3130004	 tst         r3, #4
  00218	0a000005	 beq         |$LN7@OALVAtoPA|
  0021c	e59d1004	 ldr         r1, [sp, #4]
  00220	e59f002c	 ldr         r0, [pc, #0x2C]
  00224	eb000000	 bl          NKDbgPrintfW
  00228	e3a03001	 mov         r3, #1
  0022c	e58d3018	 str         r3, [sp, #0x18]
  00230	ea000001	 b           |$LN8@OALVAtoPA|
  00234		 |$LN7@OALVAtoPA|
  00234	e3a03000	 mov         r3, #0
  00238	e58d3018	 str         r3, [sp, #0x18]
  0023c		 |$LN8@OALVAtoPA|

; 77   :     return pa;

  0023c	e59d3004	 ldr         r3, [sp, #4]
  00240	e58d300c	 str         r3, [sp, #0xC]

; 78   : }

  00244	e59d000c	 ldr         r0, [sp, #0xC]
  00248	e28dd01c	 add         sp, sp, #0x1C
  0024c	e89d6000	 ldmia       sp, {sp, lr}
  00250	e12fff1e	 bx          lr
  00254		 |$LN12@OALVAtoPA|
  00254		 |$LN13@OALVAtoPA|
  00254	00000000	 DCD         |??_C@_1DA@BBOHBBNH@?$AA?9?$AAO?$AAA?$AAL?$AAV?$AAA?$AAt?$AAo?$AAP?$AAA?$AA?$CI?$AAp?$AAa?$AA?5?$AA?$DN?$AA?5?$AA0?$AAx?$AA?$CF?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00258		 |$LN14@OALVAtoPA|
  00258	00000000	 DCD         |dpCurSettings|
  0025c		 |$LN15@OALVAtoPA|
  0025c	00000000	 DCD         |??_C@_1CK@LKNIEAFP@?$AA?$CL?$AAO?$AAA?$AAL?$AAV?$AAA?$AAt?$AAo?$AAP?$AAA?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00260		 |$M41161|

			 ENDP  ; |OALVAtoPA|

	END
