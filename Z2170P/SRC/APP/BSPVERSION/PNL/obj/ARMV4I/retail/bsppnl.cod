; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\Z2170P\SRC\APP\BSPVERSION\PNL\bsppnl.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|?g_hModule@@3PAUHINSTANCE__@@A| [ DATA ] ; g_hModule

  00000			 AREA	 |.bss|, NOINIT
|?g_hModule@@3PAUHINSTANCE__@@A| % 0x4			; g_hModule
	EXPORT	|DllEntry|
; File c:\wince600\platform\z2170p\src\app\bspversion\pnl\bsppnl.cpp

  00000			 AREA	 |.pdata|, PDATA
|$T32142| DCD	|$LN8@DllEntry|
	DCD	0x40000600
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DllEntry| PROC

; 21   : {

  00000		 |$LN8@DllEntry|
  00000		 |$M32139|

; 22   :     UNUSED_PARAMETER(lpvReserved);
; 23   : 
; 24   :     switch (dwReason)

  00000	e3510001	 cmp         r1, #1

; 25   :     {
; 26   :         case DLL_PROCESS_ATTACH:
; 27   :         {
; 28   :             g_hModule = (HMODULE) hinstDLL;

  00004	059f3008	 ldreq       r3, [pc, #8]
  00008	05830000	 streq       r0, [r3]

; 29   :         }
; 30   :         break;
; 31   :     }
; 32   : 
; 33   :     return TRUE;

  0000c	e3a00001	 mov         r0, #1

; 34   : }

  00010	e12fff1e	 bx          lr
  00014		 |$LN9@DllEntry|
  00014		 |$LN10@DllEntry|
  00014	00000000	 DCD         |?g_hModule@@3PAUHINSTANCE__@@A|
  00018		 |$M32140|

			 ENDP  ; |DllEntry|

	EXPORT	|CPlApplet|
	EXPORT	|??_C@_1CI@KOAILFPF@?$AA?2?$AAW?$AAi?$AAn?$AAd?$AAo?$AAw?$AAs?$AA?2?$AAb?$AAs?$AAp?$AAp?$AAn?$AAl?$AA?4?$AAe?$AAx?$AAe?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_11LOCGONAA@?$AA?$AA@| [ DATA ]	; `string'
	IMPORT	|CloseHandle|
	IMPORT	|CreateProcessW|
	IMPORT	|LoadStringW|
	IMPORT	|LoadIconW|
	IMPORT	|memset|
	IMPORT	|wcscpy|

  00000			 AREA	 |.pdata|, PDATA
|$T32160| DCD	|$LN16@CPlApplet|
	DCD	0x40006802

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CI@KOAILFPF@?$AA?2?$AAW?$AAi?$AAn?$AAd?$AAo?$AAw?$AAs?$AA?2?$AAb?$AAs?$AAp?$AAp?$AAn?$AAl?$AA?4?$AAe?$AAx?$AAe?$AA?$AA@| DCB "\\"
	DCB	0x0, "W", 0x0, "i", 0x0, "n", 0x0, "d", 0x0, "o", 0x0, "w"
	DCB	0x0, "s", 0x0, "\\", 0x0, "b", 0x0, "s", 0x0, "p", 0x0, "p"
	DCB	0x0, "n", 0x0, "l", 0x0, ".", 0x0, "e", 0x0, "x", 0x0, "e"
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_11LOCGONAA@?$AA?$AA@| DCB 0x0, 0x0		; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |CPlApplet| PROC

; 37   : {

  00000		 |$LN16@CPlApplet|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004	e24dd06c	 sub         sp, sp, #0x6C
  00008		 |$M32157|
  00008	e1a06003	 mov         r6, r3

; 38   :     UNUSED_PARAMETER(hwndCPL);
; 39   :     UNUSED_PARAMETER(lParam1);
; 40   : 
; 41   :     DWORD ret = 1;
; 42   : 
; 43   :     switch (message)

  0000c	e3510001	 cmp         r1, #1
  00010	0a00005b	 beq         |$LN7@CPlApplet|
  00014	e3510002	 cmp         r1, #2
  00018	0a000059	 beq         |$LN7@CPlApplet|
  0001c	e3510005	 cmp         r1, #5
  00020	0a000035	 beq         |$LN3@CPlApplet|
  00024	e3510008	 cmp         r1, #8

; 84   :                 ret = 0;
; 85   :                 break;
; 86   :             }
; 87   :             ret = 1;
; 88   :             break;
; 89   :         }
; 90   : 
; 91   :         case CPL_STOP:
; 92   :         case CPL_EXIT:
; 93   :         default:
; 94   :             ret = 0;

  00028	13a00000	 movne       r0, #0
  0002c	1a000055	 bne         |$LN8@CPlApplet|

; 47   :             break;
; 48   : 
; 49   :         case CPL_GETCOUNT:
; 50   :             ret = 1;
; 51   :             break;
; 52   : 
; 53   :         case CPL_NEWINQUIRE:
; 54   :         {
; 55   :             ASSERT(0 == lParam1);
; 56   :             ASSERT(lParam2);
; 57   : 
; 58   :             NEWCPLINFO *lpNewCplInfo = (NEWCPLINFO *)lParam2;
; 59   :             if (lpNewCplInfo)

  00030	e3560000	 cmp         r6, #0
  00034	0a000052	 beq         |$LN7@CPlApplet|

; 60   :             {
; 61   :                 lpNewCplInfo->dwSize = sizeof(NEWCPLINFO);
; 62   :                 lpNewCplInfo->dwFlags = 0;
; 63   :                 lpNewCplInfo->dwHelpContext = 0;
; 64   :                 lpNewCplInfo->lData = IDI_BSPPNLICON;
; 65   :                 lpNewCplInfo->hIcon = LoadIcon(g_hModule, MAKEINTRESOURCE(IDI_BSPPNLICON));

  00038	e59f415c	 ldr         r4, [pc, #0x15C]
  0003c	e3a030d4	 mov         r3, #0xD4
  00040	e3a02001	 mov         r2, #1
  00044	e3a010b8	 mov         r1, #0xB8
  00048	e3a0000b	 mov         r0, #0xB
  0004c	e3a05000	 mov         r5, #0
  00050	e5c63000	 strb        r3, [r6]
  00054	e5c62001	 strb        r2, [r6, #1]
  00058	e5c65002	 strb        r5, [r6, #2]
  0005c	e5c65003	 strb        r5, [r6, #3]
  00060	e5c65004	 strb        r5, [r6, #4]
  00064	e5c65005	 strb        r5, [r6, #5]
  00068	e5c65006	 strb        r5, [r6, #6]
  0006c	e5c65007	 strb        r5, [r6, #7]
  00070	e5c65008	 strb        r5, [r6, #8]
  00074	e5c65009	 strb        r5, [r6, #9]
  00078	e5c6500a	 strb        r5, [r6, #0xA]
  0007c	e5c6500b	 strb        r5, [r6, #0xB]
  00080	e5c6100c	 strb        r1, [r6, #0xC]
  00084	e5c6000d	 strb        r0, [r6, #0xD]
  00088	e5c6500e	 strb        r5, [r6, #0xE]
  0008c	e5c6500f	 strb        r5, [r6, #0xF]
  00090	e5940000	 ldr         r0, [r4]
  00094	e3a03c0b	 mov         r3, #0xB, 24
  00098	e38310b8	 orr         r1, r3, #0xB8
  0009c	eb000000	 bl          LoadIconW
  000a0	e1a03420	 mov         r3, r0, lsr #8
  000a4	e1a02820	 mov         r2, r0, lsr #16
  000a8	e1a01c20	 mov         r1, r0, lsr #24
  000ac	e5c63011	 strb        r3, [r6, #0x11]
  000b0	e5c62012	 strb        r2, [r6, #0x12]
  000b4	e5c61013	 strb        r1, [r6, #0x13]
  000b8	e5c60010	 strb        r0, [r6, #0x10]

; 66   :                 LoadString(g_hModule, IDS_TITLE, lpNewCplInfo->szName, lengthof(lpNewCplInfo->szName));

  000bc	e5940000	 ldr         r0, [r4]
  000c0	e3a05c17	 mov         r5, #0x17, 24
  000c4	e3a03020	 mov         r3, #0x20
  000c8	e2862014	 add         r2, r6, #0x14
  000cc	e3851070	 orr         r1, r5, #0x70
  000d0	eb000000	 bl          LoadStringW

; 67   :                 LoadString(g_hModule, IDS_INFO, lpNewCplInfo->szInfo, lengthof(lpNewCplInfo->szInfo));

  000d4	e5940000	 ldr         r0, [r4]
  000d8	e3a03040	 mov         r3, #0x40
  000dc	e2862054	 add         r2, r6, #0x54
  000e0	e3851071	 orr         r1, r5, #0x71
  000e4	eb000000	 bl          LoadStringW

; 68   :                 _tcscpy(lpNewCplInfo->szHelpFile, _T(""));

  000e8	e59f10a8	 ldr         r1, [pc, #0xA8]
  000ec	e28600d4	 add         r0, r6, #0xD4
  000f0	eb000000	 bl          wcscpy

; 84   :                 ret = 0;
; 85   :                 break;
; 86   :             }
; 87   :             ret = 1;
; 88   :             break;
; 89   :         }
; 90   : 
; 91   :         case CPL_STOP:
; 92   :         case CPL_EXIT:
; 93   :         default:
; 94   :             ret = 0;

  000f4	e3a00000	 mov         r0, #0

; 95   :             break;

  000f8	ea000022	 b           |$LN8@CPlApplet|
  000fc		 |$LN3@CPlApplet|

; 69   :                 ret = 0;
; 70   :                 break;
; 71   :             }
; 72   :             ret = 1; // Failure
; 73   :             break;
; 74   :         }
; 75   : 
; 76   :         case CPL_DBLCLK:
; 77   :         {
; 78   :             PROCESS_INFORMATION pi = {0};

  000fc	e3a03000	 mov         r3, #0
  00100	e58d3018	 str         r3, [sp, #0x18]
  00104	e3a03000	 mov         r3, #0

; 79   : 			STARTUPINFO si = {0};

  00108	e3a0e000	 mov         lr, #0
  0010c	e3a02040	 mov         r2, #0x40
  00110	e3a01000	 mov         r1, #0
  00114	e28d002c	 add         r0, sp, #0x2C
  00118	e58d301c	 str         r3, [sp, #0x1C]
  0011c	e58d3020	 str         r3, [sp, #0x20]
  00120	e58d3024	 str         r3, [sp, #0x24]
  00124	e58de028	 str         lr, [sp, #0x28]
  00128	eb000000	 bl          memset

; 80   :             if (CreateProcess(EXE_PATH, NULL, NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi))

  0012c	e59f0060	 ldr         r0, [pc, #0x60]
  00130	e28de018	 add         lr, sp, #0x18
  00134	e28d4028	 add         r4, sp, #0x28
  00138	e3a05000	 mov         r5, #0
  0013c	e3a03000	 mov         r3, #0
  00140	e3a02000	 mov         r2, #0
  00144	e3a01000	 mov         r1, #0
  00148	e58de014	 str         lr, [sp, #0x14]
  0014c	e58d4010	 str         r4, [sp, #0x10]
  00150	e58d500c	 str         r5, [sp, #0xC]
  00154	e58d5008	 str         r5, [sp, #8]
  00158	e58d5004	 str         r5, [sp, #4]
  0015c	e58d5000	 str         r5, [sp]
  00160	eb000000	 bl          CreateProcessW
  00164	e3500000	 cmp         r0, #0
  00168	0a000005	 beq         |$LN7@CPlApplet|

; 81   :             {
; 82   :                 CloseHandle(pi.hThread);

  0016c	e59d001c	 ldr         r0, [sp, #0x1C]
  00170	eb000000	 bl          CloseHandle

; 83   :                 CloseHandle(pi.hProcess);

  00174	e59d0018	 ldr         r0, [sp, #0x18]
  00178	eb000000	 bl          CloseHandle

; 84   :                 ret = 0;
; 85   :                 break;
; 86   :             }
; 87   :             ret = 1;
; 88   :             break;
; 89   :         }
; 90   : 
; 91   :         case CPL_STOP:
; 92   :         case CPL_EXIT:
; 93   :         default:
; 94   :             ret = 0;

  0017c	e3a00000	 mov         r0, #0

; 95   :             break;

  00180	ea000000	 b           |$LN8@CPlApplet|
  00184		 |$LN7@CPlApplet|

; 44   :     {
; 45   :         case CPL_INIT:
; 46   :             ret = 1;

  00184	e3a00001	 mov         r0, #1
  00188		 |$LN8@CPlApplet|

; 96   :     }
; 97   : 
; 98   :     return ret;
; 99   : }

  00188	e28dd06c	 add         sp, sp, #0x6C
  0018c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00190	e12fff1e	 bx          lr
  00194		 |$LN17@CPlApplet|
  00194		 |$LN18@CPlApplet|
  00194	00000000	 DCD         |??_C@_1CI@KOAILFPF@?$AA?2?$AAW?$AAi?$AAn?$AAd?$AAo?$AAw?$AAs?$AA?2?$AAb?$AAs?$AAp?$AAp?$AAn?$AAl?$AA?4?$AAe?$AAx?$AAe?$AA?$AA@|
  00198		 |$LN19@CPlApplet|
  00198	00000000	 DCD         |??_C@_11LOCGONAA@?$AA?$AA@|
  0019c		 |$LN20@CPlApplet|
  0019c	00000000	 DCD         |?g_hModule@@3PAUHINSTANCE__@@A|
  001a0		 |$M32158|

			 ENDP  ; |CPlApplet|

	END
