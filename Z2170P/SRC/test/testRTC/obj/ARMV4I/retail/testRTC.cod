; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\Z2170P\SRC\test\testRTC\testRTC.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-INCLUDE:__@@_PchSym_@00@UdrmxvGAAUkozgulinUaCBHAkUhixUg"
	DCB	"vhgUgvhgigxUlyqUzineErUivgzroUhgwzucOlyq@testRTC "
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|wmain|
	EXPORT	|??_C@_1FM@NCEHMJBG@?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAd?$AAe?$AAl?$AAa?$AAy?$AA?5?$AA?$CF?$AAd?$AA?5?$AAs?$AAe?$AAc?$AAo?$AAn?$AAd?$AAs?$AA?5?$AA?$CI?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CG@KOPJJCAM@?$AAR?$AAT?$AAC?$AA?5?$AAa?$AAl?$AAa?$AAr?$AAm?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EM@FCJCHCFP@?$AAC?$AAe?$AAR?$AAu?$AAn?$AAA?$AAp?$AAp?$AAA?$AAt?$AAE?$AAv?$AAe?$AAn?$AAt?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CI?$AAe?$AAr?$AAr?$AAo?$AAr?$AA?5?$AA?3?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BI@IFDBABEA@?$AAM?$AAy?$AAT?$AAe?$AAs?$AAt?$AAE?$AAv?$AAe?$AAn?$AAt?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1BE@PPGIPOAN@?$AAT?$AAe?$AAs?$AAt?$AA?5?$AAR?$AAT?$AAC?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FE@LMHPKEMJ@?$AA?2?$AA?2?$AA?4?$AA?2?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?2?$AAN?$AAa?$AAm?$AAe?$AAd?$AAE?$AAv?$AAe?$AAn?$AAt?$AAs?$AA?2?$AAM?$AAy@| [ DATA ] ; `string'
	IMPORT	|WaitForSingleObject|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|GetLastError|
	IMPORT	|CeRunAppAtTime|
	IMPORT	|GetTickCount|
	IMPORT	|FileTimeToSystemTime|
	IMPORT	|SystemTimeToFileTime|
	IMPORT	|GetLocalTime|
	IMPORT	|wprintf|
	IMPORT	|CreateEventW|
; File c:\wince600\platform\z2170p\src\test\testrtc\testrtc.cpp

  00000			 AREA	 |.pdata|, PDATA
|$T35754| DCD	|$LN14@wmain|
	DCD	0x40004602

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FM@NCEHMJBG@?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAd?$AAe?$AAl?$AAa?$AAy?$AA?5?$AA?$CF?$AAd?$AA?5?$AAs?$AAe?$AAc?$AAo?$AAn?$AAd?$AAs?$AA?5?$AA?$CI?$AAe@| DCB "n"
	DCB	0x0, "o", 0x0, "t", 0x0, "i", 0x0, "f", 0x0, "i", 0x0, "c"
	DCB	0x0, "a", 0x0, "t", 0x0, "i", 0x0, "o", 0x0, "n", 0x0, " "
	DCB	0x0, "d", 0x0, "e", 0x0, "l", 0x0, "a", 0x0, "y", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, " ", 0x0, "s", 0x0, "e", 0x0, "c"
	DCB	0x0, "o", 0x0, "n", 0x0, "d", 0x0, "s", 0x0, " ", 0x0, "("
	DCB	0x0, "e", 0x0, "x", 0x0, "p", 0x0, "e", 0x0, "c", 0x0, "t"
	DCB	0x0, "e", 0x0, "d", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CG@KOPJJCAM@?$AAR?$AAT?$AAC?$AA?5?$AAa?$AAl?$AAa?$AAr?$AAm?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB "R"
	DCB	0x0, "T", 0x0, "C", 0x0, " ", 0x0, "a", 0x0, "l", 0x0, "a"
	DCB	0x0, "r", 0x0, "m", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i"
	DCB	0x0, "l", 0x0, "e", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EM@FCJCHCFP@?$AAC?$AAe?$AAR?$AAu?$AAn?$AAA?$AAp?$AAp?$AAA?$AAt?$AAE?$AAv?$AAe?$AAn?$AAt?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CI?$AAe?$AAr?$AAr?$AAo?$AAr?$AA?5?$AA?3?$AA?5@| DCB "C"
	DCB	0x0, "e", 0x0, "R", 0x0, "u", 0x0, "n", 0x0, "A", 0x0, "p"
	DCB	0x0, "p", 0x0, "A", 0x0, "t", 0x0, "E", 0x0, "v", 0x0, "e"
	DCB	0x0, "n", 0x0, "t", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i"
	DCB	0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "(", 0x0, "e"
	DCB	0x0, "r", 0x0, "r", 0x0, "o", 0x0, "r", 0x0, " ", 0x0, ":"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BI@IFDBABEA@?$AAM?$AAy?$AAT?$AAe?$AAs?$AAt?$AAE?$AAv?$AAe?$AAn?$AAt?$AA?$AA@| DCB "M"
	DCB	0x0, "y", 0x0, "T", 0x0, "e", 0x0, "s", 0x0, "t", 0x0, "E"
	DCB	0x0, "v", 0x0, "e", 0x0, "n", 0x0, "t", 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1BE@PPGIPOAN@?$AAT?$AAe?$AAs?$AAt?$AA?5?$AAR?$AAT?$AAC?$AA?6?$AA?$AA@| DCB "T"
	DCB	0x0, "e", 0x0, "s", 0x0, "t", 0x0, " ", 0x0, "R", 0x0, "T"
	DCB	0x0, "C", 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FE@LMHPKEMJ@?$AA?2?$AA?2?$AA?4?$AA?2?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?2?$AAN?$AAa?$AAm?$AAe?$AAd?$AAE?$AAv?$AAe?$AAn?$AAt?$AAs?$AA?2?$AAM?$AAy@| DCB "\\"
	DCB	0x0, "\\", 0x0, ".", 0x0, "\\", 0x0, "N", 0x0, "o", 0x0, "t"
	DCB	0x0, "i", 0x0, "f", 0x0, "i", 0x0, "c", 0x0, "a", 0x0, "t"
	DCB	0x0, "i", 0x0, "o", 0x0, "n", 0x0, "s", 0x0, "\\", 0x0, "N"
	DCB	0x0, "a", 0x0, "m", 0x0, "e", 0x0, "d", 0x0, "E", 0x0, "v"
	DCB	0x0, "e", 0x0, "n", 0x0, "t", 0x0, "s", 0x0, "\\", 0x0, "M"
	DCB	0x0, "y", 0x0, "T", 0x0, "e", 0x0, "s", 0x0, "t", 0x0, "E"
	DCB	0x0, "v", 0x0, "e", 0x0, "n", 0x0, "t", 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |wmain| PROC

; 12   : {

  00000		 |$LN14@wmain|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004	e24dd018	 sub         sp, sp, #0x18
  00008		 |$M35751|

; 13   :     int nbsec = 25;
; 14   :     int notifDelay;
; 15   :     SYSTEMTIME systime;
; 16   :     FILETIME fileTime;
; 17   : 
; 18   : 
; 19   :     UNREFERENCED_PARAMETER(argc);
; 20   :     UNREFERENCED_PARAMETER(argv);
; 21   :     UNREFERENCED_PARAMETER(envp);
; 22   : 
; 23   :     HANDLE hEvent = CreateEvent(NULL,FALSE,FALSE,TEST_EVENT_NAME);

  00008	e59f3104	 ldr         r3, [pc, #0x104]
  0000c	e3a02000	 mov         r2, #0
  00010	e3a01000	 mov         r1, #0
  00014	e3a00000	 mov         r0, #0
  00018	eb000000	 bl          CreateEventW
  0001c	e1a04000	 mov         r4, r0

; 24   : 
; 25   :     _tprintf(_T("Test RTC\n"));

  00020	e59f00e8	 ldr         r0, [pc, #0xE8]
  00024	eb000000	 bl          wprintf

; 26   : 
; 27   :     GetLocalTime(&systime);    

  00028	e28d0008	 add         r0, sp, #8
  0002c	eb000000	 bl          GetLocalTime

; 28   :     SystemTimeToFileTime(&systime,&fileTime);

  00030	e28d1000	 add         r1, sp, #0
  00034	e28d0008	 add         r0, sp, #8
  00038	eb000000	 bl          SystemTimeToFileTime

; 29   :     *((UINT64*)&fileTime) += (nbsec*10000000);

  0003c	e59f10c8	 ldr         r1, [pc, #0xC8]
  00040	e59d2000	 ldr         r2, [sp]
  00044	e59d3004	 ldr         r3, [sp, #4]

; 30   :     FileTimeToSystemTime(&fileTime,&systime);

  00048	e28d0000	 add         r0, sp, #0
  0004c	e0922001	 adds        r2, r2, r1
  00050	e2a33000	 adc         r3, r3, #0
  00054	e28d1008	 add         r1, sp, #8
  00058	e58d3004	 str         r3, [sp, #4]
  0005c	e58d2000	 str         r2, [sp]
  00060	eb000000	 bl          FileTimeToSystemTime

; 31   : 
; 32   :     DWORD date = GetTickCount();

  00064	eb000000	 bl          GetTickCount
  00068	e1a05000	 mov         r5, r0

; 33   :     if (CeRunAppAtTime(L"\\\\.\\Notifications\\NamedEvents\\"TEST_EVENT_NAME,&systime) == FALSE)

  0006c	e59f0094	 ldr         r0, [pc, #0x94]
  00070	e28d1008	 add         r1, sp, #8
  00074	eb000000	 bl          CeRunAppAtTime
  00078	e3500000	 cmp         r0, #0
  0007c	1a000005	 bne         |$LN2@wmain|

; 34   :     {
; 35   :         RETAILMSG(1,(TEXT("CeRunAppAtEvent failed (error : %d)\r\n"),GetLastError()));

  00080	eb000000	 bl          GetLastError
  00084	e1a01000	 mov         r1, r0
  00088	e59f0074	 ldr         r0, [pc, #0x74]
  0008c	eb000000	 bl          NKDbgPrintfW

; 36   :         return -1;

  00090	e3e00000	 mvn         r0, #0
  00094	ea000014	 b           |$LN3@wmain|
  00098		 |$LN2@wmain|
  00098	e3a03b23	 mov         r3, #0x23, 22

; 37   :     }
; 38   :   
; 39   :     if (WaitForSingleObject(hEvent,(nbsec+10+1)*1000) == WAIT_TIMEOUT)

  0009c	e38310a0	 orr         r1, r3, #0xA0
  000a0	e1a00004	 mov         r0, r4
  000a4	eb000000	 bl          WaitForSingleObject
  000a8	e3a03c01	 mov         r3, #1, 24
  000ac	e3833002	 orr         r3, r3, #2
  000b0	e1500003	 cmp         r0, r3
  000b4	1a000003	 bne         |$LN1@wmain|

; 40   :     {
; 41   :         RETAILMSG(1,(TEXT("RTC alarm failed\r\n")));

  000b8	e59f0040	 ldr         r0, [pc, #0x40]
  000bc	eb000000	 bl          NKDbgPrintfW
  000c0	e3e00000	 mvn         r0, #0
  000c4	ea000008	 b           |$LN3@wmain|
  000c8		 |$LN1@wmain|

; 42   :         return -1;
; 43   :     }
; 44   : 
; 45   :     notifDelay = (GetTickCount() - date)/1000;

  000c8	eb000000	 bl          GetTickCount
  000cc	e59f3028	 ldr         r3, [pc, #0x28]
  000d0	e0404005	 sub         r4, r0, r5

; 46   :     RETAILMSG(1,(TEXT("notification delay %d seconds (expected %d)\r\n"),notifDelay,nbsec));

  000d4	e59f001c	 ldr         r0, [pc, #0x1C]
  000d8	e083e394	 umull       lr, r3, r4, r3
  000dc	e3a02019	 mov         r2, #0x19
  000e0	e1a01323	 mov         r1, r3, lsr #6
  000e4	eb000000	 bl          NKDbgPrintfW

; 47   :     
; 48   : 
; 49   :     return 0;

  000e8	e3a00000	 mov         r0, #0
  000ec		 |$LN3@wmain|

; 50   : }

  000ec	e28dd018	 add         sp, sp, #0x18
  000f0	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  000f4	e12fff1e	 bx          lr
  000f8		 |$LN15@wmain|
  000f8		 |$LN16@wmain|
  000f8	00000000	 DCD         |??_C@_1FM@NCEHMJBG@?$AAn?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AA?5?$AAd?$AAe?$AAl?$AAa?$AAy?$AA?5?$AA?$CF?$AAd?$AA?5?$AAs?$AAe?$AAc?$AAo?$AAn?$AAd?$AAs?$AA?5?$AA?$CI?$AAe@|
  000fc		 |$LN17@wmain|
  000fc	10624dd3	 DCD         0x10624dd3
  00100		 |$LN18@wmain|
  00100	00000000	 DCD         |??_C@_1CG@KOPJJCAM@?$AAR?$AAT?$AAC?$AA?5?$AAa?$AAl?$AAa?$AAr?$AAm?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  00104		 |$LN19@wmain|
  00104	00000000	 DCD         |??_C@_1EM@FCJCHCFP@?$AAC?$AAe?$AAR?$AAu?$AAn?$AAA?$AAp?$AAp?$AAA?$AAt?$AAE?$AAv?$AAe?$AAn?$AAt?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AA?$CI?$AAe?$AAr?$AAr?$AAo?$AAr?$AA?5?$AA?3?$AA?5@|
  00108		 |$LN20@wmain|
  00108	00000000	 DCD         |??_C@_1FE@LMHPKEMJ@?$AA?2?$AA?2?$AA?4?$AA?2?$AAN?$AAo?$AAt?$AAi?$AAf?$AAi?$AAc?$AAa?$AAt?$AAi?$AAo?$AAn?$AAs?$AA?2?$AAN?$AAa?$AAm?$AAe?$AAd?$AAE?$AAv?$AAe?$AAn?$AAt?$AAs?$AA?2?$AAM?$AAy@|
  0010c		 |$LN21@wmain|
  0010c	0ee6b280	 DCD         0xee6b280
  00110		 |$LN22@wmain|
  00110	00000000	 DCD         |??_C@_1BE@PPGIPOAN@?$AAT?$AAe?$AAs?$AAt?$AA?5?$AAR?$AAT?$AAC?$AA?6?$AA?$AA@|
  00114		 |$LN23@wmain|
  00114	00000000	 DCD         |??_C@_1BI@IFDBABEA@?$AAM?$AAy?$AAT?$AAe?$AAs?$AAt?$AAE?$AAv?$AAe?$AAn?$AAt?$AA?$AA@|
  00118		 |$M35752|

			 ENDP  ; |wmain|

	END
