; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\Z2170P\SRC\DRIVERS\TPS659XX_WAVE\strmctxt.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.rdata|, DATA, READONLY
|GainMap| DCW	0xf1ad
	DCW	0xe429
	DCW	0xd765
	DCW	0xcb59
	DCW	0xbff9
	DCW	0xb53b
	DCW	0xab18
	DCW	0xa186
	DCW	0x987d
	DCW	0x8ff5
	DCW	0x87e8
	DCW	0x804d
	DCW	0x7920
	DCW	0x7259
	DCW	0x6bf4
	DCW	0x65ea
	DCW	0x6036
	DCW	0x5ad5
	DCW	0x55c0
	DCW	0x50f4
	DCW	0x4c6d
	DCW	0x4826
	DCW	0x441d
	DCW	0x404d
	DCW	0x3cb5
	DCW	0x394f
	DCW	0x361a
	DCW	0x3314
	DCW	0x3038
	DCW	0x2d86
	DCW	0x2afa
	DCW	0x2892
	DCW	0x264d
	DCW	0x2429
	DCW	0x2223
	DCW	0x203a
	DCW	0x1e6c
	DCW	0x1cb9
	DCW	0x1b1d
	DCW	0x1999
	DCW	0x182a
	DCW	0x16d0
	DCW	0x158a
	DCW	0x1455
	DCW	0x1332
	DCW	0x121f
	DCW	0x111c
	DCW	0x1027
	DCW	0xf3f
	DCW	0xe65
	DCW	0xd97
	DCW	0xcd4
	DCW	0xc1c
	DCW	0xb6f
	DCW	0xacb
	DCW	0xa31
	DCW	0x99f
	DCW	0x915
	DCW	0x893
	DCW	0x818
	DCW	0x7a4
	DCW	0x737
	DCW	0x6cf
	DCW	0x66e
	DCW	0x612
	DCW	0x5bb
	DCW	0x569
	DCW	0x51b
	DCW	0x4d2
	DCW	0x48d
	DCW	0x44c
	DCW	0x40e
	DCW	0x3d4
	DCW	0x39d
	DCW	0x369
	DCW	0x339
	DCW	0x30a
	DCW	0x2df
	DCW	0x2b6
	DCW	0x28f
	DCW	0x26a
	DCW	0x248
	DCW	0x227
	DCW	0x208
	DCW	0x1eb
	DCW	0x1cf
	DCW	0x1b6
	DCW	0x19d
	DCW	0x186
	DCW	0x170
	DCW	0x15b
	DCW	0x148
	DCW	0x136
	DCW	0x124
	DCW	0x114
	DCW	0x104
	DCW	0xf6
	DCW	0xe8
	DCW	0xdb
	DCW	0xcf
	DCW	0xc3
	DCW	0xb8
	DCW	0xae
	DCW	0xa4
	DCW	0x9b
	DCW	0x92
	DCW	0x8a
	DCW	0x82
	DCW	0x7b
	DCW	0x74
	DCW	0x6e
	DCW	0x67
	DCW	0x62
	DCW	0x5c
	DCW	0x57
	DCW	0x52
	DCW	0x4d
	DCW	0x49
	DCW	0x45
	DCW	0x41
	DCW	0x3d
	DCW	0x3a
	DCW	0x37
	DCW	0x34
	DCW	0x31
	DCW	0x2e
	DCW	0x2b
	DCW	0x29
	DCW	0x27
	DCW	0x24
	DCW	0x22
	DCW	0x20
	DCW	0x1f
	DCW	0x1d
	DCW	0x1b
	DCW	0x1a
	DCW	0x18
	DCW	0x17
	DCW	0x15
	DCW	0x14
	DCW	0x13
	DCW	0x12
	DCW	0x11
	DCW	0x10
	DCW	0xf
	DCW	0xe
	DCW	0xd
	DCW	0xd
	DCW	0xc
	DCW	0xb
	DCW	0xb
	DCW	0xa
	DCW	0x9
	DCW	0x9
	DCW	0x8
	DCW	0x8
	DCW	0x7
	DCW	0x7
	DCW	0x6
	DCW	0x6
	DCW	0x6
	DCW	0x5
	DCW	0x5
	DCW	0x5
	DCW	0x4
	DCW	0x4
	DCW	0x4
	DCW	0x4
	DCW	0x3
	DCW	0x3
	DCW	0x3
	DCW	0x3
	DCW	0x3
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x2
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x1
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	DCW	0x0
	EXPORT	|?IsEqualGUID@@YAHABU_GUID@@0@Z|	; IsEqualGUID
	IMPORT	|memcmp|
; File c:\wince600\public\common\sdk\inc\objbase.h

  00000			 AREA	 |.pdata|, PDATA
|$T34477| DCD	|$LN7@IsEqualGUI|
	DCD	0x40000901
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?IsEqualGUID@@YAHABU_GUID@@0@Z| PROC	; IsEqualGUID

; 493  : {

  00000		 |$LN7@IsEqualGUI|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34474|

; 494  :     return !memcmp(&rguid1, &rguid2, sizeof(GUID));

  00004	e3a02010	 mov         r2, #0x10
  00008	eb000000	 bl          memcmp
  0000c	e3500000	 cmp         r0, #0
  00010	03a00001	 moveq       r0, #1

; 495  : }

  00014	049de004	 ldreq       lr, [sp], #4

; 494  :     return !memcmp(&rguid1, &rguid2, sizeof(GUID));

  00018	13a00000	 movne       r0, #0

; 495  : }

  0001c	149de004	 ldrne       lr, [sp], #4
  00020	e12fff1e	 bx          lr
  00024		 |$M34475|

			 ENDP  ; |?IsEqualGUID@@YAHABU_GUID@@0@Z|, IsEqualGUID

	EXPORT	|?StillPlaying@StreamContext@@QAAHXZ|	; StreamContext::StillPlaying
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34489| DCD	|$LN7@StillPlayi|
	DCD	0x40000500
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?StillPlaying@StreamContext@@QAAHXZ| PROC ; StreamContext::StillPlaying

; 73   :     BOOL StillPlaying() {return (m_lpWaveHdrHead!=NULL);}

  00000		 |$LN7@StillPlayi|
  00000		 |$M34486|
  00000	e5903038	 ldr         r3, [r0, #0x38]
  00004	e3530000	 cmp         r3, #0
  00008	13a00001	 movne       r0, #1
  0000c	03a00000	 moveq       r0, #0
  00010	e12fff1e	 bx          lr
  00014		 |$M34487|

			 ENDP  ; |?StillPlaying@StreamContext@@QAAHXZ|, StreamContext::StillPlaying

	EXPORT	|?GetStreamManager@StreamContext@@QAAPAVCStreamManager@@XZ| ; StreamContext::GetStreamManager

  00000			 AREA	 |.pdata|, PDATA
|$T34499| DCD	|$LN5@GetStreamM|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetStreamManager@StreamContext@@QAAPAVCStreamManager@@XZ| PROC ; StreamContext::GetStreamManager

; 76   :     CStreamManager *GetStreamManager() { return m_pStreamManager; }

  00000		 |$LN5@GetStreamM|
  00000		 |$M34496|
  00000	e5900050	 ldr         r0, [r0, #0x50]
  00004	e12fff1e	 bx          lr
  00008		 |$M34497|

			 ENDP  ; |?GetStreamManager@StreamContext@@QAAPAVCStreamManager@@XZ|, StreamContext::GetStreamManager

	EXPORT	|?ReturnBuffer@StreamContext@@QAAXPAUwavehdr_tag@@@Z| ; StreamContext::ReturnBuffer

  00000			 AREA	 |.pdata|, PDATA
|$T34508| DCD	|$LN5@ReturnBuff|
	DCD	0x40000c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?ReturnBuffer@StreamContext@@QAAXPAUwavehdr_tag@@@Z| PROC ; StreamContext::ReturnBuffer

; 102  :     {

  00000		 |$LN5@ReturnBuff|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34505|
  00004	e1a02001	 mov         r2, r1

; 103  :         lpHdr->dwFlags &= ~WHDR_INQUEUE;

  00008	e5923010	 ldr         r3, [r2, #0x10]

; 104  :         lpHdr->dwFlags |= WHDR_DONE;
; 105  :         DEBUGMSG(ZONE_WODM && ZONE_VERBOSE,(TEXT("WODM: DoCallbackStreamClosed\r\n")));
; 106  :         DoCallbackReturnBuffer(lpHdr);

  0000c	e3c33010	 bic         r3, r3, #0x10
  00010	e3833001	 orr         r3, r3, #1
  00014	e5823010	 str         r3, [r2, #0x10]
  00018	e5903000	 ldr         r3, [r0]
  0001c	e5933024	 ldr         r3, [r3, #0x24]
  00020	e1a0e00f	 mov         lr, pc
  00024	e12fff13	 bx          r3

; 107  :     }

  00028	e49de004	 ldr         lr, [sp], #4
  0002c	e12fff1e	 bx          lr
  00030		 |$M34506|

			 ENDP  ; |?ReturnBuffer@StreamContext@@QAAXPAUwavehdr_tag@@@Z|, StreamContext::ReturnBuffer

	EXPORT	|?SetGain@StreamContext@@QAAKK@Z|	; StreamContext::SetGain

  00000			 AREA	 |.pdata|, PDATA
|$T34519| DCD	|$LN5@SetGain|
	DCD	0x40000a01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SetGain@StreamContext@@QAAKK@Z| PROC	; StreamContext::SetGain

; 115  :     {

  00000		 |$LN5@SetGain|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34516|
  00004	e1a02000	 mov         r2, r0

; 116  :         m_dwGain = dwGain;
; 117  :         GainChange();

  00008	e5923000	 ldr         r3, [r2]
  0000c	e5821058	 str         r1, [r2, #0x58]
  00010	e5933040	 ldr         r3, [r3, #0x40]
  00014	e1a0e00f	 mov         lr, pc
  00018	e12fff13	 bx          r3

; 118  :         return MMSYSERR_NOERROR;

  0001c	e3a00000	 mov         r0, #0

; 119  :     }

  00020	e49de004	 ldr         lr, [sp], #4
  00024	e12fff1e	 bx          lr
  00028		 |$M34517|

			 ENDP  ; |?SetGain@StreamContext@@QAAKK@Z|, StreamContext::SetGain

	EXPORT	|?get_Gain@CStreamManager@@QBAKXZ|	; CStreamManager::get_Gain
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmmgr.h

  00000			 AREA	 |.pdata|, PDATA
|$T34529| DCD	|$LN5@get_Gain|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?get_Gain@CStreamManager@@QBAKXZ| PROC ; CStreamManager::get_Gain

; 51   :     {

  00000		 |$LN5@get_Gain|
  00000		 |$M34526|

; 52   :         return m_dwGain;

  00000	e590000c	 ldr         r0, [r0, #0xC]

; 53   :     }

  00004	e12fff1e	 bx          lr
  00008		 |$M34527|

			 ENDP  ; |?get_Gain@CStreamManager@@QBAKXZ|, CStreamManager::get_Gain

	EXPORT	|?get_Mute@CStreamManager@@QBAKXZ|	; CStreamManager::get_Mute

  00000			 AREA	 |.pdata|, PDATA
|$T34539| DCD	|$LN5@get_Mute|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?get_Mute@CStreamManager@@QBAKXZ| PROC ; CStreamManager::get_Mute

; 63   :     {

  00000		 |$LN5@get_Mute|
  00000		 |$M34536|

; 64   :         return m_bMute;

  00000	e5900010	 ldr         r0, [r0, #0x10]

; 65   :     }

  00004	e12fff1e	 bx          lr
  00008		 |$M34537|

			 ENDP  ; |?get_Mute@CStreamManager@@QBAKXZ|, CStreamManager::get_Mute

	EXPORT	|?get_Mono@CStreamManager@@QBAHXZ|	; CStreamManager::get_Mono

  00000			 AREA	 |.pdata|, PDATA
|$T34549| DCD	|$LN5@get_Mono|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?get_Mono@CStreamManager@@QBAHXZ| PROC ; CStreamManager::get_Mono

; 75   :     {

  00000		 |$LN5@get_Mono|
  00000		 |$M34546|

; 76   :         return m_bMono;

  00000	e5900014	 ldr         r0, [r0, #0x14]

; 77   :     }

  00004	e12fff1e	 bx          lr
  00008		 |$M34547|

			 ENDP  ; |?get_Mono@CStreamManager@@QBAHXZ|, CStreamManager::get_Mono

	EXPORT	|?get_DefaultStreamGain@CStreamManager@@QAAKXZ| ; CStreamManager::get_DefaultStreamGain

  00000			 AREA	 |.pdata|, PDATA
|$T34559| DCD	|$LN5@get_Defaul|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?get_DefaultStreamGain@CStreamManager@@QAAKXZ| PROC ; CStreamManager::get_DefaultStreamGain

; 87   :     {

  00000		 |$LN5@get_Defaul|
  00000		 |$M34556|

; 88   :         return m_dwDefaultStreamGain;

  00000	e5900018	 ldr         r0, [r0, #0x18]

; 89   :     }

  00004	e12fff1e	 bx          lr
  00008		 |$M34557|

			 ENDP  ; |?get_DefaultStreamGain@CStreamManager@@QAAKXZ|, CStreamManager::get_DefaultStreamGain

	EXPORT	|?get_StreamAttenMax@CStreamManager@@QBAKXZ| ; CStreamManager::get_StreamAttenMax
	IMPORT	|?m_dwStreamAttenMax@CStreamManager@@1KA| ; CStreamManager::m_dwStreamAttenMax

  00000			 AREA	 |.pdata|, PDATA
|$T34568| DCD	|$LN5@get_Stream|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?get_StreamAttenMax@CStreamManager@@QBAKXZ| PROC ; CStreamManager::get_StreamAttenMax

; 111  :     {

  00000		 |$LN5@get_Stream|
  00000		 |$M34565|

; 112  :         return m_dwStreamAttenMax;

  00000	e59f3004	 ldr         r3, [pc, #4]
  00004	e5930000	 ldr         r0, [r3]

; 113  :     }

  00008	e12fff1e	 bx          lr
  0000c		 |$LN6@get_Stream|
  0000c		 |$LN7@get_Stream|
  0000c	00000000	 DCD         |?m_dwStreamAttenMax@CStreamManager@@1KA|
  00010		 |$M34566|

			 ENDP  ; |?get_StreamAttenMax@CStreamManager@@QBAKXZ|, CStreamManager::get_StreamAttenMax

	EXPORT	|?get_DeviceAttenMax@CStreamManager@@QBAKXZ| ; CStreamManager::get_DeviceAttenMax
	IMPORT	|?m_dwDeviceAttenMax@CStreamManager@@1KA| ; CStreamManager::m_dwDeviceAttenMax

  00000			 AREA	 |.pdata|, PDATA
|$T34579| DCD	|$LN5@get_Device|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?get_DeviceAttenMax@CStreamManager@@QBAKXZ| PROC ; CStreamManager::get_DeviceAttenMax

; 116  :     {

  00000		 |$LN5@get_Device|
  00000		 |$M34576|

; 117  :         return m_dwDeviceAttenMax;

  00000	e59f3004	 ldr         r3, [pc, #4]
  00004	e5930000	 ldr         r0, [r3]

; 118  :     }

  00008	e12fff1e	 bx          lr
  0000c		 |$LN6@get_Device|
  0000c		 |$LN7@get_Device|
  0000c	00000000	 DCD         |?m_dwDeviceAttenMax@CStreamManager@@1KA|
  00010		 |$M34577|

			 ENDP  ; |?get_DeviceAttenMax@CStreamManager@@QBAKXZ|, CStreamManager::get_DeviceAttenMax

	EXPORT	|?get_ClassAttenMax@CStreamManager@@QBAKXZ| ; CStreamManager::get_ClassAttenMax
	IMPORT	|?m_dwClassAttenMax@CStreamManager@@1KA| ; CStreamManager::m_dwClassAttenMax

  00000			 AREA	 |.pdata|, PDATA
|$T34590| DCD	|$LN5@get_ClassA|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?get_ClassAttenMax@CStreamManager@@QBAKXZ| PROC ; CStreamManager::get_ClassAttenMax

; 121  :     {

  00000		 |$LN5@get_ClassA|
  00000		 |$M34587|

; 122  :         return m_dwClassAttenMax;

  00000	e59f3004	 ldr         r3, [pc, #4]
  00004	e5930000	 ldr         r0, [r3]

; 123  :     }

  00008	e12fff1e	 bx          lr
  0000c		 |$LN6@get_ClassA|
  0000c		 |$LN7@get_ClassA|
  0000c	00000000	 DCD         |?m_dwClassAttenMax@CStreamManager@@1KA|
  00010		 |$M34588|

			 ENDP  ; |?get_ClassAttenMax@CStreamManager@@QBAKXZ|, CStreamManager::get_ClassAttenMax

	EXPORT	|?Open@StreamContext@@UAAJPAVCStreamManager@@PAUwaveopendesc_tag@@K@Z| ; StreamContext::Open
	IMPORT	|?NewStream@CStreamManager@@QAAXPAVStreamContext@@@Z| ; CStreamManager::NewStream
	IMPORT	|memcpy|
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34616| DCD	|$LN11@Open|
	DCD	0x40004e01
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Open@StreamContext@@UAAJPAVCStreamManager@@PAUwaveopendesc_tag@@K@Z| PROC ; StreamContext::Open

; 270  : {

  00000		 |$LN11@Open|
  00000	e92d47f0	 stmdb       sp!, {r4 - r10, lr}
  00004		 |$M34613|
  00004	e1a07003	 mov         r7, r3
  00008	e1a08002	 mov         r8, r2
  0000c	e1a0a001	 mov         r10, r1
  00010	e1a09000	 mov         r9, r0

; 271  :     m_RefCount = 1;

  00014	e3a03001	 mov         r3, #1
  00018	e589300c	 str         r3, [r9, #0xC]

; 272  :     m_pStreamManager = pStreamManager;

  0001c	e589a050	 str         r10, [r9, #0x50]

; 273  :     m_pfnCallback = (DRVCALLBACK *)lpWOD->dwCallback;

  00020	e5d86008	 ldrb        r6, [r8, #8]
  00024	e5d8e009	 ldrb        lr, [r8, #9]
  00028	e5d8400a	 ldrb        r4, [r8, #0xA]
  0002c	e5d8500b	 ldrb        r5, [r8, #0xB]
  00030	e186e40e	 orr         lr, r6, lr, lsl #8
  00034	e18ee804	 orr         lr, lr, r4, lsl #16
  00038	e18eec05	 orr         lr, lr, r5, lsl #24
  0003c	e589e01c	 str         lr, [r9, #0x1C]

; 274  :     m_dwInstance  = lpWOD->dwInstance;

  00040	e5d8600c	 ldrb        r6, [r8, #0xC]
  00044	e5d8e00d	 ldrb        lr, [r8, #0xD]
  00048	e5d8400e	 ldrb        r4, [r8, #0xE]
  0004c	e5d8500f	 ldrb        r5, [r8, #0xF]
  00050	e186e40e	 orr         lr, r6, lr, lsl #8
  00054	e18ee804	 orr         lr, lr, r4, lsl #16
  00058	e18eec05	 orr         lr, lr, r5, lsl #24
  0005c	e589e020	 str         lr, [r9, #0x20]

; 275  :     m_hWave       = lpWOD->hWave;

  00060	e5d8e000	 ldrb        lr, [r8]
  00064	e5d83001	 ldrb        r3, [r8, #1]
  00068	e5d82002	 ldrb        r2, [r8, #2]
  0006c	e5d81003	 ldrb        r1, [r8, #3]
  00070	e18e3403	 orr         r3, lr, r3, lsl #8
  00074	e1833802	 orr         r3, r3, r2, lsl #16
  00078	e1833c01	 orr         r3, r3, r1, lsl #24

; 276  :     m_dwFlags     = dwFlags;
; 277  :     m_bRunning    = FALSE;

  0007c	e3a04000	 mov         r4, #0
  00080	e5893018	 str         r3, [r9, #0x18]
  00084	e5897014	 str         r7, [r9, #0x14]
  00088	e5894010	 str         r4, [r9, #0x10]

; 278  :     m_bForceQuality = FALSE;

  0008c	e589406c	 str         r4, [r9, #0x6C]

; 279  : 
; 280  :     // If it's a PCMWAVEFORMAT struct, it's smaller than a WAVEFORMATEX struct (it doesn't have the cbSize field),
; 281  :     // so don't copy too much or we risk a fault if the structure is located on the end of a page.
; 282  :     // All other non-PCM wave formats share the WAVEFORMATEX base structure
; 283  :     // Note: I don't keep around anything after the cbSize of the WAVEFORMATEX struct so that I don't need to
; 284  :     // worry about allocating additional space. If we need to keep this info around in the future, we can either
; 285  :     // allocate it dynamically here, or keep the information in any derived format-specific classes.
; 286  :     DWORD dwSize;
; 287  :     WAVEFORMATEX *pwfx = lpWOD->lpFormat;

  00090	e5d80004	 ldrb        r0, [r8, #4]
  00094	e5d83005	 ldrb        r3, [r8, #5]
  00098	e5d82006	 ldrb        r2, [r8, #6]
  0009c	e5d81007	 ldrb        r1, [r8, #7]
  000a0	e1803403	 orr         r3, r0, r3, lsl #8
  000a4	e1833802	 orr         r3, r3, r2, lsl #16
  000a8	e1831c01	 orr         r1, r3, r1, lsl #24

; 288  :     if (pwfx->wFormatTag == WAVE_FORMAT_PCM)

  000ac	e5d12000	 ldrb        r2, [r1]
  000b0	e5d13001	 ldrb        r3, [r1, #1]

; 289  :     {
; 290  :         dwSize = sizeof(PCMWAVEFORMAT);
; 291  :         m_WaveFormat.cbSize = 0;
; 292  :     }
; 293  :     else
; 294  :     {
; 295  :         dwSize = sizeof(WAVEFORMATEX);
; 296  :     }
; 297  : 
; 298  :     memcpy(&m_WaveFormat,pwfx,dwSize);

  000b4	e2890024	 add         r0, r9, #0x24
  000b8	e1823403	 orr         r3, r2, r3, lsl #8
  000bc	e3530001	 cmp         r3, #1
  000c0	03a02010	 moveq       r2, #0x10
  000c4	13a02012	 movne       r2, #0x12
  000c8	05c94034	 streqb      r4, [r9, #0x34]
  000cc	05c94035	 streqb      r4, [r9, #0x35]
  000d0	eb000000	 bl          memcpy

; 299  : 
; 300  :     m_lpWaveHdrHead    = NULL;
; 301  :     m_lpWaveHdrTail    = NULL;
; 302  :     m_lpWaveHdrCurrent = NULL;
; 303  :     m_lpCurrData       = NULL;
; 304  :     m_lpCurrDataEnd    = NULL;
; 305  :     m_dwByteCount      = 0;
; 306  :     m_dwLoopCount = 0;
; 307  : 
; 308  :     SetGain(pStreamManager->get_DefaultStreamGain()); // Set gain to default value

  000d4	e5992000	 ldr         r2, [r9]
  000d8	e5894038	 str         r4, [r9, #0x38]
  000dc	e5894040	 str         r4, [r9, #0x40]
  000e0	e589403c	 str         r4, [r9, #0x3C]
  000e4	e5894044	 str         r4, [r9, #0x44]
  000e8	e5894048	 str         r4, [r9, #0x48]
  000ec	e589404c	 str         r4, [r9, #0x4C]
  000f0	e5894054	 str         r4, [r9, #0x54]
  000f4	e59a3018	 ldr         r3, [r10, #0x18]
  000f8	e5922040	 ldr         r2, [r2, #0x40]
  000fc	e1a00009	 mov         r0, r9
  00100	e5893058	 str         r3, [r9, #0x58]
  00104	e1a0e00f	 mov         lr, pc
  00108	e12fff12	 bx          r2

; 309  : 
; 310  :     DEBUGMSG(ZONE_MDD, (TEXT("Opening stream 0x%x\r\n"),this));
; 311  : 
; 312  :     // Add stream to list. This will start playback.
; 313  :     pStreamManager->NewStream(this);

  0010c	e1a01009	 mov         r1, r9
  00110	e1a0000a	 mov         r0, r10
  00114	eb000000	 bl          |?NewStream@CStreamManager@@QAAXPAVStreamContext@@@Z|

; 314  : 
; 315  :     DoCallbackStreamOpened();

  00118	e5993000	 ldr         r3, [r9]
  0011c	e1a00009	 mov         r0, r9
  00120	e5933028	 ldr         r3, [r3, #0x28]
  00124	e1a0e00f	 mov         lr, pc
  00128	e12fff13	 bx          r3

; 316  : 
; 317  :     return S_OK;

  0012c	e3a00000	 mov         r0, #0

; 318  : }

  00130	e8bd47f0	 ldmia       sp!, {r4 - r10, lr}
  00134	e12fff1e	 bx          lr
  00138		 |$M34614|

			 ENDP  ; |?Open@StreamContext@@UAAJPAVCStreamManager@@PAUwaveopendesc_tag@@K@Z|, StreamContext::Open

	EXPORT	|?Close@StreamContext@@UAAKXZ|		; StreamContext::Close
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34634| DCD	|$LN11@Close|
	DCD	0x40000d01
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Close@StreamContext@@UAAKXZ| PROC	; StreamContext::Close

; 328  : {

  00000		 |$LN11@Close|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34631|

; 329  :     if (StillPlaying())

  00004	e5903038	 ldr         r3, [r0, #0x38]
  00008	e3530000	 cmp         r3, #0

; 330  :     {
; 331  :         return WAVERR_STILLPLAYING;

  0000c	13a00021	 movne       r0, #0x21

; 339  : }

  00010	149de004	 ldrne       lr, [sp], #4
  00014	112fff1e	 bxne        lr

; 332  :     }
; 333  : 
; 334  :     DEBUGMSG(ZONE_MDD, (TEXT("Closing stream 0x%x\r\n"),this));
; 335  : 
; 336  :     DoCallbackStreamClosed();

  00018	e5903000	 ldr         r3, [r0]
  0001c	e593302c	 ldr         r3, [r3, #0x2C]
  00020	e1a0e00f	 mov         lr, pc
  00024	e12fff13	 bx          r3

; 337  : 
; 338  :     return MMSYSERR_NOERROR;

  00028	e3a00000	 mov         r0, #0

; 339  : }

  0002c	e49de004	 ldr         lr, [sp], #4
  00030	e12fff1e	 bx          lr
  00034		 |$M34632|

			 ENDP  ; |?Close@StreamContext@@UAAKXZ|, StreamContext::Close

	EXPORT	|?AddRef@StreamContext@@QAAJXZ|		; StreamContext::AddRef

  00000			 AREA	 |.pdata|, PDATA
|$T34644| DCD	|$LN5@AddRef|
	DCD	0x40000500
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?AddRef@StreamContext@@QAAJXZ| PROC	; StreamContext::AddRef

; 349  : {

  00000		 |$LN5@AddRef|
  00000		 |$M34641|
  00000	e1a02000	 mov         r2, r0

; 350  :     LONG RefCount = ++m_RefCount;

  00004	e592300c	 ldr         r3, [r2, #0xC]
  00008	e2830001	 add         r0, r3, #1
  0000c	e582000c	 str         r0, [r2, #0xC]

; 351  : 
; 352  :     DEBUGMSG(ZONE_MDD, (TEXT("AddRef stream 0x%x, RefCount=%d\r\n"),this,RefCount));
; 353  : 
; 354  :     return RefCount;
; 355  : }

  00010	e12fff1e	 bx          lr
  00014		 |$M34642|

			 ENDP  ; |?AddRef@StreamContext@@QAAJXZ|, StreamContext::AddRef

	EXPORT	|?Release@StreamContext@@QAAJXZ|	; StreamContext::Release
	IMPORT	|?DeleteStream@CStreamManager@@QAAXPAVStreamContext@@@Z| ; CStreamManager::DeleteStream
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34663| DCD	|$LN11@Release|
	DCD	0x40002001
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Release@StreamContext@@QAAJXZ| PROC	; StreamContext::Release

; 366  : {

  00000		 |$LN11@Release|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M34660|
  00004	e1a04000	 mov         r4, r0

; 367  :     LONG RefCount = --m_RefCount;

  00008	e594300c	 ldr         r3, [r4, #0xC]
  0000c	e2433001	 sub         r3, r3, #1
  00010	e584300c	 str         r3, [r4, #0xC]
  00014	e1b05003	 movs        r5, r3

; 368  : 
; 369  : //    DEBUGMSG(ZONE_MDD, (TEXT("Releasing stream 0x%x, RefCount=%d\r\n"),this,RefCount));
; 370  :     if (RefCount==0)

  00018	1a000015	 bne         |$LN5@Release|

; 371  :     {
; 372  :         // clean up quality ref count if app didn't do it
; 373  :         if (m_bForceQuality)

  0001c	e594306c	 ldr         r3, [r4, #0x6C]
  00020	e3530000	 cmp         r3, #0
  00024	0a000009	 beq         |$LN1@Release|

; 374  :             {
; 375  :              GetStreamManager()->get_HardwareAudioBridge()->enable_WideBand(
; 376  :                 FALSE
; 377  :                 );

  00028	e5940050	 ldr         r0, [r4, #0x50]
  0002c	e5903000	 ldr         r3, [r0]
  00030	e5933014	 ldr         r3, [r3, #0x14]
  00034	e1a0e00f	 mov         lr, pc
  00038	e12fff13	 bx          r3
  0003c	e5903000	 ldr         r3, [r0]
  00040	e3a01000	 mov         r1, #0
  00044	e5933048	 ldr         r3, [r3, #0x48]
  00048	e1a0e00f	 mov         lr, pc
  0004c	e12fff13	 bx          r3
  00050		 |$LN1@Release|

; 378  :             }
; 379  : 
; 380  :         DEBUGMSG(ZONE_MDD, (TEXT("Deleting stream 0x%x\r\n"),this));
; 381  :         // Only remove stream from list when all refcounts are gone.
; 382  :         m_pStreamManager->DeleteStream(this);

  00050	e5940050	 ldr         r0, [r4, #0x50]
  00054	e1a01004	 mov         r1, r4
  00058	eb000000	 bl          |?DeleteStream@CStreamManager@@QAAXPAVStreamContext@@@Z|

; 383  :         delete this;

  0005c	e5943000	 ldr         r3, [r4]
  00060	e3a01001	 mov         r1, #1
  00064	e1a00004	 mov         r0, r4
  00068	e5933000	 ldr         r3, [r3]
  0006c	e1a0e00f	 mov         lr, pc
  00070	e12fff13	 bx          r3
  00074		 |$LN5@Release|

; 384  :     }
; 385  :     return RefCount;
; 386  : }

  00074	e1a00005	 mov         r0, r5
  00078	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  0007c	e12fff1e	 bx          lr
  00080		 |$M34661|

			 ENDP  ; |?Release@StreamContext@@QAAJXZ|, StreamContext::Release

	EXPORT	|?QueueBuffer@StreamContext@@UAAKPAUwavehdr_tag@@@Z| ; StreamContext::QueueBuffer

  00000			 AREA	 |.pdata|, PDATA
|$T34674| DCD	|$LN11@QueueBuffe|
	DCD	0x40002c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?QueueBuffer@StreamContext@@UAAKPAUwavehdr_tag@@@Z| PROC ; StreamContext::QueueBuffer

; 397  : {

  00000		 |$LN11@QueueBuffe|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34671|
  00004	e1a0e001	 mov         lr, r1
  00008	e1a01000	 mov         r1, r0

; 398  :     if (!(lpWaveHdr->dwFlags & WHDR_PREPARED))

  0000c	e59e3010	 ldr         r3, [lr, #0x10]
  00010	e3130002	 tst         r3, #2

; 399  :     {
; 400  :         return WAVERR_UNPREPARED;

  00014	03a00022	 moveq       r0, #0x22

; 439  : }

  00018	049de004	 ldreq       lr, [sp], #4
  0001c	012fff1e	 bxeq        lr

; 401  :     }
; 402  : 
; 403  :     lpWaveHdr->dwFlags |= WHDR_INQUEUE;
; 404  :     lpWaveHdr->dwFlags &= ~WHDR_DONE;

  00020	e3c33001	 bic         r3, r3, #1
  00024	e3833010	 orr         r3, r3, #0x10
  00028	e58e3010	 str         r3, [lr, #0x10]

; 405  :     lpWaveHdr->lpNext=NULL;

  0002c	e3a03000	 mov         r3, #0
  00030	e58e3018	 str         r3, [lr, #0x18]

; 406  :     lpWaveHdr->dwBytesRecorded=0;

  00034	e58e3008	 str         r3, [lr, #8]

; 407  : 
; 408  :     if (!m_lpWaveHdrHead)

  00038	e5913038	 ldr         r3, [r1, #0x38]
  0003c	e3530000	 cmp         r3, #0

; 409  :     {
; 410  :         m_lpWaveHdrHead = lpWaveHdr;

  00040	0581e038	 streq       lr, [r1, #0x38]

; 411  :     }
; 412  :     else
; 413  :     {
; 414  :         m_lpWaveHdrTail->lpNext=lpWaveHdr;

  00044	15913040	 ldrne       r3, [r1, #0x40]
  00048	1583e018	 strne       lr, [r3, #0x18]

; 415  :     }
; 416  : 
; 417  :     m_lpWaveHdrTail=lpWaveHdr;
; 418  : 
; 419  :     // Note: Even if head & tail are valid, current may be NULL if we're in the middle of
; 420  :     // a loop and ran out of data. So, we need to check specifically against current to
; 421  :     // decide if we need to initialize it.
; 422  :     if (!m_lpWaveHdrCurrent)

  0004c	e591303c	 ldr         r3, [r1, #0x3C]
  00050	e581e040	 str         lr, [r1, #0x40]
  00054	e3530000	 cmp         r3, #0
  00058	1a00000a	 bne         |$LN2@QueueBuffe|

; 423  :     {
; 424  :         m_lpWaveHdrCurrent = lpWaveHdr;

  0005c	e581e03c	 str         lr, [r1, #0x3C]

; 425  :         m_lpCurrData    = (PBYTE)lpWaveHdr->lpData;

  00060	e59e3000	 ldr         r3, [lr]
  00064	e5813044	 str         r3, [r1, #0x44]

; 426  :         m_lpCurrDataEnd = (PBYTE)lpWaveHdr->lpData + lpWaveHdr->dwBufferLength;

  00068	e59e2004	 ldr         r2, [lr, #4]
  0006c	e59e3000	 ldr         r3, [lr]
  00070	e0823003	 add         r3, r2, r3
  00074	e5813048	 str         r3, [r1, #0x48]

; 427  :         if (lpWaveHdr->dwFlags & WHDR_BEGINLOOP)    // if this is the start of a loop block

  00078	e59e3010	 ldr         r3, [lr, #0x10]
  0007c	e3130004	 tst         r3, #4

; 428  :         {
; 429  :             m_dwLoopCount = lpWaveHdr->dwLoops;     // save # of loops

  00080	159e3014	 ldrne       r3, [lr, #0x14]
  00084	15813054	 strne       r3, [r1, #0x54]
  00088		 |$LN2@QueueBuffe|

; 430  :         }
; 431  :     }
; 432  : 
; 433  :     if (m_bRunning)

  00088	e5913010	 ldr         r3, [r1, #0x10]
  0008c	e3530000	 cmp         r3, #0

; 434  :     {
; 435  :         m_pStreamManager->StreamReadyToRender(this);

  00090	15910050	 ldrne       r0, [r1, #0x50]
  00094	15903000	 ldrne       r3, [r0]
  00098	15933020	 ldrne       r3, [r3, #0x20]
  0009c	11a0e00f	 movne       lr, pc
  000a0	112fff13	 bxne        r3

; 436  :     }
; 437  : 
; 438  :     return MMSYSERR_NOERROR;

  000a4	e3a00000	 mov         r0, #0

; 439  : }

  000a8	e49de004	 ldr         lr, [sp], #4
  000ac	e12fff1e	 bx          lr
  000b0		 |$M34672|

			 ENDP  ; |?QueueBuffer@StreamContext@@UAAKPAUwavehdr_tag@@@Z|, StreamContext::QueueBuffer

	EXPORT	|?GetNextBuffer@StreamContext@@QAAPAEXZ| ; StreamContext::GetNextBuffer
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34689| DCD	|$LN19@GetNextBuf|
	DCD	0x40003701
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetNextBuffer@StreamContext@@QAAPAEXZ| PROC ; StreamContext::GetNextBuffer

; 462  : {

  00000		 |$LN19@GetNextBuf|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M34686|
  00004	e1a04000	 mov         r4, r0

; 463  :     LPWAVEHDR lpOldHdr;
; 464  :     LPWAVEHDR lpNewHdr;
; 465  : 
; 466  :     // Get a pointer to the current buffer which is now done being processed
; 467  :     lpOldHdr=m_lpWaveHdrCurrent;

  00008	e594303c	 ldr         r3, [r4, #0x3C]
  0000c	e1b00003	 movs        r0, r3

; 468  : 
; 469  :     if (!lpOldHdr)
; 470  :     {
; 471  :         return NULL;

  00010	03a00000	 moveq       r0, #0

; 536  : }

  00014	08bd4010	 ldmeqia     sp!, {r4, lr}
  00018	012fff1e	 bxeq        lr

; 472  :     }
; 473  : 
; 474  :     // Are we in a loop
; 475  :     // Note: a loopcount of 1 means we're not really in a loop
; 476  :     if (m_dwLoopCount>1)

  0001c	e5942054	 ldr         r2, [r4, #0x54]
  00020	e3a0e000	 mov         lr, #0
  00024	e3520001	 cmp         r2, #1
  00028	9a00000b	 bls         |$LN11@GetNextBuf|

; 477  :     {
; 478  :         // We're in a loop!
; 479  :         if (lpOldHdr->dwFlags & WHDR_ENDLOOP)

  0002c	e5903010	 ldr         r3, [r0, #0x10]
  00030	e3130008	 tst         r3, #8
  00034	0a000005	 beq         |$LN10@GetNextBuf|

; 480  :         {
; 481  :            // In loop, last buffer
; 482  :             // If dwLoopCount was set to INFINITE, loop forever
; 483  :             // (Note: this is not explicitly in the wave driver API spec)
; 484  :             if (m_dwLoopCount!=INFINITE)

  00038	e3720001	 cmn         r2, #1

; 485  :             {
; 486  :            m_dwLoopCount--;                    // decrement loop count

  0003c	12423001	 subne       r3, r2, #1

; 487  :             }
; 488  :            lpNewHdr=m_lpWaveHdrHead;           // go back to start of loop

  00040	e5941038	 ldr         r1, [r4, #0x38]
  00044	15843054	 strne       r3, [r4, #0x54]

; 494  :         }
; 495  : 
; 496  :         lpOldHdr=NULL;

  00048	e3a00000	 mov         r0, #0

; 497  :     }
; 498  :     else

  0004c	ea00000a	 b           |$LN4@GetNextBuf|
  00050		 |$LN10@GetNextBuf|

; 489  :         }
; 490  :         else
; 491  :         {
; 492  :            // In loop, intermediate buffer
; 493  :            lpNewHdr=lpOldHdr->lpNext;          // just go to next buffer in loop block

  00050	e5901018	 ldr         r1, [r0, #0x18]

; 494  :         }
; 495  : 
; 496  :         lpOldHdr=NULL;

  00054	e3a00000	 mov         r0, #0

; 497  :     }
; 498  :     else

  00058	ea000007	 b           |$LN4@GetNextBuf|
  0005c		 |$LN11@GetNextBuf|

; 499  :     {
; 500  :         // Not in a loop; return old buffer and get new buffer
; 501  :         lpNewHdr=lpOldHdr->lpNext;

  0005c	e5903018	 ldr         r3, [r0, #0x18]
  00060	e1b01003	 movs        r1, r3

; 502  : 
; 503  :         m_lpWaveHdrHead = lpNewHdr;           // reset list head

  00064	e5841038	 str         r1, [r4, #0x38]

; 504  :         if (!lpNewHdr)
; 505  :         {
; 506  :             m_lpWaveHdrTail=NULL;             // no new buffer, reset tail to NULL

  00068	0584e040	 streq       lr, [r4, #0x40]

; 507  :         }
; 508  :         else if (lpNewHdr->dwFlags & WHDR_BEGINLOOP)    // if new buffer is start of a loop block

  0006c	15913010	 ldrne       r3, [r1, #0x10]
  00070	13130004	 tstne       r3, #4

; 509  :         {
; 510  :             m_dwLoopCount=lpNewHdr->dwLoops;  // save # of loops

  00074	15913014	 ldrne       r3, [r1, #0x14]
  00078	15843054	 strne       r3, [r4, #0x54]
  0007c		 |$LN4@GetNextBuf|

; 511  :         }
; 512  :     }
; 513  : 
; 514  :     m_lpWaveHdrCurrent=lpNewHdr;              // save current buffer pointer
; 515  : 
; 516  :     if (lpNewHdr)

  0007c	e3510000	 cmp         r1, #0
  00080	e584103c	 str         r1, [r4, #0x3C]

; 517  :     {
; 518  :         m_lpCurrData    = (PBYTE)lpNewHdr->lpData;  // reinitialize data pointer

  00084	15912000	 ldrne       r2, [r1]
  00088	15842044	 strne       r2, [r4, #0x44]

; 519  :         m_lpCurrDataEnd = m_lpCurrData + lpNewHdr->dwBufferLength;

  0008c	15913004	 ldrne       r3, [r1, #4]

; 520  :     }
; 521  :     else
; 522  :     {
; 523  :         m_lpCurrData  = NULL;

  00090	0584e044	 streq       lr, [r4, #0x44]
  00094	10833002	 addne       r3, r3, r2
  00098	15843048	 strne       r3, [r4, #0x48]

; 524  :         m_lpCurrDataEnd = NULL;

  0009c	0584e048	 streq       lr, [r4, #0x48]

; 525  :     }
; 526  : 
; 527  :     // Return the old buffer
; 528  :     // This may cause the stream to be destroyed, so make sure that any calls to this function
; 529  :     // are within an AddRef/Release block
; 530  :     if (lpOldHdr)

  000a0	e3500000	 cmp         r0, #0
  000a4	0a000009	 beq         |$LN15@GetNextBuf|

; 531  :     {
; 532  :         ReturnBuffer(lpOldHdr);

  000a8	e5903010	 ldr         r3, [r0, #0x10]
  000ac	e1a01000	 mov         r1, r0
  000b0	e3c33010	 bic         r3, r3, #0x10
  000b4	e3833001	 orr         r3, r3, #1
  000b8	e5803010	 str         r3, [r0, #0x10]
  000bc	e5943000	 ldr         r3, [r4]
  000c0	e1a00004	 mov         r0, r4
  000c4	e5933024	 ldr         r3, [r3, #0x24]
  000c8	e1a0e00f	 mov         lr, pc
  000cc	e12fff13	 bx          r3
  000d0		 |$LN15@GetNextBuf|

; 533  :     }
; 534  : 
; 535  :     return m_lpCurrData;

  000d0	e5940044	 ldr         r0, [r4, #0x44]

; 536  : }

  000d4	e8bd4010	 ldmia       sp!, {r4, lr}
  000d8	e12fff1e	 bx          lr
  000dc		 |$M34687|

			 ENDP  ; |?GetNextBuffer@StreamContext@@QAAPAEXZ|, StreamContext::GetNextBuffer

	EXPORT	|?BreakLoop@StreamContext@@QAAKXZ|	; StreamContext::BreakLoop
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34711| DCD	|$LN17@BreakLoop|
	DCD	0x40002301
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?BreakLoop@StreamContext@@QAAKXZ| PROC ; StreamContext::BreakLoop

; 547  : {

  00000		 |$LN17@BreakLoop|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M34708|
  00004	e1a04000	 mov         r4, r0

; 548  :     AddRef();

  00008	e594300c	 ldr         r3, [r4, #0xC]

; 549  : 
; 550  :     if (m_dwLoopCount>0)

  0000c	e5942054	 ldr         r2, [r4, #0x54]
  00010	e2833001	 add         r3, r3, #1
  00014	e584300c	 str         r3, [r4, #0xC]
  00018	e3520000	 cmp         r2, #0
  0001c	9a000015	 bls         |$LN2@BreakLoop|

; 551  :     {
; 552  :         m_dwLoopCount = 0;
; 553  : 
; 554  :         LPWAVEHDR lpHdr;
; 555  :         while (m_lpWaveHdrHead!=m_lpWaveHdrCurrent)

  00020	e3a05000	 mov         r5, #0
  00024	e5845054	 str         r5, [r4, #0x54]
  00028	ea00000e	 b           |$LN14@BreakLoop|
  0002c		 |$LL3@BreakLoop|

; 556  :         {
; 557  :             lpHdr = m_lpWaveHdrHead;

  0002c	e5942038	 ldr         r2, [r4, #0x38]

; 558  :             m_lpWaveHdrHead = lpHdr->lpNext;
; 559  :             if (m_lpWaveHdrHead==NULL)
; 560  :             {
; 561  :                 m_lpWaveHdrTail=NULL;
; 562  :             }
; 563  :             ReturnBuffer(lpHdr);

  00030	e1a00004	 mov         r0, r4
  00034	e5923018	 ldr         r3, [r2, #0x18]
  00038	e1a01002	 mov         r1, r2
  0003c	e3530000	 cmp         r3, #0
  00040	05845040	 streq       r5, [r4, #0x40]
  00044	e5843038	 str         r3, [r4, #0x38]
  00048	e5923010	 ldr         r3, [r2, #0x10]
  0004c	e3c33010	 bic         r3, r3, #0x10
  00050	e3833001	 orr         r3, r3, #1
  00054	e5823010	 str         r3, [r2, #0x10]
  00058	e5943000	 ldr         r3, [r4]
  0005c	e5933024	 ldr         r3, [r3, #0x24]
  00060	e1a0e00f	 mov         lr, pc
  00064	e12fff13	 bx          r3
  00068		 |$LN14@BreakLoop|
  00068	e594303c	 ldr         r3, [r4, #0x3C]
  0006c	e5942038	 ldr         r2, [r4, #0x38]
  00070	e1520003	 cmp         r2, r3
  00074	1affffec	 bne         |$LL3@BreakLoop|
  00078		 |$LN2@BreakLoop|

; 564  :         }
; 565  :     }
; 566  : 
; 567  :     Release();

  00078	e1a00004	 mov         r0, r4
  0007c	eb000000	 bl          |?Release@StreamContext@@QAAJXZ|

; 568  : 
; 569  :     return MMSYSERR_NOERROR;

  00080	e3a00000	 mov         r0, #0

; 570  : }

  00084	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00088	e12fff1e	 bx          lr
  0008c		 |$M34709|

			 ENDP  ; |?BreakLoop@StreamContext@@QAAKXZ|, StreamContext::BreakLoop

	EXPORT	|?MapGain@StreamContext@@UAAKKK@Z|	; StreamContext::MapGain
	IMPORT	|?GetClassProperty@CStreamManager@@QAAHKPAKPAH@Z| ; CStreamManager::GetClassProperty
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmmgr.h

  00000			 AREA	 |.pdata|, PDATA
|$T34749| DCD	|$LN30@MapGain|
	DCD	0x40004702
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?MapGain@StreamContext@@UAAKKK@Z| PROC ; StreamContext::MapGain

; 581  : {

  00000		 |$LN30@MapGain|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004	e24dd008	 sub         sp, sp, #8
  00008		 |$M34746|
  00008	e1a06002	 mov         r6, r2
  0000c	e1a0e001	 mov         lr, r1
  00010	e1a05000	 mov         r5, r0

; 582  :     // Get correct stream gain based on channel
; 583  :     if (Channel==1)
; 584  :     {
; 585  :         dwStreamGain >>= 16;
; 586  :     }
; 587  :     dwStreamGain &= 0xFFFF;
; 588  : 
; 589  :     // Get class property.
; 590  :     DWORD dwClassGain;
; 591  :     BOOL fBypassDeviceGain;
; 592  :     if (!m_pStreamManager->GetClassProperty(m_dwClassId, &dwClassGain, &fBypassDeviceGain))

  00014	e5951068	 ldr         r1, [r5, #0x68]
  00018	e5950050	 ldr         r0, [r5, #0x50]
  0001c	e3560001	 cmp         r6, #1
  00020	e3a03cff	 mov         r3, #0xFF, 24
  00024	01a0e82e	 moveq       lr, lr, lsr #16
  00028	e38340ff	 orr         r4, r3, #0xFF
  0002c	e28d3000	 add         r3, sp, #0
  00030	e28d2004	 add         r2, sp, #4
  00034	e00e7004	 and         r7, lr, r4
  00038	eb000000	 bl          |?GetClassProperty@CStreamManager@@QAAHKPAKPAH@Z|
  0003c	e3500000	 cmp         r0, #0

; 593  :     {
; 594  :         dwClassGain = 0xFFFF;
; 595  :         fBypassDeviceGain = FALSE;

  00040	03a03000	 moveq       r3, #0
  00044	058d3000	 streq       r3, [sp]
  00048	159d3000	 ldrne       r3, [sp]
  0004c	01a02004	 moveq       r2, r4
  00050	159d2004	 ldrne       r2, [sp, #4]

; 596  :     }
; 597  :     dwClassGain &= 0xFFFF; // For now, only use lowest 16 bits for both channels
; 598  : 
; 599  :     // Get Device gain
; 600  :     DWORD dwDeviceGain;
; 601  :     if (fBypassDeviceGain)

  00054	e3530000	 cmp         r3, #0

; 602  :     {
; 603  :         dwDeviceGain = 0xFFFF;

  00058	11a05004	 movne       r5, r4
  0005c	e0021004	 and         r1, r2, r4
  00060	e58d1004	 str         r1, [sp, #4]
  00064	1a000008	 bne         |$LN9@MapGain|

; 604  :     }
; 605  :     else
; 606  :     {
; 607  :         if (m_pStreamManager->get_Mute())

  00068	e5952050	 ldr         r2, [r5, #0x50]
  0006c	e5923010	 ldr         r3, [r2, #0x10]
  00070	e3530000	 cmp         r3, #0

; 608  :         {
; 609  :             dwDeviceGain = 0;

  00074	13a05000	 movne       r5, #0
  00078	1a000003	 bne         |$LN9@MapGain|

; 610  :         }
; 611  :         else
; 612  :         {
; 613  :             // Apply device gain
; 614  :             dwDeviceGain = m_pStreamManager->get_Gain();

  0007c	e592300c	 ldr         r3, [r2, #0xC]

; 615  :             if (Channel==1)

  00080	e3560001	 cmp         r6, #1

; 616  :             {
; 617  :                 dwDeviceGain >>= 16;

  00084	01a03823	 moveq       r3, r3, lsr #16

; 618  :             }
; 619  :             dwDeviceGain &= 0xFFFF;

  00088	e0035004	 and         r5, r3, r4
  0008c		 |$LN9@MapGain|

; 620  :         }
; 621  :     }
; 622  : 
; 623  :     DWORD fGainMultiplier;
; 624  : 
; 625  :     // Special handling- if any gain is totally 0, mute the output
; 626  :     if ((dwStreamGain==0) || (dwDeviceGain==0) || (dwClassGain==0))

  0008c	e3570000	 cmp         r7, #0
  00090	0a000019	 beq         |$LN6@MapGain|
  00094	e3550000	 cmp         r5, #0
  00098	0a000017	 beq         |$LN6@MapGain|
  0009c	e3510000	 cmp         r1, #0
  000a0	0a000015	 beq         |$LN6@MapGain|

; 629  :     }
; 630  :     else
; 631  :     {
; 632  :         // Now calculate attenuation of each in dB using appropriate ranges
; 633  : 
; 634  :         // Stream volume is normalized to the range from 0 to -100 dB
; 635  :         // Device and class gain are normalized from 0 to -35 dB
; 636  :         // These can be modified in hwctxt.h
; 637  : 
; 638  :         DWORD dBAttenStream, dBAttenDevice, dBAttenClass, dBAttenTotal;
; 639  : 
; 640  :         dBAttenStream    = ((0xFFFF - dwStreamGain)    *
; 641  :             m_pStreamManager->get_StreamAttenMax());
; 642  :         dBAttenDevice    = ((0xFFFF - dwDeviceGain)    *
; 643  :             m_pStreamManager->get_DeviceAttenMax());
; 644  :         dBAttenClass     = ((0xFFFF - dwClassGain) *
; 645  :             m_pStreamManager->get_ClassAttenMax());

  000a4	e59f306c	 ldr         r3, [pc, #0x6C]
  000a8	e59f2064	 ldr         r2, [pc, #0x64]
  000ac	e0610004	 rsb         r0, r1, r4
  000b0	e5933000	 ldr         r3, [r3]
  000b4	e5921000	 ldr         r1, [r2]
  000b8	e59fe050	 ldr         lr, [pc, #0x50]

; 646  : 
; 647  :         // Add together
; 648  :         dBAttenTotal = dBAttenStream + dBAttenDevice + dBAttenClass;
; 649  : 
; 650  :         // Multiply result by 2 for .5 dB steps in the table
; 651  :         dBAttenTotal *= 2;
; 652  : 
; 653  :         // Round up to account for rounding errors in lower 16 bits
; 654  :         dBAttenTotal += 0x8000;
; 655  : 
; 656  :         // Now shift back to the lowest 16 bits to get an index into the table
; 657  :         dBAttenTotal >>= 16;

  000bc	e0020390	 mul         r2, r0, r3
  000c0	e0653004	 rsb         r3, r5, r4
  000c4	e0212193	 mla         r1, r3, r1, r2
  000c8	e59e2000	 ldr         r2, [lr]
  000cc	e0673004	 rsb         r3, r7, r4
  000d0	e0221293	 mla         r2, r3, r2, r1
  000d4	e2823901	 add         r3, r2, #1, 18
  000d8	e1a03083	 mov         r3, r3, lsl #1
  000dc	e1b02823	 movs        r2, r3, lsr #16

; 658  : 
; 659  :         // dBAttenTotal should range from 0 to something like 340 (if all terms were close to 0)
; 660  : 
; 661  :         // Special case 0 as totally muted. The table starts at -.5dB, rather than 0dB, since
; 662  :         // 0dB would take more than the 16-bits we allowed per entry.
; 663  :         if (dBAttenTotal==0)
; 664  :         {
; 665  :             fGainMultiplier = 0x10000;

  000e0	03a00801	 moveq       r0, #1, 16
  000e4	0a000005	 beq         |$LN1@MapGain|

; 666  :         }
; 667  :         else if (dBAttenTotal>200)

  000e8	e35200c8	 cmp         r2, #0xC8

; 668  :         {
; 669  :             fGainMultiplier = 0;
; 670  :         }
; 671  :         else
; 672  :         {
; 673  :             fGainMultiplier = (DWORD)GainMap[dBAttenTotal-1];

  000ec	959f3018	 ldrls       r3, [pc, #0x18]
  000f0	90833082	 addls       r3, r3, r2, lsl #1
  000f4	915300b2	 ldrlsh      r0, [r3, #-2]
  000f8	9a000000	 bls         |$LN1@MapGain|
  000fc		 |$LN6@MapGain|

; 627  :     {
; 628  :         fGainMultiplier = 0;

  000fc	e3a00000	 mov         r0, #0
  00100		 |$LN1@MapGain|

; 674  :         }
; 675  :     }
; 676  : 
; 677  :     return fGainMultiplier;
; 678  : }

  00100	e28dd008	 add         sp, sp, #8
  00104	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  00108	e12fff1e	 bx          lr
  0010c		 |$LN31@MapGain|
  0010c		 |$LN32@MapGain|
  0010c	00000000	 DCD         |GainMap|
  00110		 |$LN33@MapGain|
  00110	00000000	 DCD         |?m_dwStreamAttenMax@CStreamManager@@1KA|
  00114		 |$LN34@MapGain|
  00114	00000000	 DCD         |?m_dwDeviceAttenMax@CStreamManager@@1KA|
  00118		 |$LN35@MapGain|
  00118	00000000	 DCD         |?m_dwClassAttenMax@CStreamManager@@1KA|
  0011c		 |$M34747|

			 ENDP  ; |?MapGain@StreamContext@@UAAKKK@Z|, StreamContext::MapGain

	EXPORT	|?GainChange@StreamContext@@UAAXXZ|	; StreamContext::GainChange
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34773| DCD	|$LN14@GainChange|
	DCD	0x40002a01
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GainChange@StreamContext@@UAAXXZ| PROC ; StreamContext::GainChange

; 689  : {

  00000		 |$LN14@GainChange|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M34770|
  00004	e1a06000	 mov         r6, r0

; 690  :     for (int i=0; i<2; i++)

  00008	e3a04000	 mov         r4, #0
  0000c	e1a05006	 mov         r5, r6
  00010		 |$LL3@GainChange|

; 691  :     {
; 692  : #if (MONO_GAIN)
; 693  :         m_fxpGain[i] = MapGain(m_dwGain,0);
; 694  : #else
; 695  :         m_fxpGain[i] = MapGain(m_dwGain,i);

  00010	e5963000	 ldr         r3, [r6]
  00014	e5961058	 ldr         r1, [r6, #0x58]
  00018	e1a02004	 mov         r2, r4
  0001c	e593303c	 ldr         r3, [r3, #0x3C]
  00020	e1a00006	 mov         r0, r6
  00024	e1a0e00f	 mov         lr, pc
  00028	e12fff13	 bx          r3
  0002c	e2844001	 add         r4, r4, #1
  00030	e585005c	 str         r0, [r5, #0x5C]
  00034	e2855004	 add         r5, r5, #4
  00038	e3540002	 cmp         r4, #2
  0003c	bafffff3	 blt         |$LL3@GainChange|

; 696  : #endif
; 697  :     }
; 698  :     m_bMono = m_pStreamManager->get_Mono();

  00040	e5963050	 ldr         r3, [r6, #0x50]

; 699  : 
; 700  :     GetStreamManager()->get_HardwareAudioBridge()->set_StreamGain(
; 701  :         (CHardwareAudioBridge::StreamType)GetStreamDirection(), this,
; 702  :         (DWORD)(m_fxpGain[0]+m_fxpGain[1]/2)
; 703  :         );

  00044	e5962000	 ldr         r2, [r6]
  00048	e1a00006	 mov         r0, r6
  0004c	e5933014	 ldr         r3, [r3, #0x14]
  00050	e5922004	 ldr         r2, [r2, #4]
  00054	e5863064	 str         r3, [r6, #0x64]
  00058	e1a0e00f	 mov         lr, pc
  0005c	e12fff12	 bx          r2
  00060	e5962050	 ldr         r2, [r6, #0x50]
  00064	e1a05000	 mov         r5, r0
  00068	e5923000	 ldr         r3, [r2]
  0006c	e1a00002	 mov         r0, r2
  00070	e5933014	 ldr         r3, [r3, #0x14]
  00074	e1a0e00f	 mov         lr, pc
  00078	e12fff13	 bx          r3
  0007c	e5903000	 ldr         r3, [r0]
  00080	e596e060	 ldr         lr, [r6, #0x60]
  00084	e596105c	 ldr         r1, [r6, #0x5C]
  00088	e593401c	 ldr         r4, [r3, #0x1C]
  0008c	e1a02006	 mov         r2, r6
  00090	e08130ae	 add         r3, r1, lr, lsr #1
  00094	e1a01005	 mov         r1, r5
  00098	e1a0e00f	 mov         lr, pc
  0009c	e12fff14	 bx          r4

; 704  : }

  000a0	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  000a4	e12fff1e	 bx          lr
  000a8		 |$M34771|

			 ENDP  ; |?GainChange@StreamContext@@UAAXXZ|, StreamContext::GainChange

	EXPORT	|?SetClassId@StreamContext@@QAAKK@Z|	; StreamContext::SetClassId
	IMPORT	|?IsValidClassId@CStreamManager@@QAAHK@Z| ; CStreamManager::IsValidClassId

  00000			 AREA	 |.pdata|, PDATA
|$T34784| DCD	|$LN6@SetClassId|
	DCD	0x40001201
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SetClassId@StreamContext@@QAAKK@Z| PROC ; StreamContext::SetClassId

; 707  : {

  00000		 |$LN6@SetClassId|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M34781|
  00004	e1a05001	 mov         r5, r1
  00008	e1a04000	 mov         r4, r0

; 708  :     if (!m_pStreamManager->IsValidClassId(dwClassId))

  0000c	e5940050	 ldr         r0, [r4, #0x50]
  00010	eb000000	 bl          |?IsValidClassId@CStreamManager@@QAAHK@Z|
  00014	e3500000	 cmp         r0, #0

; 709  :     {
; 710  :         return MMSYSERR_INVALPARAM;

  00018	03a0000b	 moveq       r0, #0xB

; 716  : }

  0001c	08bd4030	 ldmeqia     sp!, {r4, r5, lr}
  00020	012fff1e	 bxeq        lr

; 711  :     }
; 712  : 
; 713  :     m_dwClassId = dwClassId;
; 714  :     GainChange();

  00024	e5943000	 ldr         r3, [r4]
  00028	e1a00004	 mov         r0, r4
  0002c	e5933040	 ldr         r3, [r3, #0x40]
  00030	e5845068	 str         r5, [r4, #0x68]
  00034	e1a0e00f	 mov         lr, pc
  00038	e12fff13	 bx          r3

; 715  :     return MMSYSERR_NOERROR;

  0003c	e3a00000	 mov         r0, #0

; 716  : }

  00040	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00044	e12fff1e	 bx          lr
  00048		 |$M34782|

			 ENDP  ; |?SetClassId@StreamContext@@QAAKK@Z|, StreamContext::SetClassId

	EXPORT	|?GetPos@StreamContext@@UAAKPAUmmtime_tag@@@Z| ; StreamContext::GetPos
	IMPORT	|__rt_udiv|

  00000			 AREA	 |.pdata|, PDATA
|$T34798| DCD	|$LN14@GetPos|
	DCD	0x40003901
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetPos@StreamContext@@UAAKPAUmmtime_tag@@@Z| PROC ; StreamContext::GetPos

; 727  : {

  00000		 |$LN14@GetPos|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M34795|
  00004	e1a05001	 mov         r5, r1
  00008	e1a06000	 mov         r6, r0

; 728  :     switch (pmmt->wType)

  0000c	e5d54000	 ldrb        r4, [r5]
  00010	e5d53001	 ldrb        r3, [r5, #1]
  00014	e5d52002	 ldrb        r2, [r5, #2]
  00018	e5d5e003	 ldrb        lr, [r5, #3]
  0001c	e1843403	 orr         r3, r4, r3, lsl #8
  00020	e1833802	 orr         r3, r3, r2, lsl #16
  00024	e1833c0e	 orr         r3, r3, lr, lsl #24
  00028	e3530001	 cmp         r3, #1
  0002c	0a00001f	 beq         |$LN4@GetPos|
  00030	e3530002	 cmp         r3, #2
  00034	0a000012	 beq         |$LN5@GetPos|
  00038	e3530004	 cmp         r3, #4
  0003c	0a000005	 beq         |$LN1@GetPos|
  00040		 |$LN3@GetPos|

; 740  :             break;
; 741  :         }
; 742  :         // If we don't know avg bytes per sec, fall through to TIME_BYTES
; 743  : 
; 744  :     default:
; 745  :         // Anything else, return TIME_BYTES instead.
; 746  :         pmmt->wType = TIME_BYTES;

  00040	e3a03004	 mov         r3, #4
  00044	e5c53000	 strb        r3, [r5]
  00048	e3a03000	 mov         r3, #0
  0004c	e5c53001	 strb        r3, [r5, #1]
  00050	e5c53002	 strb        r3, [r5, #2]
  00054	e5c53003	 strb        r3, [r5, #3]
  00058		 |$LN1@GetPos|

; 747  : 
; 748  :         // Fall through to TIME_BYTES
; 749  :     case TIME_BYTES:
; 750  :         pmmt->u.cb = m_dwByteCount;

  00058	e596004c	 ldr         r0, [r6, #0x4C]
  0005c		 |$LN10@GetPos|
  0005c	e1a03420	 mov         r3, r0, lsr #8
  00060	e1a02820	 mov         r2, r0, lsr #16
  00064	e1a01c20	 mov         r1, r0, lsr #24
  00068	e5c50004	 strb        r0, [r5, #4]
  0006c	e5c53005	 strb        r3, [r5, #5]
  00070	e5c52006	 strb        r2, [r5, #6]
  00074	e5c51007	 strb        r1, [r5, #7]

; 751  :     }
; 752  : 
; 753  :     return MMSYSERR_NOERROR;

  00078	e3a00000	 mov         r0, #0

; 754  : }

  0007c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00080	e12fff1e	 bx          lr
  00084		 |$LN5@GetPos|

; 729  :     {
; 730  : 
; 731  :     case TIME_SAMPLES:
; 732  :         pmmt->u.sample = (m_dwByteCount * 8) /
; 733  :                          (m_WaveFormat.nChannels * m_WaveFormat.wBitsPerSample);

  00084	e5d61032	 ldrb        r1, [r6, #0x32]
  00088	e5d63033	 ldrb        r3, [r6, #0x33]
  0008c	e5d60026	 ldrb        r0, [r6, #0x26]
  00090	e5d62027	 ldrb        r2, [r6, #0x27]
  00094	e181e403	 orr         lr, r1, r3, lsl #8
  00098	e596304c	 ldr         r3, [r6, #0x4C]
  0009c	e1802402	 orr         r2, r0, r2, lsl #8
  000a0	e000029e	 mul         r0, lr, r2
  000a4	e1a01183	 mov         r1, r3, lsl #3
  000a8	eb000000	 bl          __rt_udiv

; 734  :         break;

  000ac	eaffffea	 b           |$LN10@GetPos|
  000b0		 |$LN4@GetPos|

; 735  : 
; 736  :     case TIME_MS:
; 737  :         if (m_WaveFormat.nAvgBytesPerSec != 0)

  000b0	e5d6002c	 ldrb        r0, [r6, #0x2C]
  000b4	e5d6302d	 ldrb        r3, [r6, #0x2D]
  000b8	e5d6202e	 ldrb        r2, [r6, #0x2E]
  000bc	e5d6102f	 ldrb        r1, [r6, #0x2F]
  000c0	e1803403	 orr         r3, r0, r3, lsl #8
  000c4	e1833802	 orr         r3, r3, r2, lsl #16
  000c8	e1930c01	 orrs        r0, r3, r1, lsl #24
  000cc	0affffdb	 beq         |$LN3@GetPos|

; 738  :         {
; 739  :             pmmt->u.ms = (m_dwByteCount * 1000) / m_WaveFormat.nAvgBytesPerSec;

  000d0	e596304c	 ldr         r3, [r6, #0x4C]
  000d4	e3a02ffa	 mov         r2, #0xFA, 30
  000d8	e0010293	 mul         r1, r3, r2
  000dc	eb000000	 bl          __rt_udiv
  000e0	eaffffdd	 b           |$LN10@GetPos|
  000e4		 |$M34796|

			 ENDP  ; |?GetPos@StreamContext@@UAAKPAUmmtime_tag@@@Z|, StreamContext::GetPos

	EXPORT	|?Run@StreamContext@@UAAKXZ|		; StreamContext::Run

  00000			 AREA	 |.pdata|, PDATA
|$T34808| DCD	|$LN6@Run|
	DCD	0x40000e01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Run@StreamContext@@UAAKXZ| PROC	; StreamContext::Run

; 764  : {

  00000		 |$LN6@Run|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34805|
  00004	e1a01000	 mov         r1, r0

; 765  :     m_bRunning=TRUE;
; 766  :     if (m_lpCurrData)

  00008	e5913044	 ldr         r3, [r1, #0x44]
  0000c	e3a02001	 mov         r2, #1
  00010	e5812010	 str         r2, [r1, #0x10]
  00014	e3530000	 cmp         r3, #0

; 767  :     {
; 768  :         m_pStreamManager->StreamReadyToRender(this);

  00018	15910050	 ldrne       r0, [r1, #0x50]
  0001c	15903000	 ldrne       r3, [r0]
  00020	15933020	 ldrne       r3, [r3, #0x20]
  00024	11a0e00f	 movne       lr, pc
  00028	112fff13	 bxne        r3

; 769  :     }
; 770  : 
; 771  :     return MMSYSERR_NOERROR;

  0002c	e3a00000	 mov         r0, #0

; 772  : }

  00030	e49de004	 ldr         lr, [sp], #4
  00034	e12fff1e	 bx          lr
  00038		 |$M34806|

			 ENDP  ; |?Run@StreamContext@@UAAKXZ|, StreamContext::Run

	EXPORT	|?Stop@StreamContext@@UAAKXZ|		; StreamContext::Stop

  00000			 AREA	 |.pdata|, PDATA
|$T34818| DCD	|$LN5@Stop|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Stop@StreamContext@@UAAKXZ| PROC	; StreamContext::Stop

; 781  : {

  00000		 |$LN5@Stop|
  00000		 |$M34815|

; 782  :     m_bRunning=FALSE;

  00000	e3a03000	 mov         r3, #0
  00004	e5803010	 str         r3, [r0, #0x10]

; 783  :     return MMSYSERR_NOERROR;

  00008	e3a00000	 mov         r0, #0

; 784  : }

  0000c	e12fff1e	 bx          lr
  00010		 |$M34816|

			 ENDP  ; |?Stop@StreamContext@@UAAKXZ|, StreamContext::Stop

	EXPORT	|?Reset@StreamContext@@UAAKXZ|		; StreamContext::Reset
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34840| DCD	|$LN16@Reset|
	DCD	0x40002701
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Reset@StreamContext@@UAAKXZ| PROC	; StreamContext::Reset

; 793  : {

  00000		 |$LN16@Reset|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M34837|
  00004	e1a04000	 mov         r4, r0

; 794  :     AddRef();
; 795  : 
; 796  :     // Stop stream for now.
; 797  :     Stop();

  00008	e5943000	 ldr         r3, [r4]
  0000c	e594200c	 ldr         r2, [r4, #0xC]
  00010	e5931018	 ldr         r1, [r3, #0x18]
  00014	e2823001	 add         r3, r2, #1
  00018	e584300c	 str         r3, [r4, #0xC]
  0001c	e1a0e00f	 mov         lr, pc
  00020	e12fff11	 bx          r1

; 798  : 
; 799  :     m_lpWaveHdrCurrent  = NULL;
; 800  :     m_lpCurrData       = NULL;
; 801  :     m_lpCurrDataEnd    = NULL;
; 802  :     m_dwByteCount      = 0;
; 803  :     m_dwLoopCount      = 0;
; 804  : 
; 805  :     LPWAVEHDR lpHdr;
; 806  :     while (m_lpWaveHdrHead)

  00024	e3a05000	 mov         r5, #0
  00028	e584503c	 str         r5, [r4, #0x3C]
  0002c	e5845044	 str         r5, [r4, #0x44]
  00030	e5845048	 str         r5, [r4, #0x48]
  00034	e584504c	 str         r5, [r4, #0x4C]
  00038	e5845054	 str         r5, [r4, #0x54]
  0003c	ea00000e	 b           |$LN13@Reset|
  00040		 |$LL3@Reset|

; 807  :     {
; 808  :         lpHdr = m_lpWaveHdrHead;

  00040	e5942038	 ldr         r2, [r4, #0x38]

; 809  :         m_lpWaveHdrHead = lpHdr->lpNext;
; 810  :         if (m_lpWaveHdrHead==NULL)
; 811  :         {
; 812  :             m_lpWaveHdrTail=NULL;
; 813  :         }
; 814  :         ReturnBuffer(lpHdr);

  00044	e1a00004	 mov         r0, r4
  00048	e5923018	 ldr         r3, [r2, #0x18]
  0004c	e1a01002	 mov         r1, r2
  00050	e3530000	 cmp         r3, #0
  00054	05845040	 streq       r5, [r4, #0x40]
  00058	e5843038	 str         r3, [r4, #0x38]
  0005c	e5923010	 ldr         r3, [r2, #0x10]
  00060	e3c33010	 bic         r3, r3, #0x10
  00064	e3833001	 orr         r3, r3, #1
  00068	e5823010	 str         r3, [r2, #0x10]
  0006c	e5943000	 ldr         r3, [r4]
  00070	e5933024	 ldr         r3, [r3, #0x24]
  00074	e1a0e00f	 mov         lr, pc
  00078	e12fff13	 bx          r3
  0007c		 |$LN13@Reset|
  0007c	e5943038	 ldr         r3, [r4, #0x38]
  00080	e3530000	 cmp         r3, #0
  00084	1affffed	 bne         |$LL3@Reset|

; 815  :     }
; 816  : 
; 817  :     Release();

  00088	e1a00004	 mov         r0, r4
  0008c	eb000000	 bl          |?Release@StreamContext@@QAAJXZ|

; 818  : 
; 819  :     return MMSYSERR_NOERROR;

  00090	e3a00000	 mov         r0, #0

; 820  : }

  00094	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  00098	e12fff1e	 bx          lr
  0009c		 |$M34838|

			 ENDP  ; |?Reset@StreamContext@@UAAKXZ|, StreamContext::Reset

	EXPORT	|?ForceQuality@StreamContext@@QAAKH@Z|	; StreamContext::ForceQuality
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.h

  00000			 AREA	 |.pdata|, PDATA
|$T34858| DCD	|$LN10@ForceQuali|
	DCD	0x40001701
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?ForceQuality@StreamContext@@QAAKH@Z| PROC ; StreamContext::ForceQuality

; 831  : {

  00000		 |$LN10@ForceQuali|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M34855|
  00004	e3510000	 cmp         r1, #0
  00008	e1a04000	 mov         r4, r0

; 832  :     // Normalize to 0 or 1
; 833  :     bForceQuality = (bForceQuality!=0);
; 834  :     if (bForceQuality==m_bForceQuality)

  0000c	e594306c	 ldr         r3, [r4, #0x6C]
  00010	13a02001	 movne       r2, #1
  00014	03a02000	 moveq       r2, #0
  00018	e1520003	 cmp         r2, r3

; 835  :     {
; 836  :         return MMSYSERR_NOERROR;

  0001c	03a00000	 moveq       r0, #0

; 843  : }

  00020	08bd4010	 ldmeqia     sp!, {r4, lr}
  00024	012fff1e	 bxeq        lr

; 837  :     }
; 838  :     m_bForceQuality = bForceQuality;
; 839  : 
; 840  :     return GetStreamManager()->get_HardwareAudioBridge()->enable_WideBand(
; 841  :                 m_bForceQuality
; 842  :                 );

  00028	e5940050	 ldr         r0, [r4, #0x50]
  0002c	e584206c	 str         r2, [r4, #0x6C]
  00030	e5903000	 ldr         r3, [r0]
  00034	e5933014	 ldr         r3, [r3, #0x14]
  00038	e1a0e00f	 mov         lr, pc
  0003c	e12fff13	 bx          r3
  00040	e5903000	 ldr         r3, [r0]
  00044	e594106c	 ldr         r1, [r4, #0x6C]
  00048	e5933048	 ldr         r3, [r3, #0x48]
  0004c	e1a0e00f	 mov         lr, pc
  00050	e12fff13	 bx          r3

; 843  : }

  00054	e8bd4010	 ldmia       sp!, {r4, lr}
  00058	e12fff1e	 bx          lr
  0005c		 |$M34856|

			 ENDP  ; |?ForceQuality@StreamContext@@QAAKH@Z|, StreamContext::ForceQuality

	EXPORT	|?GetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| ; StreamContext::GetProperty

  00000			 AREA	 |.pdata|, PDATA
|$T34869| DCD	|$LN5@GetPropert|
	DCD	0x40000801
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| PROC ; StreamContext::GetProperty

; 851  : {

  00000		 |$LN5@GetPropert|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34866|

; 852  :     // For anything we don't recognize, pass it on to the device context.
; 853  :     return m_pStreamManager->GetProperty(pPropInfo);

  00004	e5900050	 ldr         r0, [r0, #0x50]
  00008	e5903000	 ldr         r3, [r0]
  0000c	e5933028	 ldr         r3, [r3, #0x28]
  00010	e1a0e00f	 mov         lr, pc
  00014	e12fff13	 bx          r3

; 854  : }

  00018	e49de004	 ldr         lr, [sp], #4
  0001c	e12fff1e	 bx          lr
  00020		 |$M34867|

			 ENDP  ; |?GetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z|, StreamContext::GetProperty

	EXPORT	|?SetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| ; StreamContext::SetProperty
	IMPORT	|MM_PROPSET_STREAMCLASS|
; File c:\wince600\public\common\sdk\inc\objbase.h

  00000			 AREA	 |.pdata|, PDATA
|$T34892| DCD	|$LN17@SetPropert|
	DCD	0x40003a01
; Function compile flags: /Ogspy
; File c:\wince600\platform\z2170p\src\drivers\tps659xx_wave\strmctxt.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?SetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z| PROC ; StreamContext::SetProperty

; 862  : {

  00000		 |$LN17@SetPropert|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M34889|
  00004	e1a05001	 mov         r5, r1
  00008	e1a06000	 mov         r6, r0

; 863  :     DWORD mmRet = MMSYSERR_NOTSUPPORTED;
; 864  : 
; 865  :     // Stream class.
; 866  :     if (IsEqualGUID(MM_PROPSET_STREAMCLASS, *pPropInfo->pPropSetId))

  0000c	e5d5e000	 ldrb        lr, [r5]
  00010	e5d53001	 ldrb        r3, [r5, #1]
  00014	e5d52002	 ldrb        r2, [r5, #2]
  00018	e5d54003	 ldrb        r4, [r5, #3]
  0001c	e18e3403	 orr         r3, lr, r3, lsl #8
  00020	e59f00bc	 ldr         r0, [pc, #0xBC]
  00024	e1833802	 orr         r3, r3, r2, lsl #16
  00028	e1831c04	 orr         r1, r3, r4, lsl #24
  0002c	e3a02010	 mov         r2, #0x10
  00030	eb000000	 bl          memcmp
  00034	e3500000	 cmp         r0, #0
  00038	1a00001e	 bne         |$LN14@SetPropert|

; 867  :     {
; 868  :         // Set class ID.
; 869  :         if (MM_PROP_STREAMCLASS_CLASSID == pPropInfo->ulPropId)

  0003c	e5d54004	 ldrb        r4, [r5, #4]
  00040	e5d53005	 ldrb        r3, [r5, #5]
  00044	e5d52006	 ldrb        r2, [r5, #6]
  00048	e5d5e007	 ldrb        lr, [r5, #7]
  0004c	e1843403	 orr         r3, r4, r3, lsl #8
  00050	e1833802	 orr         r3, r3, r2, lsl #16
  00054	e1833c0e	 orr         r3, r3, lr, lsl #24
  00058	e3530001	 cmp         r3, #1
  0005c	1a000015	 bne         |$LN14@SetPropert|

; 870  :         {
; 871  :             if ((NULL == pPropInfo->pvPropData) || (sizeof(DWORD) != pPropInfo->cbPropData))

  00060	e5d50010	 ldrb        r0, [r5, #0x10]
  00064	e5d53011	 ldrb        r3, [r5, #0x11]
  00068	e5d52012	 ldrb        r2, [r5, #0x12]
  0006c	e5d51013	 ldrb        r1, [r5, #0x13]
  00070	e1803403	 orr         r3, r0, r3, lsl #8
  00074	e1833802	 orr         r3, r3, r2, lsl #16
  00078	e193ec01	 orrs        lr, r3, r1, lsl #24
  0007c	0a000015	 beq         |$LN3@SetPropert|
  00080	e5d50014	 ldrb        r0, [r5, #0x14]
  00084	e5d53015	 ldrb        r3, [r5, #0x15]
  00088	e5d52016	 ldrb        r2, [r5, #0x16]
  0008c	e5d51017	 ldrb        r1, [r5, #0x17]
  00090	e1803403	 orr         r3, r0, r3, lsl #8
  00094	e1833802	 orr         r3, r3, r2, lsl #16
  00098	e1833c01	 orr         r3, r3, r1, lsl #24
  0009c	e3530004	 cmp         r3, #4
  000a0	1a00000c	 bne         |$LN3@SetPropert|

; 874  :                 goto Exit;
; 875  :             }
; 876  : 
; 877  :             DWORD dwClassId = *((PDWORD) pPropInfo->pvPropData);

  000a4	e59e1000	 ldr         r1, [lr]

; 878  :             mmRet = SetClassId(dwClassId);

  000a8	e1a00006	 mov         r0, r6
  000ac	eb000000	 bl          |?SetClassId@StreamContext@@QAAKK@Z|

; 879  :         }
; 880  :     }
; 881  : 
; 882  :     // For anything we don't recognize, pass it on to the device context.
; 883  :     if (MMSYSERR_NOTSUPPORTED == mmRet)

  000b0	e3500008	 cmp         r0, #8
  000b4	1a000005	 bne         |$Exit$34179|
  000b8		 |$LN14@SetPropert|

; 884  :     {
; 885  :         mmRet = m_pStreamManager->SetProperty(pPropInfo);

  000b8	e5960050	 ldr         r0, [r6, #0x50]
  000bc	e1a01005	 mov         r1, r5
  000c0	e5903000	 ldr         r3, [r0]
  000c4	e593302c	 ldr         r3, [r3, #0x2C]
  000c8	e1a0e00f	 mov         lr, pc
  000cc	e12fff13	 bx          r3
  000d0		 |$Exit$34179|

; 886  :     }
; 887  : 
; 888  : Exit:
; 889  : 
; 890  :     return mmRet;
; 891  : }

  000d0	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  000d4	e12fff1e	 bx          lr
  000d8		 |$LN3@SetPropert|

; 872  :             {
; 873  :                 mmRet = MMSYSERR_INVALPARAM;

  000d8	e3a0000b	 mov         r0, #0xB

; 886  :     }
; 887  : 
; 888  : Exit:
; 889  : 
; 890  :     return mmRet;
; 891  : }

  000dc	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  000e0	e12fff1e	 bx          lr
  000e4		 |$LN18@SetPropert|
  000e4		 |$LN19@SetPropert|
  000e4	00000000	 DCD         |MM_PROPSET_STREAMCLASS|
  000e8		 |$M34890|

			 ENDP  ; |?SetProperty@StreamContext@@QAAKPAUtag_WAVEPROPINFO@@@Z|, StreamContext::SetProperty

	EXPORT	|?Open@WaveStreamContext@@UAAJPAVCStreamManager@@PAUwaveopendesc_tag@@K@Z| ; WaveStreamContext::Open

  00000			 AREA	 |.pdata|, PDATA
|$T34912| DCD	|$LN19@Open@2|
	DCD	0x40002f01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?Open@WaveStreamContext@@UAAJPAVCStreamManager@@PAUwaveopendesc_tag@@K@Z| PROC ; WaveStreamContext::Open

; 902  : {

  00000		 |$LN19@Open@2|
  00000	e92d4030	 stmdb       sp!, {r4, r5, lr}
  00004		 |$M34909|
  00004	e1a04000	 mov         r4, r0

; 903  :     HRESULT Result;
; 904  :     Result = StreamContext::Open(pStreamManager,lpWOD,dwFlags);

  00008	eb000000	 bl          |?Open@StreamContext@@UAAJPAVCStreamManager@@PAUwaveopendesc_tag@@K@Z|
  0000c	e3500000	 cmp         r0, #0

; 905  :     if (FAILED(Result))
; 906  :     {
; 907  :         return Result;

  00010	4a000027	 bmi         |$LN11@Open@2|

; 908  :     }
; 909  : 
; 910  :     if (m_WaveFormat.wBitsPerSample == 8)

  00014	e5d42032	 ldrb        r2, [r4, #0x32]
  00018	e5d43033	 ldrb        r3, [r4, #0x33]
  0001c	e3a05000	 mov         r5, #0
  00020	e1823403	 orr         r3, r2, r3, lsl #8

; 911  :     {
; 912  :         if (m_WaveFormat.nChannels == 1)

  00024	e5d42026	 ldrb        r2, [r4, #0x26]
  00028	e3530008	 cmp         r3, #8
  0002c	e5d43027	 ldrb        r3, [r4, #0x27]
  00030	e1823403	 orr         r3, r2, r3, lsl #8
  00034	1a000007	 bne         |$LN9@Open@2|
  00038	e3530001	 cmp         r3, #1

; 913  :         {
; 914  :             m_SampleType = PCM_TYPE_M8;
; 915  :             m_SampleSize = 1;

  0003c	03a03001	 moveq       r3, #1
  00040	05843074	 streq       r3, [r4, #0x74]
  00044	05845070	 streq       r5, [r4, #0x70]
  00048	0a000009	 beq         |$LN4@Open@2|

; 916  :         }
; 917  :         else
; 918  :         {
; 919  :             m_SampleType = PCM_TYPE_S8;

  0004c	e3a03002	 mov         r3, #2

; 920  :             m_SampleSize = 2;

  00050	e5843074	 str         r3, [r4, #0x74]

; 921  :         }
; 922  :     }
; 923  :     else

  00054	ea000005	 b           |$LN15@Open@2|
  00058		 |$LN9@Open@2|

; 924  :     {
; 925  :         if (m_WaveFormat.nChannels == 1)

  00058	e3530001	 cmp         r3, #1

; 926  :         {
; 927  :             m_SampleType = PCM_TYPE_M16;
; 928  :             m_SampleSize = 2;

  0005c	03a02002	 moveq       r2, #2

; 929  :         }
; 930  :         else
; 931  :         {
; 932  :             m_SampleType = PCM_TYPE_S16;
; 933  :             m_SampleSize = 4;

  00060	13a02004	 movne       r2, #4
  00064	03a03001	 moveq       r3, #1
  00068	e5842074	 str         r2, [r4, #0x74]
  0006c	13a03003	 movne       r3, #3
  00070		 |$LN15@Open@2|
  00070	e5843070	 str         r3, [r4, #0x70]
  00074		 |$LN4@Open@2|

; 934  :         }
; 935  :     }
; 936  : 
; 937  :     SetRate(0x10000);

  00074	e5943000	 ldr         r3, [r4]
  00078	e3a01801	 mov         r1, #1, 16
  0007c	e1a00004	 mov         r0, r4
  00080	e5933038	 ldr         r3, [r3, #0x38]
  00084	e1a0e00f	 mov         lr, pc
  00088	e12fff13	 bx          r3
  0008c	e1a03004	 mov         r3, r4
  00090	e3a02002	 mov         r2, #2
  00094		 |$LL3@Open@2|

; 938  : 
; 939  :     int i;
; 940  :     for (i=0;i<OUTCHANNELS;i++)
; 941  :     {
; 942  :         m_PrevSamp[i] = 0;

  00094	e5835080	 str         r5, [r3, #0x80]

; 943  :         m_CurrSamp[i] = 0;

  00098	e5835088	 str         r5, [r3, #0x88]
  0009c	e2833004	 add         r3, r3, #4
  000a0	e2522001	 subs        r2, r2, #1
  000a4	1afffffa	 bne         |$LL3@Open@2|

; 944  :     }
; 945  :     m_CurrT    = 0x200;   // Initializing to this ensures we get the 1st sample.

  000a8	e3a03c02	 mov         r3, #2, 24
  000ac	e5843090	 str         r3, [r4, #0x90]

; 946  : 
; 947  :     return S_OK;

  000b0	e3a00000	 mov         r0, #0
  000b4		 |$LN11@Open@2|

; 948  : }

  000b4	e8bd4030	 ldmia       sp!, {r4, r5, lr}
  000b8	e12fff1e	 bx          lr
  000bc		 |$M34910|

			 ENDP  ; |?Open@WaveStreamContext@@UAAJPAVCStreamManager@@PAUwaveopendesc_tag@@K@Z|, WaveStreamContext::Open

	EXPORT	|?GetRate@WaveStreamContext@@UBAKPAK@Z|	; WaveStreamContext::GetRate

  00000			 AREA	 |.pdata|, PDATA
|$T34923| DCD	|$LN5@GetRate|
	DCD	0x40000400
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?GetRate@WaveStreamContext@@UBAKPAK@Z| PROC ; WaveStreamContext::GetRate

; 958  : {

  00000		 |$LN5@GetRate|
  00000		 |$M34920|

; 959  :     *pdwMultiplier = m_dwMultiplier;

  00000	e590307c	 ldr         r3, [r0, #0x7C]

; 960  :     return MMSYSERR_NOERROR;

  00004	e3a00000	 mov         r0, #0
  00008	e5813000	 str         r3, [r1]

; 961  : }

  0000c	e12fff1e	 bx          lr
  00010		 |$M34921|

			 ENDP  ; |?GetRate@WaveStreamContext@@UBAKPAK@Z|, WaveStreamContext::GetRate

	EXPORT	|?RenderRawData@WaveStreamContext@@QAAPAEPAE00@Z| ; WaveStreamContext::RenderRawData

  00000			 AREA	 |.pdata|, PDATA
|$T34942| DCD	|$LN11@RenderRawD|
	DCD	0x40002701
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?RenderRawData@WaveStreamContext@@QAAPAEPAE00@Z| PROC ; WaveStreamContext::RenderRawData

; 972  : {

  00000		 |$LN11@RenderRawD|
  00000	e92d40f0	 stmdb       sp!, {r4 - r7, lr}
  00004		 |$M34939|
  00004	e1a06001	 mov         r6, r1
  00008	e1a05000	 mov         r5, r0

; 973  :     int nCopyCount;
; 974  :     PBYTE pCurrData = m_lpCurrData;

  0000c	e5957044	 ldr         r7, [r5, #0x44]

; 975  :     PBYTE pCurrDataEnd = m_lpCurrDataEnd;

  00010	e5953048	 ldr         r3, [r5, #0x48]

; 976  : 
; 977  :     // calculate how many bytes to copy and copy it to target buffer
; 978  :     //
; 979  :     nCopyCount = (int)min(pBufferEnd - pBuffer, pCurrDataEnd - pCurrData);

  00014	e0424006	 sub         r4, r2, r6

; 980  : 
; 981  :     if (GetStreamDirection() == (unsigned int)CHardwareAudioBridge::kOutput)

  00018	e1a00005	 mov         r0, r5
  0001c	e0433007	 sub         r3, r3, r7
  00020	e1540003	 cmp         r4, r3
  00024	a1a04003	 movge       r4, r3
  00028	e5953000	 ldr         r3, [r5]
  0002c	e5933004	 ldr         r3, [r3, #4]
  00030	e1a0e00f	 mov         lr, pc
  00034	e12fff13	 bx          r3
  00038	e3500000	 cmp         r0, #0

; 982  :         {
; 983  :         memcpy(pBuffer, pCurrData, nCopyCount);

  0003c	e1a02004	 mov         r2, r4
  00040	1a000003	 bne         |$LN2@RenderRawD|
  00044	e1a01007	 mov         r1, r7
  00048	e1a00006	 mov         r0, r6
  0004c	eb000000	 bl          memcpy

; 984  :         }
; 985  :     else

  00050	ea000006	 b           |$LN8@RenderRawD|
  00054		 |$LN2@RenderRawD|

; 986  :         {
; 987  :         memcpy(pCurrData, pBuffer, nCopyCount);

  00054	e1a01006	 mov         r1, r6
  00058	e1a00007	 mov         r0, r7
  0005c	eb000000	 bl          memcpy

; 988  :         m_lpWaveHdrCurrent->dwBytesRecorded += nCopyCount;

  00060	e595203c	 ldr         r2, [r5, #0x3C]
  00064	e5923008	 ldr         r3, [r2, #8]
  00068	e0833004	 add         r3, r3, r4
  0006c	e5823008	 str         r3, [r2, #8]
  00070		 |$LN8@RenderRawD|

; 989  : 
; 990  :         RETAILMSG(0, (L"RenderRawData:dwBytesRecorded = %d, m_lpCurrData=%d,"
; 991  :             L"m_dwByteCount = %d\r\n",
; 992  :             m_lpWaveHdrCurrent->dwBytesRecorded,
; 993  :             m_lpCurrData + nCopyCount,
; 994  :             m_dwByteCount +nCopyCount
; 995  :             ));
; 996  :         }
; 997  : 
; 998  :     // update pointer positions
; 999  :     pBufferLast = pBuffer + nCopyCount;
; 1000 : 
; 1001 :     // update member variables with number of bytes copied
; 1002 :     m_dwByteCount += nCopyCount;

  00070	e595304c	 ldr         r3, [r5, #0x4C]

; 1003 :     m_lpCurrData += nCopyCount;

  00074	e5952044	 ldr         r2, [r5, #0x44]

; 1004 :     m_CurrT = 0x200;

  00078	e3a01c02	 mov         r1, #2, 24
  0007c	e0833004	 add         r3, r3, r4
  00080	e0822004	 add         r2, r2, r4
  00084	e585304c	 str         r3, [r5, #0x4C]
  00088	e5852044	 str         r2, [r5, #0x44]
  0008c	e5851090	 str         r1, [r5, #0x90]
  00090	e0840006	 add         r0, r4, r6

; 1005 : 
; 1006 :     return pBufferLast;
; 1007 : }

  00094	e8bd40f0	 ldmia       sp!, {r4 - r7, lr}
  00098	e12fff1e	 bx          lr
  0009c		 |$M34940|

			 ENDP  ; |?RenderRawData@WaveStreamContext@@QAAPAEPAE00@Z|, WaveStreamContext::RenderRawData

	EXPORT	|?Render@WaveStreamContext@@UAAPAEPAE00H@Z| ; WaveStreamContext::Render
	EXPORT	|??_C@_1GI@EBFCCJC@?$AAE?$AAX?$AAC?$AAE?$AAP?$AAT?$AAI?$AAO?$AAN?$AA?5?$AAI?$AAN?$AA?5?$AAI?$AAS?$AAT?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAs?$AAt?$AAr?$AAe?$AAa?$AAm?$AA?5?$AA0?$AAx?$AA?$CF?$AAx@| [ DATA ] ; `string'
	IMPORT	|NKDbgPrintfW|
	IMPORT	|__C_specific_handler|

  00000			 AREA	 |.pdata|, PDATA
|$T34976| DCD	|$LN31@Render|
	DCD	0xc0003c05

  00000			 AREA	 |.pdata|, PDATA
|$T34978| DCD	|$LN14@Render|
	DCD	0x40000602

  00000			 AREA	 |.xdata|, DATA
|$T34974| DCD	0x1
	DCD	|$LN18@Render|
	DCD	|$LN19@Render|
	DCD	|$LN14@Render|
	DCD	|$LN15@Render|

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GI@EBFCCJC@?$AAE?$AAX?$AAC?$AAE?$AAP?$AAT?$AAI?$AAO?$AAN?$AA?5?$AAI?$AAN?$AA?5?$AAI?$AAS?$AAT?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAs?$AAt?$AAr?$AAe?$AAa?$AAm?$AA?5?$AA0?$AAx?$AA?$CF?$AAx@| DCB "E"
	DCB	0x0, "X", 0x0, "C", 0x0, "E", 0x0, "P", 0x0, "T", 0x0, "I"
	DCB	0x0, "O", 0x0, "N", 0x0, " ", 0x0, "I", 0x0, "N", 0x0, " "
	DCB	0x0, "I", 0x0, "S", 0x0, "T", 0x0, " ", 0x0, "f", 0x0, "o"
	DCB	0x0, "r", 0x0, " ", 0x0, "s", 0x0, "t", 0x0, "r", 0x0, "e"
	DCB	0x0, "a", 0x0, "m", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "x", 0x0, ",", 0x0, " ", 0x0, "b", 0x0, "u", 0x0, "f"
	DCB	0x0, "f", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "x", 0x0, "!", 0x0, "!", 0x0, "!", 0x0, "!"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__C_specific_handler|
  00004	00000000	 DCD         |$T34974|

  00008		 |?Render@WaveStreamContext@@UAAPAEPAE00H@Z| PROC ; WaveStreamContext::Render

; 1021 : {

  00008		 |$LN31@Render|
  00008	e1a0c00d	 mov         r12, sp
  0000c	e92d000f	 stmdb       sp!, {r0 - r3}
  00010	e92d5bf0	 stmdb       sp!, {r4 - r9, r11, r12, lr}
  00014	e28db024	 add         r11, sp, #0x24
  00018	e24dd008	 sub         sp, sp, #8
  0001c		 |$LN29@Render|
  0001c	e1a09003	 mov         r9, r3
  00020	e58b900c	 str         r9, [r11, #0xC]
  00024	e1a07002	 mov         r7, r2
  00028	e58b7008	 str         r7, [r11, #8]
  0002c	e1a05001	 mov         r5, r1
  00030	e58b5004	 str         r5, [r11, #4]
  00034	e1a06000	 mov         r6, r0
  00038	e58b6000	 str         r6, [r11]

; 1022 :     if (!m_bRunning || !m_lpCurrData)

  0003c	e5961010	 ldr         r1, [r6, #0x10]
  00040	e3510000	 cmp         r1, #0
  00044	0a000027	 beq         |$LN9@Render|
  00048	e5961044	 ldr         r1, [r6, #0x44]
  0004c	e3510000	 cmp         r1, #0
  00050	0a000024	 beq         |$LN9@Render|
  00054	e59b8010	 ldr         r8, [r11, #0x10]
  00058		 |$LL6@Render|

; 1025 :     }
; 1026 : 
; 1027 :     while (pBuffer < pBufferEnd)

  00058	e1550007	 cmp         r5, r7
  0005c	2a000021	 bcs         |$LN9@Render|

; 1028 :     {
; 1029 :         while (m_lpCurrData>=m_lpCurrDataEnd)

  00060	ea000003	 b           |$LN28@Render|
  00064		 |$LL4@Render|

; 1030 :         {
; 1031 :             if (!GetNextBuffer())

  00064	e1a00006	 mov         r0, r6
  00068	eb000000	 bl          |?GetNextBuffer@StreamContext@@QAAPAEXZ|
  0006c	e3500000	 cmp         r0, #0
  00070	0a00001c	 beq         |$LN9@Render|
  00074		 |$LN28@Render|
  00074	e5963048	 ldr         r3, [r6, #0x48]
  00078	e5962044	 ldr         r2, [r6, #0x44]
  0007c	e1520003	 cmp         r2, r3
  00080	2afffff7	 bcs         |$LL4@Render|
  00084		 |$LN18@Render|

; 1032 :             {
; 1033 :                 return pBuffer;
; 1034 :             }
; 1035 :         }
; 1036 : 
; 1037 :         _try
; 1038 :         {
; 1039 :             pBuffer = Render2(pBuffer, pBufferEnd, pBufferLast, bDSPRender);

  00084	e5961000	 ldr         r1, [r6]
  00088	e1a03009	 mov         r3, r9
  0008c	e1a02007	 mov         r2, r7
  00090	e5914044	 ldr         r4, [r1, #0x44]
  00094	e1a01005	 mov         r1, r5
  00098	e1a00006	 mov         r0, r6
  0009c	e58d8000	 str         r8, [sp]
  000a0	e1a0e00f	 mov         lr, pc
  000a4	e12fff14	 bx          r4
  000a8	e1a05000	 mov         r5, r0
  000ac	e58b5004	 str         r5, [r11, #4]
  000b0		 |$LN19@Render|

; 1040 :         }

  000b0	eaffffe8	 b           |$LL6@Render|
  000b4		 |$LN15@Render|

; 1042 :         {
; 1043 :             RETAILMSG(1, (TEXT("EXCEPTION IN IST for stream 0x%x, buffer 0x%x!!!!\r\n"), this, m_lpCurrData));

  000b4	e59b6000	 ldr         r6, [r11]
  000b8	e59f004c	 ldr         r0, [pc, #0x4C]
  000bc	e5962044	 ldr         r2, [r6, #0x44]
  000c0	e1a01006	 mov         r1, r6
  000c4	eb000000	 bl          NKDbgPrintfW

; 1044 :             m_lpCurrData=m_lpCurrDataEnd; // Pretend we finished reading the application buffer

  000c8	e5963048	 ldr         r3, [r6, #0x48]
  000cc	e5863044	 str         r3, [r6, #0x44]
  000d0	e59b8010	 ldr         r8, [r11, #0x10]
  000d4	e59b900c	 ldr         r9, [r11, #0xC]
  000d8	e59b7008	 ldr         r7, [r11, #8]
  000dc	e59b5004	 ldr         r5, [r11, #4]
  000e0	eaffffdc	 b           |$LL6@Render|
  000e4		 |$LN26@Render|

; 1023 :     {
; 1024 :         return pBuffer;

  000e4	e51b5028	 ldr         r5, [r11, #-0x28]
  000e8		 |$LN9@Render|

; 1045 :         }
; 1046 :     }
; 1047 : 
; 1048 :     return pBuffer;
; 1049 : }

  000e8	e1a00005	 mov         r0, r5
  000ec	e24bd024	 sub         sp, r11, #0x24
  000f0	e89d6bf0	 ldmia       sp, {r4 - r9, r11, sp, lr}
  000f4	e12fff1e	 bx          lr

			 ENDP  ; |?Render@WaveStreamContext@@UAAPAEPAE00H@Z|, WaveStreamContext::Render

  000f8		 |$LN14@Render|
  000f8		 |$LN30@Render|

; 1041 :         _except (EXCEPTION_EXECUTE_HANDLER)

  000f8	e52de004	 str         lr, [sp, #-4]!
  000fc	e24dd004	 sub         sp, sp, #4
  00100		 |$LN17@Render|
  00100		 |$LN33@Render|
  00100	e3a00001	 mov         r0, #1
  00104		 |$LN16@Render|
  00104	e28dd004	 add         sp, sp, #4
  00108	e49df004	 ldr         pc, [sp], #4
  0010c		 |$LN35@Render|
  0010c		 |$LN36@Render|
  0010c	00000000	 DCD         |??_C@_1GI@EBFCCJC@?$AAE?$AAX?$AAC?$AAE?$AAP?$AAT?$AAI?$AAO?$AAN?$AA?5?$AAI?$AAN?$AA?5?$AAI?$AAS?$AAT?$AA?5?$AAf?$AAo?$AAr?$AA?5?$AAs?$AAt?$AAr?$AAe?$AAa?$AAm?$AA?5?$AA0?$AAx?$AA?$CF?$AAx@|
  00110		 |$LN34@Render|
  00110		 |$LN32@Render|
	END
