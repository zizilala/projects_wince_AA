; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\CAMERA\DLL\main.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|GetCurrentProcess|
; File c:\wince600\public\common\sdk\inc\kfuncs.h

  00000			 AREA	 |.pdata|, PDATA
|$T34094| DCD	|$LN5@GetCurrent|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |GetCurrentProcess| PROC

; 361  : _inline HANDLE GetCurrentProcess(void) {

  00000		 |$LN5@GetCurrent|
  00000		 |$M34091|

; 362  : 	return ((HANDLE)(SH_CURPROC+SYS_HANDLE_BASE));

  00000	e3a00042	 mov         r0, #0x42

; 363  : }

  00004	e12fff1e	 bx          lr
  00008		 |$M34092|

			 ENDP  ; |GetCurrentProcess|

	EXPORT	|GetCurrentProcessId|
	IMPORT	|__GetUserKData|

  00000			 AREA	 |.pdata|, PDATA
|$T34103| DCD	|$LN5@GetCurrent@2|
	DCD	0x40000501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |GetCurrentProcessId| PROC

; 373  : _inline DWORD GetCurrentProcessId(void) {

  00000		 |$LN5@GetCurrent@2|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M34100|

; 374  :     return __GetUserKData (SYSHANDLE_OFFSET + (SH_CURPROC * sizeof(HANDLE)));

  00004	e3a0000c	 mov         r0, #0xC
  00008	eb000000	 bl          __GetUserKData

; 375  : }

  0000c	e49de004	 ldr         lr, [sp], #4
  00010	e12fff1e	 bx          lr
  00014		 |$M34101|

			 ENDP  ; |GetCurrentProcessId|

	EXPORT	|DllMain|
	EXPORT	|??_C@_1HO@LMJLIJKE@?$AA?$CK?$AA?$CK?$AA?$CK?$AA?5?$AAD?$AAL?$AAL?$AA_?$AAP?$AAR?$AAO?$AAC?$AAE?$AAS?$AAS?$AA_?$AAD?$AAE?$AAT?$AAA?$AAC?$AAH?$AA?5?$AA?9?$AA?5?$AAC?$AAu?$AAr?$AAr?$AAe?$AAn?$AAt@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HO@FJPAGEDH@?$AA?$CK?$AA?$CK?$AA?$CK?$AA?5?$AAD?$AAL?$AAL?$AA_?$AAP?$AAR?$AAO?$AAC?$AAE?$AAS?$AAS?$AA_?$AAA?$AAT?$AAT?$AAA?$AAC?$AAH?$AA?5?$AA?9?$AA?5?$AAC?$AAu?$AAr?$AAr?$AAe?$AAn?$AAt@| [ DATA ] ; `string'
	IMPORT	|DisableThreadLibraryCalls|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|dpCurSettings|

  00000			 AREA	 |.pdata|, PDATA
|$T34130| DCD	|$LN24@DllMain|
	DCD	0x40002301

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HO@LMJLIJKE@?$AA?$CK?$AA?$CK?$AA?$CK?$AA?5?$AAD?$AAL?$AAL?$AA_?$AAP?$AAR?$AAO?$AAC?$AAE?$AAS?$AAS?$AA_?$AAD?$AAE?$AAT?$AAA?$AAC?$AAH?$AA?5?$AA?9?$AA?5?$AAC?$AAu?$AAr?$AAr?$AAe?$AAn?$AAt@| DCB "*"
	DCB	0x0, "*", 0x0, "*", 0x0, " ", 0x0, "D", 0x0, "L", 0x0, "L"
	DCB	0x0, "_", 0x0, "P", 0x0, "R", 0x0, "O", 0x0, "C", 0x0, "E"
	DCB	0x0, "S", 0x0, "S", 0x0, "_", 0x0, "D", 0x0, "E", 0x0, "T"
	DCB	0x0, "A", 0x0, "C", 0x0, "H", 0x0, " ", 0x0, "-", 0x0, " "
	DCB	0x0, "C", 0x0, "u", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "n"
	DCB	0x0, "t", 0x0, " ", 0x0, "P", 0x0, "r", 0x0, "o", 0x0, "c"
	DCB	0x0, "e", 0x0, "s", 0x0, "s", 0x0, ":", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "I"
	DCB	0x0, "D", 0x0, ":", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "x", 0x0, " ", 0x0, "*", 0x0, "*", 0x0, "*", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HO@FJPAGEDH@?$AA?$CK?$AA?$CK?$AA?$CK?$AA?5?$AAD?$AAL?$AAL?$AA_?$AAP?$AAR?$AAO?$AAC?$AAE?$AAS?$AAS?$AA_?$AAA?$AAT?$AAT?$AAA?$AAC?$AAH?$AA?5?$AA?9?$AA?5?$AAC?$AAu?$AAr?$AAr?$AAe?$AAn?$AAt@| DCB "*"
	DCB	0x0, "*", 0x0, "*", 0x0, " ", 0x0, "D", 0x0, "L", 0x0, "L"
	DCB	0x0, "_", 0x0, "P", 0x0, "R", 0x0, "O", 0x0, "C", 0x0, "E"
	DCB	0x0, "S", 0x0, "S", 0x0, "_", 0x0, "A", 0x0, "T", 0x0, "T"
	DCB	0x0, "A", 0x0, "C", 0x0, "H", 0x0, " ", 0x0, "-", 0x0, " "
	DCB	0x0, "C", 0x0, "u", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "n"
	DCB	0x0, "t", 0x0, " ", 0x0, "P", 0x0, "r", 0x0, "o", 0x0, "c"
	DCB	0x0, "e", 0x0, "s", 0x0, "s", 0x0, ":", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "I"
	DCB	0x0, "D", 0x0, ":", 0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "x", 0x0, " ", 0x0, "*", 0x0, "*", 0x0, "*", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Ogspy
; File c:\wince600\platform\evm_omap3530\src\drivers\camera\dll\main.cpp

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DllMain| PROC

; 37   : {

  00000		 |$LN24@DllMain|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M34127|
  00004	e3510000	 cmp         r1, #0
  00008	e1a04000	 mov         r4, r0

; 38   :     BOOL bRc = TRUE;
; 39   :     
; 40   :     UNREFERENCED_PARAMETER( lpReserved );
; 41   :     
; 42   :     switch ( dwReason )

  0000c	0a00000e	 beq         |$LN4@DllMain|
  00010	e3510001	 cmp         r1, #1
  00014	1a000016	 bne         |$LN12@DllMain|

; 43   :     {
; 44   :         case DLL_PROCESS_ATTACH: 
; 45   :         {
; 46   :            DEBUGREGISTER( reinterpret_cast<HMODULE>( hDllHandle ) );
; 47   :            DEBUGMSG( ZONE_INIT, ( _T("*** DLL_PROCESS_ATTACH - Current Process: 0x%x, ID: 0x%x ***\r\n"), GetCurrentProcess(), GetCurrentProcessId() ) );

  00018	e59f3064	 ldr         r3, [pc, #0x64]
  0001c	e5933440	 ldr         r3, [r3, #0x440]
  00020	e3130004	 tst         r3, #4
  00024	0a000005	 beq         |$LN10@DllMain|
  00028	e3a0000c	 mov         r0, #0xC
  0002c	eb000000	 bl          __GetUserKData
  00030	e1a02000	 mov         r2, r0
  00034	e59f004c	 ldr         r0, [pc, #0x4C]
  00038	e3a01042	 mov         r1, #0x42
  0003c	eb000000	 bl          NKDbgPrintfW
  00040		 |$LN10@DllMain|

; 48   : 
; 49   :            DisableThreadLibraryCalls( reinterpret_cast<HMODULE>( hDllHandle ) );

  00040	e1a00004	 mov         r0, r4
  00044	eb000000	 bl          DisableThreadLibraryCalls

; 50   : 
; 51   :            break;

  00048	ea000009	 b           |$LN12@DllMain|
  0004c		 |$LN4@DllMain|

; 52   :         } 
; 53   : 
; 54   :         case DLL_PROCESS_DETACH: 
; 55   :         {
; 56   :             DEBUGMSG( ZONE_INIT, ( _T("*** DLL_PROCESS_DETACH - Current Process: 0x%x, ID: 0x%x ***\r\n"), GetCurrentProcess(), GetCurrentProcessId() ) );

  0004c	e59f3030	 ldr         r3, [pc, #0x30]
  00050	e5933440	 ldr         r3, [r3, #0x440]
  00054	e3130004	 tst         r3, #4
  00058	0a000005	 beq         |$LN12@DllMain|
  0005c	e3a0000c	 mov         r0, #0xC
  00060	eb000000	 bl          __GetUserKData
  00064	e1a02000	 mov         r2, r0
  00068	e59f0010	 ldr         r0, [pc, #0x10]
  0006c	e3a01042	 mov         r1, #0x42
  00070	eb000000	 bl          NKDbgPrintfW
  00074		 |$LN12@DllMain|

; 57   : 
; 58   :             break;
; 59   :         } 
; 60   :             
; 61   :         case DLL_THREAD_DETACH:
; 62   :         {
; 63   :             break;
; 64   :         }
; 65   :             
; 66   :         case DLL_THREAD_ATTACH:
; 67   :         {
; 68   :             break;
; 69   :         }
; 70   :             
; 71   :         default:
; 72   :         {
; 73   :             break;
; 74   :         }
; 75   :     }
; 76   :     
; 77   :     return bRc;

  00074	e3a00001	 mov         r0, #1

; 78   : }

  00078	e8bd4010	 ldmia       sp!, {r4, lr}
  0007c	e12fff1e	 bx          lr
  00080		 |$LN25@DllMain|
  00080		 |$LN26@DllMain|
  00080	00000000	 DCD         |??_C@_1HO@LMJLIJKE@?$AA?$CK?$AA?$CK?$AA?$CK?$AA?5?$AAD?$AAL?$AAL?$AA_?$AAP?$AAR?$AAO?$AAC?$AAE?$AAS?$AAS?$AA_?$AAD?$AAE?$AAT?$AAA?$AAC?$AAH?$AA?5?$AA?9?$AA?5?$AAC?$AAu?$AAr?$AAr?$AAe?$AAn?$AAt@|
  00084		 |$LN27@DllMain|
  00084	00000000	 DCD         |dpCurSettings|
  00088		 |$LN28@DllMain|
  00088	00000000	 DCD         |??_C@_1HO@FJPAGEDH@?$AA?$CK?$AA?$CK?$AA?$CK?$AA?5?$AAD?$AAL?$AAL?$AA_?$AAP?$AAR?$AAO?$AAC?$AAE?$AAS?$AAS?$AA_?$AAA?$AAT?$AAT?$AAA?$AAC?$AAH?$AA?5?$AA?9?$AA?5?$AAC?$AAu?$AAr?$AAr?$AAe?$AAn?$AAt@|
  0008c		 |$M34128|

			 ENDP  ; |DllMain|

	END
