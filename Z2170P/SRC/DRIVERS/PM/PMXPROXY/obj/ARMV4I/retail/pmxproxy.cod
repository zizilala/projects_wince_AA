; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\Z2170P\SRC\DRIVERS\PM\PMXPROXY\pmxproxy.cpp
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "

	EXPORT	|dpCurSettings| [ DATA ]

  00000			 AREA	 |.data|, DATA
|dpCurSettings| DCB "P", 0x0, "m", 0x0, "x", 0x0, "P", 0x0, "r", 0x0, "o", 0x0
	DCB	"x", 0x0, "y", 0x0, "D", 0x0, "r", 0x0, "i", 0x0, "v", 0x0
	DCB	"e", 0x0, "r", 0x0, 0x0, 0x0
	%	34
	DCB	"E", 0x0, "r", 0x0, "r", 0x0, "o", 0x0, "r", 0x0, "s", 0x0
	DCB	0x0, 0x0
	%	50
	DCB	"W", 0x0, "a", 0x0, "r", 0x0, "n", 0x0, "i", 0x0, "n", 0x0
	DCB	"g", 0x0, "s", 0x0, 0x0, 0x0
	%	46
	DCB	"F", 0x0, "u", 0x0, "n", 0x0, "c", 0x0, "t", 0x0, "i", 0x0
	DCB	"o", 0x0, "n", 0x0, 0x0, 0x0
	%	46
	DCB	"I", 0x0, "n", 0x0, "f", 0x0, "o", 0x0, 0x0, 0x0
	%	54
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCB	"U", 0x0, "n", 0x0, "d", 0x0, "e", 0x0, "f", 0x0, "i", 0x0
	DCB	"n", 0x0, "e", 0x0, "d", 0x0, 0x0, 0x0
	%	44
	DCD	0xb
	EXPORT	|?MarshalDataPointerHelper@@YAPAXPAXKK@Z| ; MarshalDataPointerHelper
	IMPORT	|CeOpenCallerBuffer|
; File c:\wince600\platform\z2170p\src\drivers\pm\pmxproxy\pmxproxy.cpp

  00000			 AREA	 |.pdata|, PDATA
|$T36843| DCD	|$LN6@MarshalDat|
	DCD	0x40000f02
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?MarshalDataPointerHelper@@YAPAXPAXKK@Z| PROC ; MarshalDataPointerHelper

; 85   : {

  00000		 |$LN6@MarshalDat|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004	e24dd008	 sub         sp, sp, #8
  00008		 |$M36840|
  00008	e1a03002	 mov         r3, r2
  0000c	e1a02001	 mov         r2, r1
  00010	e1a01000	 mov         r1, r0

; 86   :     HRESULT hr;
; 87   :     void* pDestMarshalled;
; 88   : 
; 89   :     hr = CeOpenCallerBuffer(&pDestMarshalled, pSrcUnmarshalled, cbSrc, desc, FALSE);

  00014	e3a00000	 mov         r0, #0
  00018	e58d0000	 str         r0, [sp]
  0001c	e28d0004	 add         r0, sp, #4
  00020	eb000000	 bl          CeOpenCallerBuffer
  00024	e3500000	 cmp         r0, #0

; 90   :     if (FAILED(hr))
; 91   :         return NULL;

  00028	43a00000	 movmi       r0, #0

; 92   : 
; 93   :     return pDestMarshalled;

  0002c	559d0004	 ldrpl       r0, [sp, #4]

; 94   : }

  00030	e28dd008	 add         sp, sp, #8
  00034	e49de004	 ldr         lr, [sp], #4
  00038	e12fff1e	 bx          lr
  0003c		 |$M36841|

			 ENDP  ; |?MarshalDataPointerHelper@@YAPAXPAXKK@Z|, MarshalDataPointerHelper

	EXPORT	|?PMX_Init@@YAKPBGPBX@Z|		; PMX_Init

  00000			 AREA	 |.pdata|, PDATA
|$T36852| DCD	|$LN5@PMX_Init|
	DCD	0x40000300
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?PMX_Init@@YAKPBGPBX@Z| PROC		; PMX_Init

; 130  : {

  00000		 |$LN5@PMX_Init|
  00000		 |$M36849|

; 131  :     UNREFERENCED_PARAMETER(szContext);
; 132  :     UNREFERENCED_PARAMETER(pBusContext);
; 133  :     return PMX_DEVICE_COOKIE;

  00000	e59f0000	 ldr         r0, [pc]

; 134  : }

  00004	e12fff1e	 bx          lr
  00008		 |$LN6@PMX_Init|
  00008		 |$LN7@PMX_Init|
  00008	706d7879	 DCD         0x706d7879
  0000c		 |$M36850|

			 ENDP  ; |?PMX_Init@@YAKPBGPBX@Z|, PMX_Init

	EXPORT	|?PMX_Deinit@@YAHK@Z|			; PMX_Deinit

  00000			 AREA	 |.pdata|, PDATA
|$T36866| DCD	|$LN7@PMX_Deinit|
	DCD	0x40000600
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?PMX_Deinit@@YAHK@Z| PROC		; PMX_Deinit

; 146  : {

  00000		 |$LN7@PMX_Deinit|
  00000		 |$M36863|

; 147  :     return PMX_DEVICE_COOKIE == context;

  00000	e59f300c	 ldr         r3, [pc, #0xC]
  00004	e1500003	 cmp         r0, r3
  00008	03a00001	 moveq       r0, #1
  0000c	13a00000	 movne       r0, #0

; 148  : }

  00010	e12fff1e	 bx          lr
  00014		 |$LN8@PMX_Deinit|
  00014		 |$LN9@PMX_Deinit|
  00014	706d7879	 DCD         0x706d7879
  00018		 |$M36864|

			 ENDP  ; |?PMX_Deinit@@YAHK@Z|, PMX_Deinit

	EXPORT	|?PMX_Open@@YAKKKK@Z|			; PMX_Open
	EXPORT	|??_C@_1FE@EIHDIJIG@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HE@CBILKLCK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EI@NKBIAEGK@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| [ DATA ] ; `string'
	IMPORT	|LocalAlloc|
	IMPORT	|NKDbgPrintfW|

  00000			 AREA	 |.pdata|, PDATA
|$T36888| DCD	|$LN13@PMX_Open|
	DCD	0x40002e02

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FE@EIHDIJIG@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "-"
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "O", 0x0, "p"
	DCB	0x0, "e", 0x0, "n", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ","
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ")", 0x0, " ", 0x0, "=", 0x0, "=", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HE@CBILKLCK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "O", 0x0, "p"
	DCB	0x0, "e", 0x0, "n", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "a"
	DCB	0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, " ", 0x0, "a"
	DCB	0x0, "l", 0x0, "l", 0x0, "o", 0x0, "c", 0x0, "a", 0x0, "t"
	DCB	0x0, "e", 0x0, " ", 0x0, "P", 0x0, "r", 0x0, "o", 0x0, "x"
	DCB	0x0, "y", 0x0, " ", 0x0, "d", 0x0, "r", 0x0, "i", 0x0, "v"
	DCB	0x0, "e", 0x0, "r", 0x0, " ", 0x0, "s", 0x0, "t", 0x0, "r"
	DCB	0x0, "u", 0x0, "c", 0x0, "t", 0x0, "u", 0x0, "r", 0x0, "e"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EI@NKBIAEGK@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@| DCB "+"
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "O", 0x0, "p"
	DCB	0x0, "e", 0x0, "n", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%"
	DCB	0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "0"
	DCB	0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ","
	DCB	0x0, " ", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8"
	DCB	0x0, "x", 0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?PMX_Open@@YAKKKK@Z| PROC		; PMX_Open

; 162  : {

  00000		 |$LN13@PMX_Open|
  00000	e92d41f0	 stmdb       sp!, {r4 - r8, lr}
  00004	e24dd004	 sub         sp, sp, #4
  00008		 |$M36885|
  00008	e1a05002	 mov         r5, r2
  0000c	e1a06001	 mov         r6, r1
  00010	e1a07000	 mov         r7, r0

; 163  :     DWORD dw = 0;
; 164  :     Instance_t *pInstance;
; 165  : 
; 166  : 	UNREFERENCED_PARAMETER(context);
; 167  : 	UNREFERENCED_PARAMETER(accessCode);
; 168  : 	UNREFERENCED_PARAMETER(shareMode);
; 169  : 
; 170  :     RETAILMSG(ZONE_FUNCTION, (L"+PMX_Open(0x%08x, 0x%08x, 0x%08x)\r\n",
; 171  :         context, accessCode, shareMode
; 172  :         ));

  00014	e59f8098	 ldr         r8, [pc, #0x98]
  00018	e3a04000	 mov         r4, #0
  0001c	e5983440	 ldr         r3, [r8, #0x440]
  00020	e3130004	 tst         r3, #4
  00024	159f0084	 ldrne       r0, [pc, #0x84]
  00028	11a03005	 movne       r3, r5
  0002c	11a02006	 movne       r2, r6
  00030	11a01007	 movne       r1, r7
  00034	1b000000	 blne        NKDbgPrintfW

; 173  : 
; 174  :     // Create device structure
; 175  :     pInstance = (Instance_t *)LocalAlloc(LPTR, sizeof(Instance_t));

  00038	e3a0100c	 mov         r1, #0xC
  0003c	e3a00040	 mov         r0, #0x40
  00040	eb000000	 bl          LocalAlloc
  00044	e3500000	 cmp         r0, #0

; 176  :     if (pInstance == NULL)

  00048	1a000002	 bne         |$LN2@PMX_Open|

; 177  :         {
; 178  :         RETAILMSG(ZONE_ERROR, (L"ERROR: PMX_Open: "
; 179  :             L"Failed allocate Proxy driver structure\r\n"
; 180  :             ));

  0004c	e59f0058	 ldr         r0, [pc, #0x58]
  00050	eb000000	 bl          NKDbgPrintfW

; 181  : 
; 182  :         goto cleanUp;

  00054	ea000006	 b           |$cleanUp$36683|
  00058		 |$LN2@PMX_Open|

; 183  :         }
; 184  : 
; 185  :     memset(pInstance, 0, sizeof(Instance_t));
; 186  : 
; 187  :     // Set cookie
; 188  :     pInstance->cookie = PMX_DEVICE_COOKIE;

  00058	e59f3048	 ldr         r3, [pc, #0x48]
  0005c	e3a02000	 mov         r2, #0
  00060	e5802000	 str         r2, [r0]
  00064	e5802004	 str         r2, [r0, #4]
  00068	e5802008	 str         r2, [r0, #8]
  0006c	e5803000	 str         r3, [r0]

; 189  : 
; 190  :     // Return non-null value
; 191  :     dw = (DWORD)pInstance;

  00070	e1a04000	 mov         r4, r0
  00074		 |$cleanUp$36683|

; 192  : 
; 193  : cleanUp:
; 194  :     RETAILMSG(ZONE_FUNCTION, (L"-PMX_Open(0x%08x, 0x%08x, 0x%08x) == %d\r\n",
; 195  :         context, accessCode, shareMode, dw
; 196  :         ));

  00074	e5983440	 ldr         r3, [r8, #0x440]
  00078	e3130004	 tst         r3, #4
  0007c	159f0020	 ldrne       r0, [pc, #0x20]
  00080	11a03005	 movne       r3, r5
  00084	11a02006	 movne       r2, r6
  00088	11a01007	 movne       r1, r7
  0008c	158d4000	 strne       r4, [sp]
  00090	1b000000	 blne        NKDbgPrintfW

; 197  : 
; 198  :     return dw;
; 199  : }

  00094	e1a00004	 mov         r0, r4
  00098	e28dd004	 add         sp, sp, #4
  0009c	e8bd41f0	 ldmia       sp!, {r4 - r8, lr}
  000a0	e12fff1e	 bx          lr
  000a4		 |$LN14@PMX_Open|
  000a4		 |$LN15@PMX_Open|
  000a4	00000000	 DCD         |??_C@_1FE@EIHDIJIG@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  000a8		 |$LN16@PMX_Open|
  000a8	706d7879	 DCD         0x706d7879
  000ac		 |$LN17@PMX_Open|
  000ac	00000000	 DCD         |??_C@_1HE@CBILKLCK@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?3?$AA?5?$AAF?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?5?$AAa?$AAl?$AAl?$AAo?$AAc?$AAa?$AAt?$AAe@|
  000b0		 |$LN18@PMX_Open|
  000b0	00000000	 DCD         |??_C@_1EI@NKBIAEGK@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAO?$AAp?$AAe?$AAn?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx@|
  000b4		 |$LN19@PMX_Open|
  000b4	00000000	 DCD         |dpCurSettings|
  000b8		 |$M36886|

			 ENDP  ; |?PMX_Open@@YAKKKK@Z|, PMX_Open

	EXPORT	|?PMX_Close@@YAHK@Z|			; PMX_Close
	EXPORT	|??_C@_1CK@MKCKNGEE@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GO@EILJHIPE@?$AAT?$AAL?$AAD?$AA?3?$AA?5?$AA?$CB?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?$CI?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CK@LKFNMAKC@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|LocalFree|
	IMPORT	|PmxClosePolicy|
	IMPORT	|PmxReleaseConstraint|

  00000			 AREA	 |.pdata|, PDATA
|$T36911| DCD	|$LN15@PMX_Close|
	DCD	0x40002501

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@MKCKNGEE@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "C", 0x0, "l"
	DCB	0x0, "o", 0x0, "s", 0x0, "e", 0x0, "(", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GO@EILJHIPE@?$AAT?$AAL?$AAD?$AA?3?$AA?5?$AA?$CB?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?$CI?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe@| DCB "T"
	DCB	0x0, "L", 0x0, "D", 0x0, ":", 0x0, " ", 0x0, "!", 0x0, "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, "(", 0x0, "P"
	DCB	0x0, "M", 0x0, "X", 0x0, "_", 0x0, "C", 0x0, "l", 0x0, "o"
	DCB	0x0, "s", 0x0, "e", 0x0, ")", 0x0, " ", 0x0, "-", 0x0, " "
	DCB	0x0, "I", 0x0, "n", 0x0, "c", 0x0, "o", 0x0, "r", 0x0, "r"
	DCB	0x0, "e", 0x0, "c", 0x0, "t", 0x0, " ", 0x0, "c", 0x0, "o"
	DCB	0x0, "n", 0x0, "t", 0x0, "e", 0x0, "x", 0x0, "t", 0x0, " "
	DCB	0x0, "p", 0x0, "a", 0x0, "r", 0x0, "a", 0x0, "m", 0x0, "e"
	DCB	0x0, "t", 0x0, "e", 0x0, "r", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@LKFNMAKC@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "+"
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "C", 0x0, "l"
	DCB	0x0, "o", 0x0, "s", 0x0, "e", 0x0, "(", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?PMX_Close@@YAHK@Z| PROC		; PMX_Close

; 211  : {

  00000		 |$LN15@PMX_Close|
  00000	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  00004		 |$M36908|
  00004	e1a04000	 mov         r4, r0

; 212  :     BOOL rc = FALSE;
; 213  :     Instance_t *pInstance = (Instance_t*)context;
; 214  : 
; 215  :     RETAILMSG(ZONE_FUNCTION, (L"+PMX_Close(0x%08x)\r\n",
; 216  :         context
; 217  :         ));

  00008	e59f6080	 ldr         r6, [pc, #0x80]
  0000c	e3a05000	 mov         r5, #0
  00010	e5963440	 ldr         r3, [r6, #0x440]
  00014	e3130004	 tst         r3, #4
  00018	159f006c	 ldrne       r0, [pc, #0x6C]
  0001c	11a01004	 movne       r1, r4
  00020	1b000000	 blne        NKDbgPrintfW

; 218  : 
; 219  :     if ((pInstance == NULL))

  00024	e3540000	 cmp         r4, #0
  00028	1a000002	 bne         |$LN4@PMX_Close|

; 220  :         {
; 221  :         RETAILMSG (ZONE_ERROR, (L"TLD: !ERROR(PMX_Close) - "
; 222  :             L"Incorrect context parameter\r\n"
; 223  :             ));

  0002c	e59f0054	 ldr         r0, [pc, #0x54]
  00030	eb000000	 bl          NKDbgPrintfW

; 224  :         goto cleanUp;

  00034	ea00000a	 b           |$cleanUp$36697|
  00038		 |$LN4@PMX_Close|

; 225  :         }
; 226  : 
; 227  :     // close constraint handles
; 228  :     if (pInstance->hPmxConstraint != NULL)

  00038	e5943004	 ldr         r3, [r4, #4]
  0003c	e3530000	 cmp         r3, #0

; 229  :         {
; 230  :         PmxReleaseConstraint(pInstance->hPmxConstraint);

  00040	11a00003	 movne       r0, r3
  00044	1b000000	 blne        PmxReleaseConstraint

; 231  :         }
; 232  : 
; 233  :     if (pInstance->hPmxPolicy != NULL)

  00048	e5943008	 ldr         r3, [r4, #8]
  0004c	e3530000	 cmp         r3, #0

; 234  :         {
; 235  :         PmxClosePolicy(pInstance->hPmxPolicy);

  00050	11a00003	 movne       r0, r3
  00054	1b000000	 blne        PmxClosePolicy

; 236  :         }
; 237  : 
; 238  :     // Free device structure
; 239  :     LocalFree(pInstance);

  00058	e1a00004	 mov         r0, r4
  0005c	eb000000	 bl          LocalFree

; 240  : 
; 241  :     // Done
; 242  :     rc = TRUE;

  00060	e3a05001	 mov         r5, #1
  00064		 |$cleanUp$36697|

; 243  : 
; 244  : cleanUp:
; 245  :     RETAILMSG(ZONE_FUNCTION, (L"-PMX_Close(0x%08x)\r\n",
; 246  :         context
; 247  :         ));

  00064	e5963440	 ldr         r3, [r6, #0x440]
  00068	e3130004	 tst         r3, #4
  0006c	159f0010	 ldrne       r0, [pc, #0x10]
  00070	11a01004	 movne       r1, r4
  00074	1b000000	 blne        NKDbgPrintfW

; 248  : 
; 249  :     return rc;
; 250  : }

  00078	e1a00005	 mov         r0, r5
  0007c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00080	e12fff1e	 bx          lr
  00084		 |$LN16@PMX_Close|
  00084		 |$LN17@PMX_Close|
  00084	00000000	 DCD         |??_C@_1CK@MKCKNGEE@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00088		 |$LN18@PMX_Close|
  00088	00000000	 DCD         |??_C@_1GO@EILJHIPE@?$AAT?$AAL?$AAD?$AA?3?$AA?5?$AA?$CB?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?$CI?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CJ?$AA?5?$AA?9?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe@|
  0008c		 |$LN19@PMX_Close|
  0008c	00000000	 DCD         |??_C@_1CK@LKFNMAKC@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAC?$AAl?$AAo?$AAs?$AAe?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00090		 |$LN20@PMX_Close|
  00090	00000000	 DCD         |dpCurSettings|
  00094		 |$M36909|

			 ENDP  ; |?PMX_Close@@YAHK@Z|, PMX_Close

	EXPORT	|?PMX_IOControl@@YAHKKPAXK0KPAK@Z|	; PMX_IOControl
	EXPORT	|??_C@_1DE@LFMFHMDF@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1GI@MNPCBNEO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IC@JKHIBKFA@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0@| [ DATA ] ; `string'
	IMPORT	|PmxSetConstraintById|
	IMPORT	|PmxUpdateConstraint|
	IMPORT	|PmxLoadConstraint|
	IMPORT	|PmxLoadPolicy|
	IMPORT	|PmxOpenPolicy|
	IMPORT	|CeCloseCallerBuffer|
	IMPORT	|PmxNotifyPolicy|

  00000			 AREA	 |.pdata|, PDATA
|$T36998| DCD	|$LN63@PMX_IOCont|
	DCD	0x4000d902

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DE@LFMFHMDF@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@| DCB "-"
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, "(", 0x0, "r", 0x0, "c", 0x0, " ", 0x0, "="
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd, 0x0, 0xa
	DCB	0x0, 0x0, 0x0				; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1GI@MNPCBNEO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, ":", 0x0, " ", 0x0, "I", 0x0, "n", 0x0, "c"
	DCB	0x0, "o", 0x0, "r", 0x0, "r", 0x0, "e", 0x0, "c", 0x0, "t"
	DCB	0x0, " ", 0x0, "c", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "e"
	DCB	0x0, "x", 0x0, "t", 0x0, " ", 0x0, "p", 0x0, "a", 0x0, "r"
	DCB	0x0, "a", 0x0, "m", 0x0, "e", 0x0, "t", 0x0, "e", 0x0, "r"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IC@JKHIBKFA@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0@| DCB "+"
	DCB	0x0, "P", 0x0, "M", 0x0, "X", 0x0, "_", 0x0, "I", 0x0, "O"
	DCB	0x0, "C", 0x0, "o", 0x0, "n", 0x0, "t", 0x0, "r", 0x0, "o"
	DCB	0x0, "l", 0x0, "(", 0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0"
	DCB	0x0, "8", 0x0, "x", 0x0, ",", 0x0, " ", 0x0, "0", 0x0, "x"
	DCB	0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x", 0x0, ",", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ",", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ",", 0x0, " "
	DCB	0x0, "0", 0x0, "x", 0x0, "%", 0x0, "0", 0x0, "8", 0x0, "x"
	DCB	0x0, ")", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |?PMX_IOControl@@YAHKKPAXK0KPAK@Z| PROC ; PMX_IOControl

; 265  : {

  00000		 |$LN63@PMX_IOCont|
  00000	e92d4ff0	 stmdb       sp!, {r4 - r11, lr}
  00004	e24dd018	 sub         sp, sp, #0x18
  00008		 |$M36995|
  00008	e1a0a003	 mov         r10, r3
  0000c	e1a07002	 mov         r7, r2
  00010	e1a09001	 mov         r9, r1
  00014	e1a08000	 mov         r8, r0

; 266  :     BOOL rc = FALSE;
; 267  :     Instance_t *pInstance = (Instance_t*)context;
; 268  :     IOCTL_PMX_PARAMETERS  tempPmxInfo;
; 269  :     IOCTL_PMX_PARAMETERS *pPmxInfo;
; 270  : 
; 271  : 	UNREFERENCED_PARAMETER(inSize);
; 272  : 	UNREFERENCED_PARAMETER(pOutBuffer);
; 273  : 	UNREFERENCED_PARAMETER(outSize);
; 274  : 	UNREFERENCED_PARAMETER(pOutSize);
; 275  : 
; 276  :     RETAILMSG(ZONE_FUNCTION, (
; 277  :         L"+PMX_IOControl(0x%08x, 0x%08x, 0x%08x, %d, 0x%08x, %d, 0x%08x)\r\n",
; 278  :         context, code, pInBuffer, inSize, pOutBuffer, outSize, pOutSize
; 279  :         ));

  00018	e59fb340	 ldr         r11, [pc, #0x340]
  0001c	e3a06000	 mov         r6, #0
  00020	e59be440	 ldr         lr, [r11, #0x440]
  00024	e31e0004	 tst         lr, #4
  00028	0a00000b	 beq         |$LN29@PMX_IOCont|
  0002c	e59de044	 ldr         lr, [sp, #0x44]
  00030	e59d4040	 ldr         r4, [sp, #0x40]
  00034	e59d503c	 ldr         r5, [sp, #0x3C]
  00038	e59f031c	 ldr         r0, [pc, #0x31C]
  0003c	e1a03007	 mov         r3, r7
  00040	e1a02009	 mov         r2, r9
  00044	e1a01008	 mov         r1, r8
  00048	e58de00c	 str         lr, [sp, #0xC]
  0004c	e58d4008	 str         r4, [sp, #8]
  00050	e58d5004	 str         r5, [sp, #4]
  00054	e58da000	 str         r10, [sp]
  00058	eb000000	 bl          NKDbgPrintfW
  0005c		 |$LN29@PMX_IOCont|

; 280  : 
; 281  :     // Check if we get correct context
; 282  :     if ((pInstance == NULL))

  0005c	e3580000	 cmp         r8, #0
  00060	1a000002	 bne         |$LN26@PMX_IOCont|

; 283  :         {
; 284  :         RETAILMSG(ZONE_ERROR, (L"ERROR: PMX_IOControl: "
; 285  :             L"Incorrect context parameter\r\n"
; 286  :             ));

  00064	e59f02ec	 ldr         r0, [pc, #0x2EC]
  00068	eb000000	 bl          NKDbgPrintfW

; 287  :         goto cleanUp;

  0006c	ea0000ac	 b           |$cleanUp$36719|
  00070		 |$LN26@PMX_IOCont|

; 288  :         }
; 289  : 
; 290  :     switch (code)

  00070	e3a0381e	 mov         r3, #0x1E, 16
  00074	e3833f69	 orr         r3, r3, #0x69, 30
  00078	e1590003	 cmp         r9, r3
  0007c	8a000050	 bhi         |$LN41@PMX_IOCont|
  00080	0a000045	 beq         |$LN11@PMX_IOCont|
  00084	e3a0381e	 mov         r3, #0x1E, 16
  00088	e3833f65	 orr         r3, r3, #0x65, 30
  0008c	e1590003	 cmp         r9, r3
  00090	0a000039	 beq         |$LN22@PMX_IOCont|
  00094	e3a0381e	 mov         r3, #0x1E, 16
  00098	e3833f66	 orr         r3, r3, #0x66, 30
  0009c	e1590003	 cmp         r9, r3
  000a0	0a00002b	 beq         |$LN19@PMX_IOCont|
  000a4	e3a0381e	 mov         r3, #0x1E, 16
  000a8	e3833f67	 orr         r3, r3, #0x67, 30
  000ac	e1590003	 cmp         r9, r3
  000b0	0a00001e	 beq         |$LN16@PMX_IOCont|
  000b4	e3a0381e	 mov         r3, #0x1E, 16
  000b8	e3833e1a	 orr         r3, r3, #0x1A, 28
  000bc	e1590003	 cmp         r9, r3
  000c0	1a000097	 bne         |$cleanUp$36719|

; 310  : 
; 311  :         case IOCTL_PMX_NOTIFYPOLICY:
; 312  :             if (pInstance->hPmxPolicy == NULL || pInBuffer == NULL) return FALSE;

  000c4	e5983008	 ldr         r3, [r8, #8]
  000c8	e3530000	 cmp         r3, #0
  000cc	0a00009b	 beq         |$LN4@PMX_IOCont|
  000d0	e3570000	 cmp         r7, #0
  000d4	0a000099	 beq         |$LN4@PMX_IOCont|

; 313  :             pPmxInfo = (IOCTL_PMX_PARAMETERS*)pInBuffer;
; 314  :             tempPmxInfo.pvParam = MARSHAL_DATA_POINTER(pPmxInfo->pvParam,
; 315  :                                                        pPmxInfo->size,
; 316  :                                                        ARG_I_PTR
; 317  :                                                        );

  000d8	e5972010	 ldr         r2, [r7, #0x10]
  000dc	e597100c	 ldr         r1, [r7, #0xC]
  000e0	e3a0e000	 mov         lr, #0
  000e4	e3a03004	 mov         r3, #4
  000e8	e28d0010	 add         r0, sp, #0x10
  000ec	e58de000	 str         lr, [sp]
  000f0	eb000000	 bl          CeOpenCallerBuffer
  000f4	e3500000	 cmp         r0, #0
  000f8	43a04000	 movmi       r4, #0
  000fc	559d4010	 ldrpl       r4, [sp, #0x10]

; 318  : 
; 319  :             rc = PmxNotifyPolicy(pInstance->hPmxPolicy,
; 320  :                                  pPmxInfo->msg,
; 321  :                                  tempPmxInfo.pvParam,
; 322  :                                  pPmxInfo->size
; 323  :                                  );

  00100	e5973010	 ldr         r3, [r7, #0x10]
  00104	e5971008	 ldr         r1, [r7, #8]
  00108	e5980008	 ldr         r0, [r8, #8]
  0010c	e1a02004	 mov         r2, r4
  00110	eb000000	 bl          PmxNotifyPolicy
  00114		 |$LN60@PMX_IOCont|

; 324  : 
; 325  :             UNMARSHAL_DATA_POINTER(tempPmxInfo.pvParam,
; 326  :                                    pPmxInfo->pvParam,
; 327  :                                    pPmxInfo->size,
; 328  :                                    ARG_I_PTR
; 329  :                                    );

  00114	e5972010	 ldr         r2, [r7, #0x10]
  00118	e597100c	 ldr         r1, [r7, #0xC]
  0011c	e1a06000	 mov         r6, r0
  00120	e1a00004	 mov         r0, r4
  00124	e3a03004	 mov         r3, #4
  00128	eb000000	 bl          CeCloseCallerBuffer

; 330  :             break;

  0012c	ea00007c	 b           |$cleanUp$36719|
  00130		 |$LN16@PMX_IOCont|

; 303  : 
; 304  :         case IOCTL_PMX_CLOSEPOLICY:
; 305  :             if (pInstance->hPmxPolicy == NULL) return FALSE;

  00130	e5983008	 ldr         r3, [r8, #8]
  00134	e3530000	 cmp         r3, #0
  00138	0a000080	 beq         |$LN4@PMX_IOCont|

; 306  :             PmxClosePolicy(pInstance->hPmxPolicy);

  0013c	e1a00003	 mov         r0, r3
  00140	eb000000	 bl          PmxClosePolicy

; 307  :             pInstance->hPmxPolicy = NULL;

  00144	e3a03000	 mov         r3, #0
  00148	e5883008	 str         r3, [r8, #8]
  0014c		 |$LN59@PMX_IOCont|

; 308  :             rc = TRUE;

  0014c	e3a06001	 mov         r6, #1

; 309  :             break;

  00150	ea000073	 b           |$cleanUp$36719|
  00154		 |$LN19@PMX_IOCont|

; 297  : 
; 298  :         case IOCTL_PMX_OPENPOLICY:
; 299  :             if (pInstance->hPmxPolicy != NULL || pInBuffer == NULL) return FALSE;

  00154	e5983008	 ldr         r3, [r8, #8]
  00158	e3530000	 cmp         r3, #0
  0015c	1a000077	 bne         |$LN4@PMX_IOCont|
  00160	e3570000	 cmp         r7, #0
  00164	0a000075	 beq         |$LN4@PMX_IOCont|

; 300  :             pInstance->hPmxPolicy = PmxOpenPolicy((LPCWSTR)pInBuffer);

  00168	e1a00007	 mov         r0, r7
  0016c	eb000000	 bl          PmxOpenPolicy
  00170		 |$LN58@PMX_IOCont|
  00170	e3500000	 cmp         r0, #0
  00174	e5880008	 str         r0, [r8, #8]

; 301  :             rc = pInstance->hPmxPolicy != NULL;
; 302  :             break;

  00178	ea000067	 b           |$LN57@PMX_IOCont|
  0017c		 |$LN22@PMX_IOCont|

; 291  :         {
; 292  :         case IOCTL_PMX_LOADPOLICY:
; 293  :             if (pInstance->hPmxPolicy != NULL || pInBuffer == NULL) return FALSE;

  0017c	e5983008	 ldr         r3, [r8, #8]
  00180	e3530000	 cmp         r3, #0
  00184	1a00006d	 bne         |$LN4@PMX_IOCont|
  00188	e3570000	 cmp         r7, #0
  0018c	0a00006b	 beq         |$LN4@PMX_IOCont|

; 294  :             pInstance->hPmxPolicy = PmxLoadPolicy(pInBuffer);

  00190	e1a00007	 mov         r0, r7
  00194	eb000000	 bl          PmxLoadPolicy

; 295  :             rc = pInstance->hPmxPolicy != NULL;
; 296  :             break;

  00198	eafffff4	 b           |$LN58@PMX_IOCont|
  0019c		 |$LN11@PMX_IOCont|

; 331  : 
; 332  :         case IOCTL_PMX_LOADCONSTRAINT:
; 333  :             if (pInstance->hPmxConstraint != NULL || pInBuffer == NULL) return FALSE;

  0019c	e5983004	 ldr         r3, [r8, #4]
  001a0	e3530000	 cmp         r3, #0
  001a4	1a000065	 bne         |$LN4@PMX_IOCont|
  001a8	e3570000	 cmp         r7, #0
  001ac	0a000063	 beq         |$LN4@PMX_IOCont|

; 334  :             pInstance->hPmxConstraint = PmxLoadConstraint(pInBuffer);

  001b0	e1a00007	 mov         r0, r7
  001b4	eb000000	 bl          PmxLoadConstraint
  001b8	e3500000	 cmp         r0, #0
  001bc	e5880004	 str         r0, [r8, #4]

; 335  :             rc = pInstance->hPmxConstraint != NULL;
; 336  :             break;

  001c0	ea000055	 b           |$LN57@PMX_IOCont|
  001c4		 |$LN41@PMX_IOCont|

; 331  : 
; 332  :         case IOCTL_PMX_LOADCONSTRAINT:
; 333  :             if (pInstance->hPmxConstraint != NULL || pInBuffer == NULL) return FALSE;

  001c4	e3a0381e	 mov         r3, #0x1E, 16
  001c8	e3833f6a	 orr         r3, r3, #0x6A, 30
  001cc	e1590003	 cmp         r9, r3
  001d0	0a000025	 beq         |$LN6@PMX_IOCont|
  001d4	e3a0381e	 mov         r3, #0x1E, 16
  001d8	e3833f6b	 orr         r3, r3, #0x6B, 30
  001dc	e1590003	 cmp         r9, r3
  001e0	0a00000c	 beq         |$LN3@PMX_IOCont|
  001e4	e3a0381e	 mov         r3, #0x1E, 16
  001e8	e3833e1b	 orr         r3, r3, #0x1B, 28
  001ec	e1590003	 cmp         r9, r3
  001f0	1a00004b	 bne         |$cleanUp$36719|

; 337  : 
; 338  :         case IOCTL_PMX_RELEASECONSTRAINT:
; 339  :             if (pInstance->hPmxConstraint == NULL) return FALSE;

  001f4	e5983004	 ldr         r3, [r8, #4]
  001f8	e3530000	 cmp         r3, #0
  001fc	0a00004f	 beq         |$LN4@PMX_IOCont|

; 340  :             PmxReleaseConstraint(pInstance->hPmxConstraint);

  00200	e1a00003	 mov         r0, r3
  00204	eb000000	 bl          PmxReleaseConstraint

; 341  :             pInstance->hPmxConstraint = NULL;

  00208	e3a03000	 mov         r3, #0
  0020c	e5883004	 str         r3, [r8, #4]
  00210	e3a06001	 mov         r6, #1
  00214	ea000042	 b           |$cleanUp$36719|
  00218		 |$LN3@PMX_IOCont|

; 376  :             break;
; 377  : 
; 378  :         case IOCTL_PMX_UPDATECONSTRAINT:
; 379  :             if (pInstance->hPmxConstraint == NULL || pInBuffer == NULL) return FALSE;

  00218	e5983004	 ldr         r3, [r8, #4]
  0021c	e3530000	 cmp         r3, #0
  00220	0a000046	 beq         |$LN4@PMX_IOCont|
  00224	e3570000	 cmp         r7, #0
  00228	0a000044	 beq         |$LN4@PMX_IOCont|

; 380  :             pPmxInfo = (IOCTL_PMX_PARAMETERS*)pInBuffer;
; 381  : 
; 382  :             tempPmxInfo.pvParam = MARSHAL_DATA_POINTER(pPmxInfo->pvParam,
; 383  :                                                        pPmxInfo->size,
; 384  :                                                        ARG_I_PTR
; 385  :                                                        );

  0022c	e5972010	 ldr         r2, [r7, #0x10]
  00230	e597100c	 ldr         r1, [r7, #0xC]
  00234	e3a0e000	 mov         lr, #0
  00238	e3a03004	 mov         r3, #4
  0023c	e28d0010	 add         r0, sp, #0x10
  00240	e58de000	 str         lr, [sp]
  00244	eb000000	 bl          CeOpenCallerBuffer
  00248	e3500000	 cmp         r0, #0
  0024c	43a04000	 movmi       r4, #0
  00250	559d4010	 ldrpl       r4, [sp, #0x10]

; 386  :             rc = PmxUpdateConstraint(pInstance->hPmxConstraint,
; 387  :                                      pPmxInfo->msg,
; 388  :                                      tempPmxInfo.pvParam,
; 389  :                                      pPmxInfo->size);

  00254	e5973010	 ldr         r3, [r7, #0x10]
  00258	e5971008	 ldr         r1, [r7, #8]
  0025c	e5980004	 ldr         r0, [r8, #4]
  00260	e1a02004	 mov         r2, r4
  00264	eb000000	 bl          PmxUpdateConstraint

; 390  : 
; 391  :             UNMARSHAL_DATA_POINTER(tempPmxInfo.pvParam,
; 392  :                                    pPmxInfo->pvParam,
; 393  :                                    pPmxInfo->size,
; 394  :                                    ARG_I_PTR
; 395  :                                    );
; 396  :             break;

  00268	eaffffa9	 b           |$LN60@PMX_IOCont|
  0026c		 |$LN6@PMX_IOCont|

; 342  :             rc = TRUE;
; 343  :             break;
; 344  : 
; 345  :         case IOCTL_PMX_SETCONSTRAINTBYID:
; 346  :             if (pInstance->hPmxConstraint != NULL || pInBuffer == NULL) return FALSE;

  0026c	e5983004	 ldr         r3, [r8, #4]
  00270	e3530000	 cmp         r3, #0
  00274	1a000031	 bne         |$LN4@PMX_IOCont|
  00278	e3570000	 cmp         r7, #0
  0027c	0a00002f	 beq         |$LN4@PMX_IOCont|

; 347  :             pPmxInfo = (IOCTL_PMX_PARAMETERS*)pInBuffer;
; 348  :             tempPmxInfo.szId = (LPCWSTR)MARSHAL_DATA_POINTER(pPmxInfo->szId,
; 349  :                                                              (sizeof(WCHAR) * pPmxInfo->strlen),
; 350  :                                                              ARG_I_WSTR
; 351  :                                                              );

  00280	e5973004	 ldr         r3, [r7, #4]
  00284	e5971000	 ldr         r1, [r7]
  00288	e3a04000	 mov         r4, #0
  0028c	e1a02083	 mov         r2, r3, lsl #1
  00290	e3a03005	 mov         r3, #5
  00294	e28d0010	 add         r0, sp, #0x10
  00298	e58d4000	 str         r4, [sp]
  0029c	eb000000	 bl          CeOpenCallerBuffer

; 352  : 
; 353  :             tempPmxInfo.pvParam = MARSHAL_DATA_POINTER(pPmxInfo->pvParam,
; 354  :                                                        pPmxInfo->size,
; 355  :                                                        ARG_I_PTR
; 356  :                                                        );

  002a0	e5972010	 ldr         r2, [r7, #0x10]
  002a4	e597100c	 ldr         r1, [r7, #0xC]
  002a8	e3500000	 cmp         r0, #0
  002ac	43a05000	 movmi       r5, #0
  002b0	559d5010	 ldrpl       r5, [sp, #0x10]
  002b4	e3a03004	 mov         r3, #4
  002b8	e28d0014	 add         r0, sp, #0x14
  002bc	e58d4000	 str         r4, [sp]
  002c0	eb000000	 bl          CeOpenCallerBuffer
  002c4	e3500000	 cmp         r0, #0
  002c8	43a04000	 movmi       r4, #0
  002cc	559d4014	 ldrpl       r4, [sp, #0x14]

; 357  : 
; 358  :             pInstance->hPmxConstraint = PmxSetConstraintById(tempPmxInfo.szId,
; 359  :                                                              pPmxInfo->msg,
; 360  :                                                              tempPmxInfo.pvParam,
; 361  :                                                              pPmxInfo->size
; 362  :                                                              );

  002d0	e5973010	 ldr         r3, [r7, #0x10]
  002d4	e5971008	 ldr         r1, [r7, #8]
  002d8	e1a02004	 mov         r2, r4
  002dc	e1a00005	 mov         r0, r5
  002e0	eb000000	 bl          PmxSetConstraintById
  002e4	e5880004	 str         r0, [r8, #4]

; 363  :             UNMARSHAL_DATA_POINTER(tempPmxInfo.pvParam,
; 364  :                                    pPmxInfo->pvParam,
; 365  :                                    pPmxInfo->size,
; 366  :                                    ARG_I_PTR
; 367  :                                    );

  002e8	e5972010	 ldr         r2, [r7, #0x10]
  002ec	e597100c	 ldr         r1, [r7, #0xC]
  002f0	e3a03004	 mov         r3, #4
  002f4	e1a00004	 mov         r0, r4
  002f8	eb000000	 bl          CeCloseCallerBuffer

; 368  : 
; 369  :             UNMARSHAL_DATA_POINTER(tempPmxInfo.szId,
; 370  :                                    pPmxInfo->szId,
; 371  :                                    (sizeof(WCHAR) * pPmxInfo->strlen),
; 372  :                                    ARG_I_WSTR
; 373  :                                    );

  002fc	e5972004	 ldr         r2, [r7, #4]
  00300	e5971000	 ldr         r1, [r7]
  00304	e3a03005	 mov         r3, #5
  00308	e1a02082	 mov         r2, r2, lsl #1
  0030c	e1a00005	 mov         r0, r5
  00310	eb000000	 bl          CeCloseCallerBuffer

; 374  : 
; 375  :             rc = pInstance->hPmxConstraint != NULL;

  00314	e5983004	 ldr         r3, [r8, #4]
  00318	e3530000	 cmp         r3, #0
  0031c		 |$LN57@PMX_IOCont|
  0031c	1affff8a	 bne         |$LN59@PMX_IOCont|
  00320	e3a06000	 mov         r6, #0
  00324		 |$cleanUp$36719|

; 266  :     BOOL rc = FALSE;
; 267  :     Instance_t *pInstance = (Instance_t*)context;
; 268  :     IOCTL_PMX_PARAMETERS  tempPmxInfo;
; 269  :     IOCTL_PMX_PARAMETERS *pPmxInfo;
; 270  : 
; 271  : 	UNREFERENCED_PARAMETER(inSize);
; 272  : 	UNREFERENCED_PARAMETER(pOutBuffer);
; 273  : 	UNREFERENCED_PARAMETER(outSize);
; 274  : 	UNREFERENCED_PARAMETER(pOutSize);
; 275  : 
; 276  :     RETAILMSG(ZONE_FUNCTION, (
; 277  :         L"+PMX_IOControl(0x%08x, 0x%08x, 0x%08x, %d, 0x%08x, %d, 0x%08x)\r\n",
; 278  :         context, code, pInBuffer, inSize, pOutBuffer, outSize, pOutSize
; 279  :         ));

  00324	e59b3440	 ldr         r3, [r11, #0x440]

; 397  :         }
; 398  : 
; 399  : cleanUp:
; 400  : 
; 401  :     RETAILMSG(ZONE_FUNCTION, (L"-PMX_IOControl(rc = %d)\r\n", rc));

  00328	e3130004	 tst         r3, #4
  0032c	0a000004	 beq         |$LN27@PMX_IOCont|
  00330	e59f001c	 ldr         r0, [pc, #0x1C]
  00334	e1a01006	 mov         r1, r6
  00338	eb000000	 bl          NKDbgPrintfW

; 402  :     return rc;

  0033c	ea000000	 b           |$LN27@PMX_IOCont|
  00340		 |$LN4@PMX_IOCont|

; 342  :             rc = TRUE;
; 343  :             break;
; 344  : 
; 345  :         case IOCTL_PMX_SETCONSTRAINTBYID:
; 346  :             if (pInstance->hPmxConstraint != NULL || pInBuffer == NULL) return FALSE;

  00340	e3a06000	 mov         r6, #0
  00344		 |$LN27@PMX_IOCont|

; 403  : }

  00344	e1a00006	 mov         r0, r6
  00348	e28dd018	 add         sp, sp, #0x18
  0034c	e8bd4ff0	 ldmia       sp!, {r4 - r11, lr}
  00350	e12fff1e	 bx          lr
  00354		 |$LN64@PMX_IOCont|
  00354		 |$LN65@PMX_IOCont|
  00354	00000000	 DCD         |??_C@_1DE@LFMFHMDF@?$AA?9?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AAr?$AAc?$AA?5?$AA?$DN?$AA?5?$AA?$CF?$AAd?$AA?$CJ?$AA?$AN?$AA?6?$AA?$AA@|
  00358		 |$LN66@PMX_IOCont|
  00358	00000000	 DCD         |??_C@_1GI@MNPCBNEO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?3?$AA?5?$AAI?$AAn?$AAc?$AAo?$AAr?$AAr?$AAe?$AAc?$AAt?$AA?5@|
  0035c		 |$LN67@PMX_IOCont|
  0035c	00000000	 DCD         |??_C@_1IC@JKHIBKFA@?$AA?$CL?$AAP?$AAM?$AAX?$AA_?$AAI?$AAO?$AAC?$AAo?$AAn?$AAt?$AAr?$AAo?$AAl?$AA?$CI?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0?$AAx?$AA?$CF?$AA0?$AA8?$AAx?$AA?0?$AA?5?$AA0@|
  00360		 |$LN68@PMX_IOCont|
  00360	00000000	 DCD         |dpCurSettings|
  00364		 |$M36996|

			 ENDP  ; |?PMX_IOControl@@YAHKKPAXK0KPAK@Z|, PMX_IOControl

	EXPORT	|DllMain|
	IMPORT	|DisableThreadLibraryCalls|
	IMPORT	|RegisterDbgZones|

  00000			 AREA	 |.pdata|, PDATA
|$T37014| DCD	|$LN8@DllMain|
	DCD	0x40000c01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DllMain| PROC

; 412  : {

  00000		 |$LN8@DllMain|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M37011|
  00004	e1a04000	 mov         r4, r0

; 413  :     UNREFERENCED_PARAMETER(Reserved);
; 414  : 
; 415  :     switch(Reason)

  00008	e3510001	 cmp         r1, #1
  0000c	1a000003	 bne         |$LN2@DllMain|

; 416  :         {
; 417  :         case DLL_PROCESS_ATTACH:
; 418  :             RETAILREGISTERZONES((HMODULE)hDLL);

  00010	e59f1014	 ldr         r1, [pc, #0x14]
  00014	eb000000	 bl          RegisterDbgZones

; 419  :             DisableThreadLibraryCalls((HMODULE)hDLL);

  00018	e1a00004	 mov         r0, r4
  0001c	eb000000	 bl          DisableThreadLibraryCalls
  00020		 |$LN2@DllMain|

; 420  :             break;
; 421  :         }
; 422  :     return TRUE;

  00020	e3a00001	 mov         r0, #1

; 423  : }

  00024	e8bd4010	 ldmia       sp!, {r4, lr}
  00028	e12fff1e	 bx          lr
  0002c		 |$LN9@DllMain|
  0002c		 |$LN10@DllMain|
  0002c	00000000	 DCD         |dpCurSettings|
  00030		 |$M37012|

			 ENDP  ; |DllMain|

	END
